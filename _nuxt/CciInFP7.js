import{_ as k}from"./CR-T6FEM.js";import{_ as v}from"./C3LQ35JC.js";import{a as y,_ as w}from"./Dh0Zgqt2.js";import{D as h,a9 as M,aa as C,v as c,m as B,u as j,c as o,b as n,w as r,o as a,x as u,a as t,t as L,d as N}from"#entry";import{a as V}from"./Cd2Mrs8-.js";const $={class:"min-h-screen bg-gray-50 flex items-center justify-center px-6"},R={key:0,class:"text-center"},D={key:1,class:"text-center"},S={key:2,class:"text-center"},T={class:"text-red-600 mb-6"},F=h({__name:"magic",setup(q){const m=M(),f=C(),{verifyMagicLink:x}=V(),l=c(!0),d=c(!1),i=c("");return B(async()=>{const s=m.query.token;if(console.log("[Magic] 收到 token:",s?`${s.substring(0,20)}...`:"null"),!s){l.value=!1,i.value="缺少验证令牌",console.error("[Magic] 缺少 token");return}console.log("[Magic] 开始验证魔法链接");const e=await x(s);console.log("[Magic] 验证结果:",e),l.value=!1,e.success?(console.log("[Magic] 验证成功，准备跳转"),d.value=!0,setTimeout(()=>{f.push("/")},1500)):(console.error("[Magic] 验证失败:",e.error),i.value=e.error||"验证链接失败或已过期")}),j({title:"验证登录 - InsightReader"}),(s,e)=>{const _=k,g=v,p=w,b=y;return a(),o("div",$,[n(b,{class:"w-full max-w-md"},{default:r(()=>[n(p,{class:"p-8"},{default:r(()=>[u(l)?(a(),o("div",R,[...e[0]||(e[0]=[t("div",{class:"animate-spin h-12 w-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"},null,-1),t("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"验证中...",-1),t("p",{class:"text-gray-600"},"正在验证你的登录链接",-1)])])):u(d)?(a(),o("div",D,[...e[1]||(e[1]=[t("div",{class:"bg-green-100 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4"},[t("svg",{class:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1),t("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"登录成功！",-1),t("p",{class:"text-gray-600 mb-6"},"正在跳转...",-1)])])):(a(),o("div",S,[e[3]||(e[3]=t("div",{class:"bg-red-100 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4"},[t("svg",{class:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e[4]||(e[4]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"验证失败",-1)),t("p",T,L(u(i)),1),n(g,{to:"/login"},{default:r(()=>[n(_,null,{default:r(()=>[...e[2]||(e[2]=[N("返回登录",-1)])]),_:1})]),_:1})]))]),_:1})]),_:1})])}}});export{F as default};
