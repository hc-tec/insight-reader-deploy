import{u as Ne,e as bo,_ as xo}from"./BacrmCrX.js";import{i as wo,p as _o,e as J,g as ss,f as os,s as Dt,r as de,h as ue,j as Ee,k as ko,n as Re,l as S,m as ge,q as Qe,v as E,x as p,y as Co,z as rs,A as $o,B as So,C as Ge,D as R,E as Ve,F as Ot,G as dn,H,o as _,w as A,I as V,J as pe,K as L,T as Ao,L as ee,c as k,M as Q,N as ie,O as as,P as nt,Q as Mo,b as B,a as n,d as Z,R as qt,S as we,U as Eo,V as To,t as M,W as yn,X as Nt,Y as Vt,Z as Bo,$ as he,a0 as ye,a1 as vt,a2 as q,a3 as Xe,_ as $e,a4 as oe,a5 as be,a6 as Lo,a7 as un,a8 as It,u as Oo,a9 as Io}from"#entry";import{r as Po,P as ve,c as Te,a as Ro,_ as bn}from"./CR-T6FEM.js";import{u as F,a as mt}from"./Dbg_rtJb.js";import{m as ft,u as zo}from"./CAbjJPDe.js";import{_ as Pt,a as Rt}from"./Dh0Zgqt2.js";import"./C2AG0dpl.js";function Ho(e,t=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY){return Math.min(s,Math.max(t,e))}function je(e,t){const s=typeof e=="string"&&!t?`${e}Context`:t,o=Symbol(s);return[l=>{const i=wo(o,l);if(i||i===null)return i;throw new Error(`Injection \`${o.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},l=>(_o(o,l),l)]}function ls(e,t,s){const o=s.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&o.addEventListener(e,t,{once:!0}),o.dispatchEvent(r)}const[is]=je("ConfigProvider");function jo(e,t){var s;const o=Dt();return Ee(()=>{o.value=e()},{...t,flush:(s=void 0)!=null?s:"sync"}),de(o)}function ht(e){return ss()?(os(e),!0):!1}function Do(){const e=new Set,t=a=>{e.delete(a)};return{on:a=>{e.add(a);const l=()=>t(a);return ht(l),{off:l}},off:t,trigger:(...a)=>Promise.all(Array.from(e).map(l=>l(...a))),clear:()=>{e.clear()}}}const yt=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const qo=e=>typeof e<"u",No=Object.prototype.toString,Vo=e=>No.call(e)==="[object Object]",On=()=>{};function Fo(e,t){function s(...o){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(a)})}return s}function Wo(e,t={}){let s,o,r=On;const a=u=>{clearTimeout(u),r(),r=On};let l;return u=>{const d=ue(e),c=ue(t.maxWait);return s&&a(s),d<=0||c!==void 0&&c<=0?(o&&(a(o),o=null),Promise.resolve(u())):new Promise((v,f)=>{r=t.rejectOnCancel?f:v,l=u,c&&!o&&(o=setTimeout(()=>{s&&a(s),o=null,v(l())},c)),s=setTimeout(()=>{o&&a(o),o=null,v(u())},d)})}}function rn(e){return Array.isArray(e)?e:[e]}function Uo(e,t=1e4){return ko((s,o)=>{let r=ue(e),a;const l=()=>setTimeout(()=>{r=ue(e),o()},ue(t));return ht(()=>{clearTimeout(a)}),{get(){return s(),r},set(i){r=i,o(),clearTimeout(a),a=l()}}})}function cs(e,t=200,s={}){return Fo(Wo(t,s),e)}const Go=ue;function ds(e,t,s={}){const{immediate:o=!0,immediateCallback:r=!1}=s,a=Dt(!1);let l=null;function i(){l&&(clearTimeout(l),l=null)}function u(){a.value=!1,i()}function d(...c){r&&e(),i(),a.value=!0,l=setTimeout(()=>{a.value=!1,l=null,e(...c)},ue(t))}return o&&(a.value=!0,yt&&d()),ht(u),{isPending:de(a),start:d,stop:u}}function Ko(e,t,s){return J(e,t,{...s,immediate:!0})}function Yo(e,t,s){const o=J(e,(...r)=>(Re(()=>o()),t(...r)),s);return o}const Ft=yt?window:void 0;function Fe(e){var t;const s=ue(e);return(t=s?.$el)!=null?t:s}function fn(...e){const t=[],s=()=>{t.forEach(i=>i()),t.length=0},o=(i,u,d,c)=>(i.addEventListener(u,d,c),()=>i.removeEventListener(u,d,c)),r=S(()=>{const i=rn(ue(e[0])).filter(u=>u!=null);return i.every(u=>typeof u!="string")?i:void 0}),a=Ko(()=>{var i,u;return[(u=(i=r.value)==null?void 0:i.map(d=>Fe(d)))!=null?u:[Ft].filter(d=>d!=null),rn(ue(r.value?e[1]:e[0])),rn(p(r.value?e[2]:e[1])),ue(r.value?e[3]:e[2])]},([i,u,d,c])=>{if(s(),!i?.length||!u?.length||!d?.length)return;const v=Vo(c)?{...c}:c;t.push(...i.flatMap(f=>u.flatMap(g=>d.map(b=>o(f,g,b,v)))))},{flush:"post"}),l=()=>{a(),s()};return ht(s),l}function us(){const e=Dt(!1),t=Qe();return t&&ge(()=>{e.value=!0},t),e}function Xo(e){const t=us();return S(()=>(t.value,!!e()))}function Jo(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Qo(...e){let t,s,o={};e.length===3?(t=e[0],s=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,s=e[0],o=e[1]):(t=e[0],s=e[1]):(t=!0,s=e[0]);const{target:r=Ft,eventName:a="keydown",passive:l=!1,dedupe:i=!1}=o,u=Jo(t);return fn(r,a,c=>{c.repeat&&ue(i)||u(c)&&s(c)},l)}function Zo(e){return JSON.parse(JSON.stringify(e))}function rt(e,t,s={}){const{window:o=Ft,...r}=s;let a;const l=Xo(()=>o&&"ResizeObserver"in o),i=()=>{a&&(a.disconnect(),a=void 0)},u=S(()=>{const v=ue(e);return Array.isArray(v)?v.map(f=>Fe(f)):[Fe(v)]}),d=J(u,v=>{if(i(),l.value&&o){a=new ResizeObserver(t);for(const f of v)f&&a.observe(f,r)}},{immediate:!0,flush:"post"}),c=()=>{i(),d()};return ht(c),{isSupported:l,stop:c}}function fs(e,t,s,o={}){var r,a,l;const{clone:i=!1,passive:u=!1,eventName:d,deep:c=!1,defaultValue:v,shouldEmit:f}=o,g=Qe(),b=s||g?.emit||((r=g?.$emit)==null?void 0:r.bind(g))||((l=(a=g?.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(g?.proxy));let x=d;t||(t="modelValue"),x=x||`update:${t.toString()}`;const h=y=>i?typeof i=="function"?i(y):Zo(y):y,m=()=>qo(e[t])?h(e[t]):v,w=y=>{f?f(y)&&b(x,y):b(x,y)};if(u){const y=m(),$=E(y);let C=!1;return J(()=>e[t],z=>{C||(C=!0,$.value=h(z),Re(()=>C=!1))}),J($,z=>{!C&&(z!==e[t]||c)&&w(z)},{deep:c}),$}else return S({get(){return m()},set(y){w(y)}})}function er(e){const t=is({dir:E("ltr")});return S(()=>e?.value||t.dir?.value||"ltr")}function tr(e){const t=Qe(),s=t?.type.emits,o={};return s?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),s?.forEach(r=>{o[Co(rs(r))]=(...a)=>e(r,...a)}),o}function nr(e){return S(()=>Go(e)?!!Fe(e)?.closest("form"):!0)}function se(){const e=Qe(),t=E(),s=S(()=>["#text","#comment"].includes(t.value?.$el.nodeName)?t.value?.$el.nextElementSibling:Fe(t)),o=Object.assign({},e.exposed),r={};for(const l in e.props)Object.defineProperty(r,l,{enumerable:!0,configurable:!0,get:()=>e.props[l]});if(Object.keys(o).length>0)for(const l in o)Object.defineProperty(r,l,{enumerable:!0,configurable:!0,get:()=>o[l]});Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=r;function a(l){t.value=l,l&&(Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>l instanceof Element?l:l.$el}),e.exposed=r)}return{forwardRef:a,currentRef:t,currentElement:s}}function ps(e){const t=Qe(),s=Object.keys(t?.type.props??{}).reduce((r,a)=>{const l=(t?.type.props[a]).default;return l!==void 0&&(r[a]=l),r},{}),o=$o(e);return S(()=>{const r={},a=t?.vnode.props??{};return Object.keys(a).forEach(l=>{r[rs(l)]=a[l]}),Object.keys({...s,...r}).reduce((l,i)=>(o.value[i]!==void 0&&(l[i]=o.value[i]),l),{})})}function Wt(e,t){const s=ps(e),o=t?tr(t):{};return S(()=>({...s.value,...o}))}function sr(e,t){const s=Uo(!1,300),o=E(null),r=Do();function a(){o.value=null,s.value=!1}function l(i,u){const d=i.currentTarget,c={x:i.clientX,y:i.clientY},v=or(c,d.getBoundingClientRect()),f=rr(c,v),g=ar(u.getBoundingClientRect()),b=ir([...f,...g]);o.value=b,s.value=!0}return Ee(i=>{if(e.value&&t.value){const u=c=>l(c,t.value),d=c=>l(c,e.value);e.value.addEventListener("pointerleave",u),t.value.addEventListener("pointerleave",d),i(()=>{e.value?.removeEventListener("pointerleave",u),t.value?.removeEventListener("pointerleave",d)})}}),Ee(i=>{if(o.value){const u=d=>{if(!o.value||!(d.target instanceof HTMLElement))return;const c=d.target,v={x:d.clientX,y:d.clientY},f=e.value?.contains(c)||t.value?.contains(c),g=!lr(v,o.value),b=!!c.closest("[data-grace-area-trigger]");f?a():(g||b)&&(a(),r.trigger())};e.value?.ownerDocument.addEventListener("pointermove",u),i(()=>e.value?.ownerDocument.removeEventListener("pointermove",u))}}),{isPointerInTransit:s,onPointerExit:r.on}}function or(e,t){const s=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,o,r,a)){case a:return"left";case r:return"right";case s:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function rr(e,t,s=5){const o=[];switch(t){case"top":o.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":o.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":o.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":o.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return o}function ar(e){const{top:t,right:s,bottom:o,left:r}=e;return[{x:r,y:t},{x:s,y:t},{x:s,y:o},{x:r,y:o}]}function lr(e,t){const{x:s,y:o}=e;let r=!1;for(let a=0,l=t.length-1;a<t.length;l=a++){const i=t[a].x,u=t[a].y,d=t[l].x,c=t[l].y;u>o!=c>o&&s<(d-i)*(o-u)/(c-u)+i&&(r=!r)}return r}function ir(e){const t=e.slice();return t.sort((s,o)=>s.x<o.x?-1:s.x>o.x?1:s.y<o.y?-1:s.y>o.y?1:0),cr(t)}function cr(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const r=e[o];for(;t.length>=2;){const a=t[t.length-1],l=t[t.length-2];if((a.x-l.x)*(r.y-l.y)>=(a.y-l.y)*(r.x-l.x))t.pop();else break}t.push(r)}t.pop();const s=[];for(let o=e.length-1;o>=0;o--){const r=e[o];for(;s.length>=2;){const a=s[s.length-1],l=s[s.length-2];if((a.x-l.x)*(r.y-l.y)>=(a.y-l.y)*(r.x-l.x))s.pop();else break}s.push(r)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}function dr(e,t="reka"){return`${t}-${So?.()}`}function ur(e){const t=E(),s=S(()=>t.value?.width??0),o=S(()=>t.value?.height??0);return ge(()=>{const r=Fe(e);if(r){t.value={width:r.offsetWidth,height:r.offsetHeight};const a=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const i=l[0];let u,d;if("borderBoxSize"in i){const c=i.borderBoxSize,v=Array.isArray(c)?c[0]:c;u=v.inlineSize,d=v.blockSize}else u=r.offsetWidth,d=r.offsetHeight;t.value={width:u,height:d}});return a.observe(r,{box:"border-box"}),()=>a.unobserve(r)}else t.value=void 0}),{width:s,height:o}}function gs(e,t){const s=E(e);function o(a){return t[s.value][a]??s.value}return{state:s,dispatch:a=>{s.value=o(a)}}}function fr(e,t){const s=E({}),o=E("none"),r=E(e),a=e.value?"mounted":"unmounted";let l;const i=t.value?.ownerDocument.defaultView??Ft,{state:u,dispatch:d}=gs(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=h=>{if(yt){const m=new CustomEvent(h,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(m)}};J(e,async(h,m)=>{const w=m!==h;if(await Re(),w){const y=o.value,$=$t(t.value);h?(d("MOUNT"),c("enter"),$==="none"&&c("after-enter")):$==="none"||$==="undefined"||s.value?.display==="none"?(d("UNMOUNT"),c("leave"),c("after-leave")):m&&y!==$?(d("ANIMATION_OUT"),c("leave")):(d("UNMOUNT"),c("after-leave"))}},{immediate:!0});const v=h=>{const m=$t(t.value),w=m.includes(CSS.escape(h.animationName)),y=u.value==="mounted"?"enter":"leave";if(h.target===t.value&&w&&(c(`after-${y}`),d("ANIMATION_END"),!r.value)){const $=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",l=i?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=$)})}h.target===t.value&&m==="none"&&d("ANIMATION_END")},f=h=>{h.target===t.value&&(o.value=$t(t.value))},g=J(t,(h,m)=>{h?(s.value=getComputedStyle(h),h.addEventListener("animationstart",f),h.addEventListener("animationcancel",v),h.addEventListener("animationend",v)):(d("ANIMATION_END"),l!==void 0&&i?.clearTimeout(l),m?.removeEventListener("animationstart",f),m?.removeEventListener("animationcancel",v),m?.removeEventListener("animationend",v))},{immediate:!0}),b=J(u,()=>{const h=$t(t.value);o.value=u.value==="mounted"?h:"none"});return Ge(()=>{g(),b()}),{isPresent:S(()=>["mounted","unmountSuspended"].includes(u.value))}}function $t(e){return e&&getComputedStyle(e).animationName||"none"}var Ut=R({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:s}){const{present:o,forceMount:r}=Ve(e),a=E(),{isPresent:l}=fr(o,a);s({present:l});let i=t.default({present:l.value});i=Po(i||[]);const u=Qe();if(i&&i?.length>1){const d=u?.parent?.type.name?`<${u.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${d}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(c=>`  - ${c}`).join(`
`)].join(`
`))}return()=>r.value||o.value||l.value?Ot(t.default({present:l.value})[0],{ref:d=>{const c=Fe(d);return typeof c?.hasAttribute>"u"||(c?.hasAttribute("data-reka-popper-content-wrapper")?a.value=c.firstElementChild:a.value=c),c}}):null}});function pr(){const e=E(),t=S(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:Fe(e));return{primitiveElement:e,currentElement:t}}const gr="dismissableLayer.pointerDownOutside",vr="dismissableLayer.focusOutside";function vs(e,t){const s=t.closest("[data-dismissable-layer]"),o=e.dataset.dismissableLayer===""?e:e.querySelector("[data-dismissable-layer]"),r=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(s&&(o===s||r.indexOf(o)<r.indexOf(s)))}function mr(e,t,s=!0){const o=t?.value?.ownerDocument??globalThis?.document,r=E(!1),a=E(()=>{});return Ee(l=>{if(!yt||!ue(s))return;const i=async d=>{const c=d.target;if(!(!t?.value||!c)){if(vs(t.value,c)){r.value=!1;return}if(d.target&&!r.value){let f=function(){ls(gr,e,v)};const v={originalEvent:d};d.pointerType==="touch"?(o.removeEventListener("click",a.value),a.value=f,o.addEventListener("click",a.value,{once:!0})):f()}else o.removeEventListener("click",a.value);r.value=!1}},u=window.setTimeout(()=>{o.addEventListener("pointerdown",i)},0);l(()=>{window.clearTimeout(u),o.removeEventListener("pointerdown",i),o.removeEventListener("click",a.value)})}),{onPointerDownCapture:()=>{ue(s)&&(r.value=!0)}}}function hr(e,t,s=!0){const o=t?.value?.ownerDocument??globalThis?.document,r=E(!1);return Ee(a=>{if(!yt||!ue(s))return;const l=async i=>{if(!t?.value)return;await Re(),await Re();const u=i.target;!t.value||!u||vs(t.value,u)||i.target&&!r.value&&ls(vr,e,{originalEvent:i})};o.addEventListener("focusin",l),a(()=>o.removeEventListener("focusin",l))}),{onFocusCapture:()=>{ue(s)&&(r.value=!0)},onBlurCapture:()=>{ue(s)&&(r.value=!1)}}}const Ie=dn({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var yr=R({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const s=e,o=t,{forwardRef:r,currentElement:a}=se(),l=S(()=>a.value?.ownerDocument??globalThis.document),i=S(()=>Ie.layersRoot),u=S(()=>a.value?Array.from(i.value).indexOf(a.value):-1),d=S(()=>Ie.layersWithOutsidePointerEventsDisabled.size>0),c=S(()=>{const b=Array.from(i.value),[x]=[...Ie.layersWithOutsidePointerEventsDisabled].slice(-1),h=b.indexOf(x);return u.value>=h}),v=mr(async b=>{const x=[...Ie.branches].some(h=>h?.contains(b.target));!c.value||x||(o("pointerDownOutside",b),o("interactOutside",b),await Re(),b.defaultPrevented||o("dismiss"))},a),f=hr(b=>{[...Ie.branches].some(h=>h?.contains(b.target))||(o("focusOutside",b),o("interactOutside",b),b.defaultPrevented||o("dismiss"))},a);Qo("Escape",b=>{u.value===i.value.size-1&&(o("escapeKeyDown",b),b.defaultPrevented||o("dismiss"))});let g;return Ee(b=>{a.value&&(s.disableOutsidePointerEvents&&(Ie.layersWithOutsidePointerEventsDisabled.size===0&&(g=l.value.body.style.pointerEvents,l.value.body.style.pointerEvents="none"),Ie.layersWithOutsidePointerEventsDisabled.add(a.value)),i.value.add(a.value),b(()=>{s.disableOutsidePointerEvents&&Ie.layersWithOutsidePointerEventsDisabled.size===1&&(l.value.body.style.pointerEvents=g)}))}),Ee(b=>{b(()=>{a.value&&(i.value.delete(a.value),Ie.layersWithOutsidePointerEventsDisabled.delete(a.value))})}),(b,x)=>(_(),H(p(ve),{ref:p(r),"as-child":b.asChild,as:b.as,"data-dismissable-layer":"",style:pe({pointerEvents:d.value?c.value?"auto":"none":void 0}),onFocusCapture:p(f).onFocusCapture,onBlurCapture:p(f).onBlurCapture,onPointerdownCapture:p(v).onPointerDownCapture},{default:A(()=>[V(b.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),br=yr,xr=R({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=us();return(s,o)=>p(t)||s.forceMount?(_(),H(Ao,{key:0,to:s.to,disabled:s.disabled,defer:s.defer},[V(s.$slots,"default")],8,["to","disabled","defer"])):L("v-if",!0)}}),wr=xr,_r=R({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return(t,s)=>(_(),H(p(ve),{as:t.as,"as-child":t.asChild,"aria-hidden":t.feature==="focusable"?"true":void 0,"data-hidden":t.feature==="fully-hidden"?"":void 0,tabindex:t.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:A(()=>[V(t.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),ms=_r,kr=R({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(e){const t=e,{primitiveElement:s,currentElement:o}=pr(),r=S(()=>t.checked??t.value);return J(r,(a,l)=>{if(!o.value)return;const i=o.value,u=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(u,"value").set;if(c&&a!==l){const v=new Event("input",{bubbles:!0}),f=new Event("change",{bubbles:!0});c.call(i,a),i.dispatchEvent(v),i.dispatchEvent(f)}}),(a,l)=>(_(),H(ms,ee({ref_key:"primitiveElement",ref:s},{...t,...a.$attrs},{as:"input"}),null,16))}}),In=kr,Cr=R({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(e){const t=e,s=S(()=>typeof t.value=="object"&&Array.isArray(t.value)&&t.value.length===0&&t.required),o=S(()=>typeof t.value=="string"||typeof t.value=="number"||typeof t.value=="boolean"||t.value===null||t.value===void 0?[{name:t.name,value:t.value}]:typeof t.value=="object"&&Array.isArray(t.value)?t.value.flatMap((r,a)=>typeof r=="object"?Object.entries(r).map(([l,i])=>({name:`${t.name}[${a}][${l}]`,value:i})):{name:`${t.name}[${a}]`,value:r}):t.value!==null&&typeof t.value=="object"&&!Array.isArray(t.value)?Object.entries(t.value).map(([r,a])=>({name:`${t.name}[${r}]`,value:a})):[]);return(r,a)=>(_(),k(Q,null,[L(" We render single input if it's required "),s.value?(_(),H(In,ee({key:r.name},{...t,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(_(!0),k(Q,{key:1},ie(o.value,l=>(_(),H(In,ee({key:l.name},{ref_for:!0},{...t,...r.$attrs},{name:l.name,value:l.value}),null,16,["name","value"]))),128))],2112))}}),$r=Cr;const[hs,Sr]=je("PopperRoot");var Ar=R({inheritAttrs:!1,__name:"PopperRoot",setup(e){const t=E();return Sr({anchor:t,onAnchorChange:s=>t.value=s}),(s,o)=>V(s.$slots,"default")}}),Mr=Ar,Er=R({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e,{forwardRef:s,currentElement:o}=se(),r=hs();return as(()=>{r.onAnchorChange(t.reference??o.value)}),(a,l)=>(_(),H(p(ve),{ref:p(s),as:a.as,"as-child":a.asChild},{default:A(()=>[V(a.$slots,"default")]),_:3},8,["as","as-child"]))}}),Tr=Er;function Br(e){return e!==null}function Lr(e){return{name:"transformOrigin",options:e,fn(t){const{placement:s,rects:o,middlewareData:r}=t,l=r.arrow?.centerOffset!==0,i=l?0:e.arrowWidth,u=l?0:e.arrowHeight,[d,c]=pn(s),v={start:"0%",center:"50%",end:"100%"}[c],f=(r.arrow?.x??0)+i/2,g=(r.arrow?.y??0)+u/2;let b="",x="";return d==="bottom"?(b=l?v:`${f}px`,x=`${-u}px`):d==="top"?(b=l?v:`${f}px`,x=`${o.floating.height+u}px`):d==="right"?(b=`${-u}px`,x=l?v:`${g}px`):d==="left"&&(b=`${o.floating.width+u}px`,x=l?v:`${g}px`),{data:{x:b,y:x}}}}}function pn(e){const[t,s="center"]=e.split("-");return[t,s]}const Or=["top","right","bottom","left"],We=Math.min,me=Math.max,zt=Math.round,St=Math.floor,Me=e=>({x:e,y:e}),Ir={left:"right",right:"left",bottom:"top",top:"bottom"},Pr={start:"end",end:"start"};function gn(e,t,s){return me(e,We(t,s))}function ze(e,t){return typeof e=="function"?e(t):e}function He(e){return e.split("-")[0]}function lt(e){return e.split("-")[1]}function xn(e){return e==="x"?"y":"x"}function wn(e){return e==="y"?"height":"width"}const Rr=new Set(["top","bottom"]);function Ae(e){return Rr.has(He(e))?"y":"x"}function _n(e){return xn(Ae(e))}function zr(e,t,s){s===void 0&&(s=!1);const o=lt(e),r=_n(e),a=wn(r);let l=r==="x"?o===(s?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(l=Ht(l)),[l,Ht(l)]}function Hr(e){const t=Ht(e);return[vn(e),t,vn(t)]}function vn(e){return e.replace(/start|end/g,t=>Pr[t])}const Pn=["left","right"],Rn=["right","left"],jr=["top","bottom"],Dr=["bottom","top"];function qr(e,t,s){switch(e){case"top":case"bottom":return s?t?Rn:Pn:t?Pn:Rn;case"left":case"right":return t?jr:Dr;default:return[]}}function Nr(e,t,s,o){const r=lt(e);let a=qr(He(e),s==="start",o);return r&&(a=a.map(l=>l+"-"+r),t&&(a=a.concat(a.map(vn)))),a}function Ht(e){return e.replace(/left|right|bottom|top/g,t=>Ir[t])}function Vr(e){return{top:0,right:0,bottom:0,left:0,...e}}function ys(e){return typeof e!="number"?Vr(e):{top:e,right:e,bottom:e,left:e}}function jt(e){const{x:t,y:s,width:o,height:r}=e;return{width:o,height:r,top:s,left:t,right:t+o,bottom:s+r,x:t,y:s}}function zn(e,t,s){let{reference:o,floating:r}=e;const a=Ae(t),l=_n(t),i=wn(l),u=He(t),d=a==="y",c=o.x+o.width/2-r.width/2,v=o.y+o.height/2-r.height/2,f=o[i]/2-r[i]/2;let g;switch(u){case"top":g={x:c,y:o.y-r.height};break;case"bottom":g={x:c,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:v};break;case"left":g={x:o.x-r.width,y:v};break;default:g={x:o.x,y:o.y}}switch(lt(t)){case"start":g[l]-=f*(s&&d?-1:1);break;case"end":g[l]+=f*(s&&d?-1:1);break}return g}const Fr=async(e,t,s)=>{const{placement:o="bottom",strategy:r="absolute",middleware:a=[],platform:l}=s,i=a.filter(Boolean),u=await(l.isRTL==null?void 0:l.isRTL(t));let d=await l.getElementRects({reference:e,floating:t,strategy:r}),{x:c,y:v}=zn(d,o,u),f=o,g={},b=0;for(let x=0;x<i.length;x++){const{name:h,fn:m}=i[x],{x:w,y,data:$,reset:C}=await m({x:c,y:v,initialPlacement:o,placement:f,strategy:r,middlewareData:g,rects:d,platform:l,elements:{reference:e,floating:t}});c=w??c,v=y??v,g={...g,[h]:{...g[h],...$}},C&&b<=50&&(b++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(d=C.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:r}):C.rects),{x:c,y:v}=zn(d,f,u)),x=-1)}return{x:c,y:v,placement:f,strategy:r,middlewareData:g}};async function pt(e,t){var s;t===void 0&&(t={});const{x:o,y:r,platform:a,rects:l,elements:i,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:c="viewport",elementContext:v="floating",altBoundary:f=!1,padding:g=0}=ze(t,e),b=ys(g),h=i[f?v==="floating"?"reference":"floating":v],m=jt(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(h)))==null||s?h:h.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(i.floating)),boundary:d,rootBoundary:c,strategy:u})),w=v==="floating"?{x:o,y:r,width:l.floating.width,height:l.floating.height}:l.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(i.floating)),$=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},C=jt(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:w,offsetParent:y,strategy:u}):w);return{top:(m.top-C.top+b.top)/$.y,bottom:(C.bottom-m.bottom+b.bottom)/$.y,left:(m.left-C.left+b.left)/$.x,right:(C.right-m.right+b.right)/$.x}}const Wr=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:o,placement:r,rects:a,platform:l,elements:i,middlewareData:u}=t,{element:d,padding:c=0}=ze(e,t)||{};if(d==null)return{};const v=ys(c),f={x:s,y:o},g=_n(r),b=wn(g),x=await l.getDimensions(d),h=g==="y",m=h?"top":"left",w=h?"bottom":"right",y=h?"clientHeight":"clientWidth",$=a.reference[b]+a.reference[g]-f[g]-a.floating[b],C=f[g]-a.reference[g],z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(d));let P=z?z[y]:0;(!P||!await(l.isElement==null?void 0:l.isElement(z)))&&(P=i.floating[y]||a.floating[b]);const T=$/2-C/2,O=P/2-x[b]/2-1,I=We(v[m],O),K=We(v[w],O),W=I,ne=P-x[b]-K,X=P/2-x[b]/2+T,re=gn(W,X,ne),te=!u.arrow&&lt(r)!=null&&X!==re&&a.reference[b]/2-(X<W?I:K)-x[b]/2<0,ae=te?X<W?X-W:X-ne:0;return{[g]:f[g]+ae,data:{[g]:re,centerOffset:X-re-ae,...te&&{alignmentOffset:ae}},reset:te}}}),Ur=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,o;const{placement:r,middlewareData:a,rects:l,initialPlacement:i,platform:u,elements:d}=t,{mainAxis:c=!0,crossAxis:v=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,...h}=ze(e,t);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const m=He(r),w=Ae(i),y=He(i)===i,$=await(u.isRTL==null?void 0:u.isRTL(d.floating)),C=f||(y||!x?[Ht(i)]:Hr(i)),z=b!=="none";!f&&z&&C.push(...Nr(i,x,b,$));const P=[i,...C],T=await pt(t,h),O=[];let I=((o=a.flip)==null?void 0:o.overflows)||[];if(c&&O.push(T[m]),v){const X=zr(r,l,$);O.push(T[X[0]],T[X[1]])}if(I=[...I,{placement:r,overflows:O}],!O.every(X=>X<=0)){var K,W;const X=(((K=a.flip)==null?void 0:K.index)||0)+1,re=P[X];if(re&&(!(v==="alignment"?w!==Ae(re):!1)||I.every(N=>Ae(N.placement)===w?N.overflows[0]>0:!0)))return{data:{index:X,overflows:I},reset:{placement:re}};let te=(W=I.filter(ae=>ae.overflows[0]<=0).sort((ae,N)=>ae.overflows[1]-N.overflows[1])[0])==null?void 0:W.placement;if(!te)switch(g){case"bestFit":{var ne;const ae=(ne=I.filter(N=>{if(z){const Y=Ae(N.placement);return Y===w||Y==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(Y=>Y>0).reduce((Y,U)=>Y+U,0)]).sort((N,Y)=>N[1]-Y[1])[0])==null?void 0:ne[0];ae&&(te=ae);break}case"initialPlacement":te=i;break}if(r!==te)return{reset:{placement:te}}}return{}}}};function Hn(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jn(e){return Or.some(t=>e[t]>=0)}const Gr=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:o="referenceHidden",...r}=ze(e,t);switch(o){case"referenceHidden":{const a=await pt(t,{...r,elementContext:"reference"}),l=Hn(a,s.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:jn(l)}}}case"escaped":{const a=await pt(t,{...r,altBoundary:!0}),l=Hn(a,s.floating);return{data:{escapedOffsets:l,escaped:jn(l)}}}default:return{}}}}},bs=new Set(["left","top"]);async function Kr(e,t){const{placement:s,platform:o,elements:r}=e,a=await(o.isRTL==null?void 0:o.isRTL(r.floating)),l=He(s),i=lt(s),u=Ae(s)==="y",d=bs.has(l)?-1:1,c=a&&u?-1:1,v=ze(t,e);let{mainAxis:f,crossAxis:g,alignmentAxis:b}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return i&&typeof b=="number"&&(g=i==="end"?b*-1:b),u?{x:g*c,y:f*d}:{x:f*d,y:g*c}}const Yr=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,o;const{x:r,y:a,placement:l,middlewareData:i}=t,u=await Kr(t,e);return l===((s=i.offset)==null?void 0:s.placement)&&(o=i.arrow)!=null&&o.alignmentOffset?{}:{x:r+u.x,y:a+u.y,data:{...u,placement:l}}}}},Xr=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:o,placement:r}=t,{mainAxis:a=!0,crossAxis:l=!1,limiter:i={fn:h=>{let{x:m,y:w}=h;return{x:m,y:w}}},...u}=ze(e,t),d={x:s,y:o},c=await pt(t,u),v=Ae(He(r)),f=xn(v);let g=d[f],b=d[v];if(a){const h=f==="y"?"top":"left",m=f==="y"?"bottom":"right",w=g+c[h],y=g-c[m];g=gn(w,g,y)}if(l){const h=v==="y"?"top":"left",m=v==="y"?"bottom":"right",w=b+c[h],y=b-c[m];b=gn(w,b,y)}const x=i.fn({...t,[f]:g,[v]:b});return{...x,data:{x:x.x-s,y:x.y-o,enabled:{[f]:a,[v]:l}}}}}},Jr=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:o,placement:r,rects:a,middlewareData:l}=t,{offset:i=0,mainAxis:u=!0,crossAxis:d=!0}=ze(e,t),c={x:s,y:o},v=Ae(r),f=xn(v);let g=c[f],b=c[v];const x=ze(i,t),h=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const y=f==="y"?"height":"width",$=a.reference[f]-a.floating[y]+h.mainAxis,C=a.reference[f]+a.reference[y]-h.mainAxis;g<$?g=$:g>C&&(g=C)}if(d){var m,w;const y=f==="y"?"width":"height",$=bs.has(He(r)),C=a.reference[v]-a.floating[y]+($&&((m=l.offset)==null?void 0:m[v])||0)+($?0:h.crossAxis),z=a.reference[v]+a.reference[y]+($?0:((w=l.offset)==null?void 0:w[v])||0)-($?h.crossAxis:0);b<C?b=C:b>z&&(b=z)}return{[f]:g,[v]:b}}}},Qr=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,o;const{placement:r,rects:a,platform:l,elements:i}=t,{apply:u=()=>{},...d}=ze(e,t),c=await pt(t,d),v=He(r),f=lt(r),g=Ae(r)==="y",{width:b,height:x}=a.floating;let h,m;v==="top"||v==="bottom"?(h=v,m=f===(await(l.isRTL==null?void 0:l.isRTL(i.floating))?"start":"end")?"left":"right"):(m=v,h=f==="end"?"top":"bottom");const w=x-c.top-c.bottom,y=b-c.left-c.right,$=We(x-c[h],w),C=We(b-c[m],y),z=!t.middlewareData.shift;let P=$,T=C;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(T=y),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(P=w),z&&!f){const I=me(c.left,0),K=me(c.right,0),W=me(c.top,0),ne=me(c.bottom,0);g?T=b-2*(I!==0||K!==0?I+K:me(c.left,c.right)):P=x-2*(W!==0||ne!==0?W+ne:me(c.top,c.bottom))}await u({...t,availableWidth:T,availableHeight:P});const O=await l.getDimensions(i.floating);return b!==O.width||x!==O.height?{reset:{rects:!0}}:{}}}};function Gt(){return typeof window<"u"}function Ze(e){return kn(e)?(e.nodeName||"").toLowerCase():"#document"}function xe(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Le(e){var t;return(t=(kn(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function kn(e){return Gt()?e instanceof Node||e instanceof xe(e).Node:!1}function ke(e){return Gt()?e instanceof Element||e instanceof xe(e).Element:!1}function Be(e){return Gt()?e instanceof HTMLElement||e instanceof xe(e).HTMLElement:!1}function Dn(e){return!Gt()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof xe(e).ShadowRoot}const Zr=new Set(["inline","contents"]);function bt(e){const{overflow:t,overflowX:s,overflowY:o,display:r}=Ce(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+s)&&!Zr.has(r)}const ea=new Set(["table","td","th"]);function ta(e){return ea.has(Ze(e))}const na=[":popover-open",":modal"];function Kt(e){return na.some(t=>{try{return e.matches(t)}catch{return!1}})}const sa=["transform","translate","scale","rotate","perspective"],oa=["transform","translate","scale","rotate","perspective","filter"],ra=["paint","layout","strict","content"];function Cn(e){const t=$n(),s=ke(e)?Ce(e):e;return sa.some(o=>s[o]?s[o]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||oa.some(o=>(s.willChange||"").includes(o))||ra.some(o=>(s.contain||"").includes(o))}function aa(e){let t=Ue(e);for(;Be(t)&&!at(t);){if(Cn(t))return t;if(Kt(t))return null;t=Ue(t)}return null}function $n(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const la=new Set(["html","body","#document"]);function at(e){return la.has(Ze(e))}function Ce(e){return xe(e).getComputedStyle(e)}function Yt(e){return ke(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ue(e){if(Ze(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Dn(e)&&e.host||Le(e);return Dn(t)?t.host:t}function xs(e){const t=Ue(e);return at(t)?e.ownerDocument?e.ownerDocument.body:e.body:Be(t)&&bt(t)?t:xs(t)}function gt(e,t,s){var o;t===void 0&&(t=[]),s===void 0&&(s=!0);const r=xs(e),a=r===((o=e.ownerDocument)==null?void 0:o.body),l=xe(r);if(a){const i=mn(l);return t.concat(l,l.visualViewport||[],bt(r)?r:[],i&&s?gt(i):[])}return t.concat(r,gt(r,[],s))}function mn(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ws(e){const t=Ce(e);let s=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=Be(e),a=r?e.offsetWidth:s,l=r?e.offsetHeight:o,i=zt(s)!==a||zt(o)!==l;return i&&(s=a,o=l),{width:s,height:o,$:i}}function Sn(e){return ke(e)?e:e.contextElement}function ot(e){const t=Sn(e);if(!Be(t))return Me(1);const s=t.getBoundingClientRect(),{width:o,height:r,$:a}=ws(t);let l=(a?zt(s.width):s.width)/o,i=(a?zt(s.height):s.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!i||!Number.isFinite(i))&&(i=1),{x:l,y:i}}const ia=Me(0);function _s(e){const t=xe(e);return!$n()||!t.visualViewport?ia:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ca(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==xe(e)?!1:t}function Je(e,t,s,o){t===void 0&&(t=!1),s===void 0&&(s=!1);const r=e.getBoundingClientRect(),a=Sn(e);let l=Me(1);t&&(o?ke(o)&&(l=ot(o)):l=ot(e));const i=ca(a,s,o)?_s(a):Me(0);let u=(r.left+i.x)/l.x,d=(r.top+i.y)/l.y,c=r.width/l.x,v=r.height/l.y;if(a){const f=xe(a),g=o&&ke(o)?xe(o):o;let b=f,x=mn(b);for(;x&&o&&g!==b;){const h=ot(x),m=x.getBoundingClientRect(),w=Ce(x),y=m.left+(x.clientLeft+parseFloat(w.paddingLeft))*h.x,$=m.top+(x.clientTop+parseFloat(w.paddingTop))*h.y;u*=h.x,d*=h.y,c*=h.x,v*=h.y,u+=y,d+=$,b=xe(x),x=mn(b)}}return jt({width:c,height:v,x:u,y:d})}function Xt(e,t){const s=Yt(e).scrollLeft;return t?t.left+s:Je(Le(e)).left+s}function ks(e,t){const s=e.getBoundingClientRect(),o=s.left+t.scrollLeft-Xt(e,s),r=s.top+t.scrollTop;return{x:o,y:r}}function da(e){let{elements:t,rect:s,offsetParent:o,strategy:r}=e;const a=r==="fixed",l=Le(o),i=t?Kt(t.floating):!1;if(o===l||i&&a)return s;let u={scrollLeft:0,scrollTop:0},d=Me(1);const c=Me(0),v=Be(o);if((v||!v&&!a)&&((Ze(o)!=="body"||bt(l))&&(u=Yt(o)),Be(o))){const g=Je(o);d=ot(o),c.x=g.x+o.clientLeft,c.y=g.y+o.clientTop}const f=l&&!v&&!a?ks(l,u):Me(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-u.scrollLeft*d.x+c.x+f.x,y:s.y*d.y-u.scrollTop*d.y+c.y+f.y}}function ua(e){return Array.from(e.getClientRects())}function fa(e){const t=Le(e),s=Yt(e),o=e.ownerDocument.body,r=me(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),a=me(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let l=-s.scrollLeft+Xt(e);const i=-s.scrollTop;return Ce(o).direction==="rtl"&&(l+=me(t.clientWidth,o.clientWidth)-r),{width:r,height:a,x:l,y:i}}const qn=25;function pa(e,t){const s=xe(e),o=Le(e),r=s.visualViewport;let a=o.clientWidth,l=o.clientHeight,i=0,u=0;if(r){a=r.width,l=r.height;const c=$n();(!c||c&&t==="fixed")&&(i=r.offsetLeft,u=r.offsetTop)}const d=Xt(o);if(d<=0){const c=o.ownerDocument,v=c.body,f=getComputedStyle(v),g=c.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,b=Math.abs(o.clientWidth-v.clientWidth-g);b<=qn&&(a-=b)}else d<=qn&&(a+=d);return{width:a,height:l,x:i,y:u}}const ga=new Set(["absolute","fixed"]);function va(e,t){const s=Je(e,!0,t==="fixed"),o=s.top+e.clientTop,r=s.left+e.clientLeft,a=Be(e)?ot(e):Me(1),l=e.clientWidth*a.x,i=e.clientHeight*a.y,u=r*a.x,d=o*a.y;return{width:l,height:i,x:u,y:d}}function Nn(e,t,s){let o;if(t==="viewport")o=pa(e,s);else if(t==="document")o=fa(Le(e));else if(ke(t))o=va(t,s);else{const r=_s(e);o={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return jt(o)}function Cs(e,t){const s=Ue(e);return s===t||!ke(s)||at(s)?!1:Ce(s).position==="fixed"||Cs(s,t)}function ma(e,t){const s=t.get(e);if(s)return s;let o=gt(e,[],!1).filter(i=>ke(i)&&Ze(i)!=="body"),r=null;const a=Ce(e).position==="fixed";let l=a?Ue(e):e;for(;ke(l)&&!at(l);){const i=Ce(l),u=Cn(l);!u&&i.position==="fixed"&&(r=null),(a?!u&&!r:!u&&i.position==="static"&&!!r&&ga.has(r.position)||bt(l)&&!u&&Cs(e,l))?o=o.filter(c=>c!==l):r=i,l=Ue(l)}return t.set(e,o),o}function ha(e){let{element:t,boundary:s,rootBoundary:o,strategy:r}=e;const l=[...s==="clippingAncestors"?Kt(t)?[]:ma(t,this._c):[].concat(s),o],i=l[0],u=l.reduce((d,c)=>{const v=Nn(t,c,r);return d.top=me(v.top,d.top),d.right=We(v.right,d.right),d.bottom=We(v.bottom,d.bottom),d.left=me(v.left,d.left),d},Nn(t,i,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function ya(e){const{width:t,height:s}=ws(e);return{width:t,height:s}}function ba(e,t,s){const o=Be(t),r=Le(t),a=s==="fixed",l=Je(e,!0,a,t);let i={scrollLeft:0,scrollTop:0};const u=Me(0);function d(){u.x=Xt(r)}if(o||!o&&!a)if((Ze(t)!=="body"||bt(r))&&(i=Yt(t)),o){const g=Je(t,!0,a,t);u.x=g.x+t.clientLeft,u.y=g.y+t.clientTop}else r&&d();a&&!o&&r&&d();const c=r&&!o&&!a?ks(r,i):Me(0),v=l.left+i.scrollLeft-u.x-c.x,f=l.top+i.scrollTop-u.y-c.y;return{x:v,y:f,width:l.width,height:l.height}}function an(e){return Ce(e).position==="static"}function Vn(e,t){if(!Be(e)||Ce(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return Le(e)===s&&(s=s.ownerDocument.body),s}function $s(e,t){const s=xe(e);if(Kt(e))return s;if(!Be(e)){let r=Ue(e);for(;r&&!at(r);){if(ke(r)&&!an(r))return r;r=Ue(r)}return s}let o=Vn(e,t);for(;o&&ta(o)&&an(o);)o=Vn(o,t);return o&&at(o)&&an(o)&&!Cn(o)?s:o||aa(e)||s}const xa=async function(e){const t=this.getOffsetParent||$s,s=this.getDimensions,o=await s(e.floating);return{reference:ba(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function wa(e){return Ce(e).direction==="rtl"}const _a={convertOffsetParentRelativeRectToViewportRelativeRect:da,getDocumentElement:Le,getClippingRect:ha,getOffsetParent:$s,getElementRects:xa,getClientRects:ua,getDimensions:ya,getScale:ot,isElement:ke,isRTL:wa};function Ss(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ka(e,t){let s=null,o;const r=Le(e);function a(){var i;clearTimeout(o),(i=s)==null||i.disconnect(),s=null}function l(i,u){i===void 0&&(i=!1),u===void 0&&(u=1),a();const d=e.getBoundingClientRect(),{left:c,top:v,width:f,height:g}=d;if(i||t(),!f||!g)return;const b=St(v),x=St(r.clientWidth-(c+f)),h=St(r.clientHeight-(v+g)),m=St(c),y={rootMargin:-b+"px "+-x+"px "+-h+"px "+-m+"px",threshold:me(0,We(1,u))||1};let $=!0;function C(z){const P=z[0].intersectionRatio;if(P!==u){if(!$)return l();P?l(!1,P):o=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!Ss(d,e.getBoundingClientRect())&&l(),$=!1}try{s=new IntersectionObserver(C,{...y,root:r.ownerDocument})}catch{s=new IntersectionObserver(C,y)}s.observe(e)}return l(!0),a}function Ca(e,t,s,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:u=!1}=o,d=Sn(e),c=r||a?[...d?gt(d):[],...gt(t)]:[];c.forEach(m=>{r&&m.addEventListener("scroll",s,{passive:!0}),a&&m.addEventListener("resize",s)});const v=d&&i?ka(d,s):null;let f=-1,g=null;l&&(g=new ResizeObserver(m=>{let[w]=m;w&&w.target===d&&g&&(g.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=g)==null||y.observe(t)})),s()}),d&&!u&&g.observe(d),g.observe(t));let b,x=u?Je(e):null;u&&h();function h(){const m=Je(e);x&&!Ss(x,m)&&s(),x=m,b=requestAnimationFrame(h)}return s(),()=>{var m;c.forEach(w=>{r&&w.removeEventListener("scroll",s),a&&w.removeEventListener("resize",s)}),v?.(),(m=g)==null||m.disconnect(),g=null,u&&cancelAnimationFrame(b)}}const $a=Yr,Sa=Xr,Fn=Ur,Aa=Qr,Ma=Gr,Ea=Wr,Ta=Jr,Ba=(e,t,s)=>{const o=new Map,r={platform:_a,...s},a={...r.platform,_c:o};return Fr(e,t,{...r,platform:a})};function La(e){return e!=null&&typeof e=="object"&&"$el"in e}function hn(e){if(La(e)){const t=e.$el;return kn(t)&&Ze(t)==="#comment"?null:t}return e}function st(e){return typeof e=="function"?e():p(e)}function Oa(e){return{name:"arrow",options:e,fn(t){const s=hn(st(e.element));return s==null?{}:Ea({element:s,padding:e.padding}).fn(t)}}}function As(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Wn(e,t){const s=As(e);return Math.round(t*s)/s}function Ia(e,t,s){s===void 0&&(s={});const o=s.whileElementsMounted,r=S(()=>{var P;return(P=st(s.open))!=null?P:!0}),a=S(()=>st(s.middleware)),l=S(()=>{var P;return(P=st(s.placement))!=null?P:"bottom"}),i=S(()=>{var P;return(P=st(s.strategy))!=null?P:"absolute"}),u=S(()=>{var P;return(P=st(s.transform))!=null?P:!0}),d=S(()=>hn(e.value)),c=S(()=>hn(t.value)),v=E(0),f=E(0),g=E(i.value),b=E(l.value),x=Dt({}),h=E(!1),m=S(()=>{const P={position:g.value,left:"0",top:"0"};if(!c.value)return P;const T=Wn(c.value,v.value),O=Wn(c.value,f.value);return u.value?{...P,transform:"translate("+T+"px, "+O+"px)",...As(c.value)>=1.5&&{willChange:"transform"}}:{position:g.value,left:T+"px",top:O+"px"}});let w;function y(){if(d.value==null||c.value==null)return;const P=r.value;Ba(d.value,c.value,{middleware:a.value,placement:l.value,strategy:i.value}).then(T=>{v.value=T.x,f.value=T.y,g.value=T.strategy,b.value=T.placement,x.value=T.middlewareData,h.value=P!==!1})}function $(){typeof w=="function"&&(w(),w=void 0)}function C(){if($(),o===void 0){y();return}if(d.value!=null&&c.value!=null){w=o(d.value,c.value,y);return}}function z(){r.value||(h.value=!1)}return J([a,l,i,r],y,{flush:"sync"}),J([d,c],C,{flush:"sync"}),J(r,z,{flush:"sync"}),ss()&&os($),{x:nt(v),y:nt(f),strategy:nt(g),placement:nt(b),middlewareData:nt(x),isPositioned:nt(h),floatingStyles:m,update:y}}const Pa={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[eg,Ra]=je("PopperContent");var za=R({inheritAttrs:!1,__name:"PopperContent",props:Mo({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...Pa}),emits:["placed"],setup(e,{emit:t}){const s=e,o=t,r=hs(),{forwardRef:a,currentElement:l}=se(),i=E(),u=E(),{width:d,height:c}=ur(u),v=S(()=>s.side+(s.align!=="center"?`-${s.align}`:"")),f=S(()=>typeof s.collisionPadding=="number"?s.collisionPadding:{top:0,right:0,bottom:0,left:0,...s.collisionPadding}),g=S(()=>Array.isArray(s.collisionBoundary)?s.collisionBoundary:[s.collisionBoundary]),b=S(()=>({padding:f.value,boundary:g.value.filter(Br),altBoundary:g.value.length>0})),x=S(()=>({mainAxis:s.sideFlip,crossAxis:s.alignFlip})),h=jo(()=>[$a({mainAxis:s.sideOffset+c.value,alignmentAxis:s.alignOffset}),s.prioritizePosition&&s.avoidCollisions&&Fn({...b.value,...x.value}),s.avoidCollisions&&Sa({mainAxis:!0,crossAxis:!!s.prioritizePosition,limiter:s.sticky==="partial"?Ta():void 0,...b.value}),!s.prioritizePosition&&s.avoidCollisions&&Fn({...b.value,...x.value}),Aa({...b.value,apply:({elements:W,rects:ne,availableWidth:X,availableHeight:re})=>{const{width:te,height:ae}=ne.reference,N=W.floating.style;N.setProperty("--reka-popper-available-width",`${X}px`),N.setProperty("--reka-popper-available-height",`${re}px`),N.setProperty("--reka-popper-anchor-width",`${te}px`),N.setProperty("--reka-popper-anchor-height",`${ae}px`)}}),u.value&&Oa({element:u.value,padding:s.arrowPadding}),Lr({arrowWidth:d.value,arrowHeight:c.value}),s.hideWhenDetached&&Ma({strategy:"referenceHidden",...b.value})]),m=S(()=>s.reference??r.anchor.value),{floatingStyles:w,placement:y,isPositioned:$,middlewareData:C}=Ia(m,i,{strategy:s.positionStrategy,placement:v,whileElementsMounted:(...W)=>Ca(...W,{layoutShift:!s.disableUpdateOnLayoutShift,animationFrame:s.updatePositionStrategy==="always"}),middleware:h}),z=S(()=>pn(y.value)[0]),P=S(()=>pn(y.value)[1]);as(()=>{$.value&&o("placed")});const T=S(()=>C.value.arrow?.centerOffset!==0),O=E("");Ee(()=>{l.value&&(O.value=window.getComputedStyle(l.value).zIndex)});const I=S(()=>C.value.arrow?.x??0),K=S(()=>C.value.arrow?.y??0);return Ra({placedSide:z,onArrowChange:W=>u.value=W,arrowX:I,arrowY:K,shouldHideArrow:T}),(W,ne)=>(_(),k("div",{ref_key:"floatingRef",ref:i,"data-reka-popper-content-wrapper":"",style:pe({...p(w),transform:p($)?p(w).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:O.value,"--reka-popper-transform-origin":[p(C).transformOrigin?.x,p(C).transformOrigin?.y].join(" "),...p(C).hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}})},[B(p(ve),ee({ref:p(a)},W.$attrs,{"as-child":s.asChild,as:W.as,"data-side":z.value,"data-align":P.value,style:{animation:p($)?void 0:"none"}}),{default:A(()=>[V(W.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4))}}),Ha=za;function ja(e){const t=is({nonce:E()});return S(()=>e?.value||t.nonce?.value)}const[_e,Da]=je("ScrollAreaRoot");var qa=R({__name:"ScrollAreaRoot",props:{type:{type:String,required:!1,default:"hover"},dir:{type:String,required:!1},scrollHideDelay:{type:Number,required:!1,default:600},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e,{expose:t}){const s=e,o=E(0),r=E(0),a=E(),l=E(),i=E(),u=E(),d=E(!1),c=E(!1),{type:v,dir:f,scrollHideDelay:g}=Ve(s),b=er(f);function x(){a.value?.scrollTo({top:0})}function h(){a.value?.scrollTo({top:0,left:0})}t({viewport:a,scrollTop:x,scrollTopLeft:h});const{forwardRef:m,currentElement:w}=se();return Da({type:v,dir:b,scrollHideDelay:g,scrollArea:w,viewport:a,onViewportChange:y=>{a.value=y||void 0},content:l,onContentChange:y=>{l.value=y},scrollbarX:i,scrollbarXEnabled:d,scrollbarY:u,scrollbarYEnabled:c,onScrollbarXChange:y=>{i.value=y||void 0},onScrollbarYChange:y=>{u.value=y||void 0},onScrollbarXEnabledChange:y=>{d.value=y},onScrollbarYEnabledChange:y=>{c.value=y},onCornerWidthChange:y=>{o.value=y},onCornerHeightChange:y=>{r.value=y}}),(y,$)=>(_(),H(p(ve),{ref:p(m),"as-child":s.asChild,as:y.as,dir:p(b),style:pe({position:"relative","--reka-scroll-area-corner-width":`${o.value}px`,"--reka-scroll-area-corner-height":`${r.value}px`})},{default:A(()=>[V(y.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),Na=qa,Va=R({__name:"ScrollAreaCornerImpl",setup(e){const t=_e(),s=E(0),o=E(0),r=S(()=>!!s.value&&!!o.value);function a(){const i=t.scrollbarX.value?.offsetHeight||0;t.onCornerHeightChange(i),o.value=i}function l(){const i=t.scrollbarY.value?.offsetWidth||0;t.onCornerWidthChange(i),s.value=i}return rt(t.scrollbarX.value,a),rt(t.scrollbarY.value,l),J(()=>t.scrollbarX.value,a),J(()=>t.scrollbarY.value,l),(i,u)=>r.value?(_(),H(p(ve),ee({key:0,style:{width:`${s.value}px`,height:`${o.value}px`,position:"absolute",right:p(t).dir.value==="ltr"?0:void 0,left:p(t).dir.value==="rtl"?0:void 0,bottom:0}},i.$parent?.$props),{default:A(()=>[V(i.$slots,"default")]),_:3},16,["style"])):L("v-if",!0)}}),Fa=Va,Wa=R({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e,{forwardRef:s}=se(),o=_e(),r=S(()=>!!o.scrollbarX.value&&!!o.scrollbarY.value),a=S(()=>o.type.value!=="scroll"&&r.value);return(l,i)=>a.value?(_(),H(Fa,ee({key:0},t,{ref:p(s)}),{default:A(()=>[V(l.$slots,"default")]),_:3},16)):L("v-if",!0)}}),Ua=Wa;function Ms(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(s-e[0])}}function Jt(e){const t=Es(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=(e.scrollbar.size-s)*t;return Math.max(o,18)}function Es(e,t){const s=e/t;return Number.isNaN(s)?0:s}function Ga(e,t=()=>{}){let s={left:e.scrollLeft,top:e.scrollTop},o=0;return(function r(){const a={left:e.scrollLeft,top:e.scrollTop},l=s.left!==a.left,i=s.top!==a.top;(l||i)&&t(),s=a,o=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(o)}function Un(e,t,s="ltr"){const o=Jt(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-r,l=t.content-t.viewport,i=a-o,u=s==="ltr"?[0,l]:[l*-1,0],d=Ho(e,u[0],u[1]);return Ms([0,l],[0,i])(d)}function At(e){return e?Number.parseInt(e,10):0}function Ka(e,t,s,o="ltr"){const r=Jt(s),a=r/2,l=t||a,i=r-l,u=s.scrollbar.paddingStart+l,d=s.scrollbar.size-s.scrollbar.paddingEnd-i,c=s.content-s.viewport,v=o==="ltr"?[0,c]:[c*-1,0];return Ms([u,d],v)(e)}function Gn(e,t){return e>0&&e<t}var Ya=R({__name:"ScrollAreaScrollbarX",setup(e){const t=_e(),s=Zt(),{forwardRef:o,currentElement:r}=se();ge(()=>{r.value&&t.onScrollbarXChange(r.value)});const a=S(()=>s.sizes.value);return(l,i)=>(_(),H(Bs,{ref:p(o),"is-horizontal":!0,"data-orientation":"horizontal",style:pe({bottom:0,left:p(t).dir.value==="rtl"?"var(--reka-scroll-area-corner-width)":0,right:p(t).dir.value==="ltr"?"var(--reka-scroll-area-corner-width)":0,"--reka-scroll-area-thumb-width":a.value?`${p(Jt)(a.value)}px`:void 0}),onOnDragScroll:i[0]||(i[0]=u=>p(s).onDragScroll(u.x))},{default:A(()=>[V(l.$slots,"default")]),_:3},8,["style"]))}}),Xa=Ya,Ja=R({__name:"ScrollAreaScrollbarY",setup(e){const t=_e(),s=Zt(),{forwardRef:o,currentElement:r}=se();ge(()=>{r.value&&t.onScrollbarYChange(r.value)});const a=S(()=>s.sizes.value);return(l,i)=>(_(),H(Bs,{ref:p(o),"is-horizontal":!1,"data-orientation":"vertical",style:pe({top:0,right:p(t).dir.value==="ltr"?0:void 0,left:p(t).dir.value==="rtl"?0:void 0,bottom:"var(--reka-scroll-area-corner-height)","--reka-scroll-area-thumb-height":a.value?`${p(Jt)(a.value)}px`:void 0}),onOnDragScroll:i[0]||(i[0]=u=>p(s).onDragScroll(u.y))},{default:A(()=>[V(l.$slots,"default")]),_:3},8,["style"]))}}),Qa=Ja,Za=R({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean,required:!1}},setup(e){const t=_e(),s=Qt(),{forwardRef:o}=se(),r=E(!1),a=cs(()=>{if(t.viewport.value){const l=t.viewport.value.offsetWidth<t.viewport.value.scrollWidth,i=t.viewport.value.offsetHeight<t.viewport.value.scrollHeight;r.value=s.isHorizontal.value?l:i}},10);return ge(()=>a()),rt(t.viewport,a),rt(t.content,a),(l,i)=>(_(),H(p(Ut),{present:l.forceMount||r.value},{default:A(()=>[B(An,ee(l.$attrs,{ref:p(o),"data-state":r.value?"visible":"hidden"}),{default:A(()=>[V(l.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Ts=Za,el=R({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean,required:!1}},setup(e){const t=_e(),{forwardRef:s}=se();let o;const r=E(!1);function a(){window.clearTimeout(o),r.value=!0}function l(){o=window.setTimeout(()=>{r.value=!1},t.scrollHideDelay.value)}return ge(()=>{const i=t.scrollArea.value;i&&(i.addEventListener("pointerenter",a),i.addEventListener("pointerleave",l))}),Ge(()=>{const i=t.scrollArea.value;i&&(window.clearTimeout(o),i.removeEventListener("pointerenter",a),i.removeEventListener("pointerleave",l))}),(i,u)=>(_(),H(p(Ut),{present:i.forceMount||r.value},{default:A(()=>[B(Ts,ee(i.$attrs,{ref:p(s),"data-state":r.value?"visible":"hidden"}),{default:A(()=>[V(i.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),tl=el,nl=R({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean,required:!1}},setup(e){const t=_e(),s=Qt(),{forwardRef:o}=se(),{state:r,dispatch:a}=gs("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}}),l=S(()=>r.value!=="hidden");Ee(u=>{if(r.value==="idle"){const d=window.setTimeout(()=>a("HIDE"),t.scrollHideDelay.value);u(()=>{window.clearTimeout(d)})}});const i=cs(()=>a("SCROLL_END"),100);return Ee(u=>{const d=t.viewport.value,c=s.isHorizontal.value?"scrollLeft":"scrollTop";if(d){let v=d[c];const f=()=>{const g=d[c];v!==g&&(a("SCROLL"),i()),v=g};d.addEventListener("scroll",f),u(()=>{d.removeEventListener("scroll",f)})}}),(u,d)=>(_(),H(p(Ut),{present:u.forceMount||l.value},{default:A(()=>[B(An,ee(u.$attrs,{ref:p(o),"data-state":l.value?"visible":"hidden"}),{default:A(()=>[V(u.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),sl=nl;const[Qt,ol]=je("ScrollAreaScrollbar");var rl=R({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{type:String,required:!1,default:"vertical"},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(e){const t=e,{forwardRef:s}=se(),o=_e(),r=S(()=>t.orientation==="horizontal");J(r,()=>{r.value?o.onScrollbarXEnabledChange(!0):o.onScrollbarYEnabledChange(!0)},{immediate:!0}),Ge(()=>{o.onScrollbarXEnabledChange(!1),o.onScrollbarYEnabledChange(!1)});const{orientation:a,forceMount:l,asChild:i,as:u}=Ve(t);return ol({orientation:a,forceMount:l,isHorizontal:r,as:u,asChild:i}),(d,c)=>p(o).type.value==="hover"?(_(),H(tl,ee({key:0},d.$attrs,{ref:p(s),"force-mount":p(l)}),{default:A(()=>[V(d.$slots,"default")]),_:3},16,["force-mount"])):p(o).type.value==="scroll"?(_(),H(sl,ee({key:1},d.$attrs,{ref:p(s),"force-mount":p(l)}),{default:A(()=>[V(d.$slots,"default")]),_:3},16,["force-mount"])):p(o).type.value==="auto"?(_(),H(Ts,ee({key:2},d.$attrs,{ref:p(s),"force-mount":p(l)}),{default:A(()=>[V(d.$slots,"default")]),_:3},16,["force-mount"])):p(o).type.value==="always"?(_(),H(An,ee({key:3},d.$attrs,{ref:p(s),"data-state":"visible"}),{default:A(()=>[V(d.$slots,"default")]),_:3},16)):L("v-if",!0)}}),al=rl;const[Zt,ll]=je("ScrollAreaScrollbarVisible");var il=R({__name:"ScrollAreaScrollbarVisible",setup(e){const t=_e(),s=Qt(),{forwardRef:o}=se(),r=E({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),a=S(()=>{const m=Es(r.value.viewport,r.value.content);return m>0&&m<1}),l=E(),i=E(0);function u(m,w){if(g.value){const y=t.viewport.value.scrollLeft+m.deltaY;t.viewport.value.scrollLeft=y,Gn(y,w)&&m.preventDefault()}else{const y=t.viewport.value.scrollTop+m.deltaY;t.viewport.value.scrollTop=y,Gn(y,w)&&m.preventDefault()}}function d(m,w){g.value?i.value=w.x:i.value=w.y}function c(m){i.value=0}function v(m){r.value=m}function f(m,w){return Ka(m,i.value,r.value,w)}const g=S(()=>s.isHorizontal.value);function b(m){g.value?t.viewport.value.scrollLeft=f(m,t.dir.value):t.viewport.value.scrollTop=f(m)}function x(){if(g.value){if(t.viewport.value&&l.value){const m=t.viewport.value.scrollLeft,w=Un(m,r.value,t.dir.value);l.value.style.transform=`translate3d(${w}px, 0, 0)`}}else if(t.viewport.value&&l.value){const m=t.viewport.value.scrollTop,w=Un(m,r.value);l.value.style.transform=`translate3d(0, ${w}px, 0)`}}function h(m){l.value=m}return ll({sizes:r,hasThumb:a,handleWheelScroll:u,handleThumbDown:d,handleThumbUp:c,handleSizeChange:v,onThumbPositionChange:x,onThumbChange:h,onDragScroll:b}),(m,w)=>g.value?(_(),H(Xa,ee({key:0},m.$attrs,{ref:p(o)}),{default:A(()=>[V(m.$slots,"default")]),_:3},16)):(_(),H(Qa,ee({key:1},m.$attrs,{ref:p(o)}),{default:A(()=>[V(m.$slots,"default")]),_:3},16))}}),An=il,cl=R({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean,required:!0}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(e,{emit:t}){const s=e,o=t,r=_e(),a=Zt(),l=Qt(),{forwardRef:i,currentElement:u}=se(),d=E(""),c=E();function v(m){if(c.value){const w=m.clientX-c.value?.left,y=m.clientY-c.value?.top;o("onDragScroll",{x:w,y})}}function f(m){m.button===0&&(m.target.setPointerCapture(m.pointerId),c.value=u.value.getBoundingClientRect(),d.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",r.viewport&&(r.viewport.value.style.scrollBehavior="auto"),v(m))}function g(m){v(m)}function b(m){const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),document.body.style.webkitUserSelect=d.value,r.viewport&&(r.viewport.value.style.scrollBehavior=""),c.value=void 0}function x(m){const w=m.target,y=u.value?.contains(w),$=a.sizes.value.content-a.sizes.value.viewport;y&&a.handleWheelScroll(m,$)}ge(()=>{document.addEventListener("wheel",x,{passive:!1})}),Ge(()=>{document.removeEventListener("wheel",x)});function h(){u.value&&(s.isHorizontal?a.handleSizeChange({content:r.viewport.value?.scrollWidth??0,viewport:r.viewport.value?.offsetWidth??0,scrollbar:{size:u.value.clientWidth??0,paddingStart:At(getComputedStyle(u.value).paddingLeft),paddingEnd:At(getComputedStyle(u.value).paddingRight)}}):a.handleSizeChange({content:r.viewport.value?.scrollHeight??0,viewport:r.viewport.value?.offsetHeight??0,scrollbar:{size:u.value?.clientHeight??0,paddingStart:At(getComputedStyle(u.value).paddingLeft),paddingEnd:At(getComputedStyle(u.value).paddingRight)}}))}return rt(u,h),rt(r.content,h),(m,w)=>(_(),H(p(ve),{ref:p(i),style:{position:"absolute"},"data-scrollbarimpl":"",as:p(l).as.value,"as-child":p(l).asChild.value,onPointerdown:f,onPointermove:g,onPointerup:b},{default:A(()=>[V(m.$slots,"default")]),_:3},8,["as","as-child"]))}}),Bs=cl,dl=R({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e,s=_e(),o=Zt();function r(f){const b=f.target.getBoundingClientRect(),x=f.clientX-b.left,h=f.clientY-b.top;o.handleThumbDown(f,{x,y:h})}function a(f){o.handleThumbUp(f)}const{forwardRef:l,currentElement:i}=se(),u=E(),d=S(()=>s.viewport.value);function c(){if(!u.value){const f=Ga(d.value,o.onThumbPositionChange);u.value=f,o.onThumbPositionChange()}}const v=S(()=>o.sizes.value);return Yo(v,()=>{o.onThumbChange(i.value),d.value&&(o.onThumbPositionChange(),d.value.addEventListener("scroll",c))}),Ge(()=>{d.value.removeEventListener("scroll",c),s.viewport.value?.removeEventListener("scroll",c)}),(f,g)=>(_(),H(p(ve),{ref:p(l),"data-state":p(o).hasThumb?"visible":"hidden",style:{width:"var(--reka-scroll-area-thumb-width)",height:"var(--reka-scroll-area-thumb-height)"},"as-child":t.asChild,as:f.as,onPointerdown:r,onPointerup:a},{default:A(()=>[V(f.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),ul=dl,fl=R({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e,{expose:t}){const s=e,{nonce:o}=Ve(s),r=ja(o),a=_e(),l=E();ge(()=>{a.onViewportChange(l.value),a.onContentChange(u.value)}),t({viewportElement:l});const{forwardRef:i,currentElement:u}=se();return(d,c)=>(_(),k(Q,null,[n("div",ee({ref_key:"viewportElement",ref:l,"data-reka-scroll-area-viewport":"",style:{overflowX:p(a).scrollbarXEnabled.value?"scroll":"hidden",overflowY:p(a).scrollbarYEnabled.value?"scroll":"hidden"}},d.$attrs,{tabindex:0}),[B(p(ve),{ref:p(i),style:pe({minWidth:p(a).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":s.asChild,as:d.as},{default:A(()=>[V(d.$slots,"default")]),_:3},8,["style","as-child","as"])],16),B(p(ve),{as:"style",nonce:p(r)},{default:A(()=>c[0]||(c[0]=[Z(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-reka-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),pl=fl;const[gl,vl]=je("SwitchRoot");var ml=R({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=t,{disabled:r}=Ve(s),a=fs(s,"modelValue",o,{defaultValue:s.defaultValue,passive:s.modelValue===void 0});function l(){r.value||(a.value=!a.value)}const{forwardRef:i,currentElement:u}=se(),d=nr(u),c=S(()=>s.id&&u.value?document.querySelector(`[for="${s.id}"]`)?.innerText:void 0);return vl({modelValue:a,toggleCheck:l,disabled:r}),(v,f)=>(_(),H(p(ve),ee(v.$attrs,{id:v.id,ref:p(i),role:"switch",type:v.as==="button"?"button":void 0,value:v.value,"aria-label":v.$attrs["aria-label"]||c.value,"aria-checked":p(a),"aria-required":v.required,"data-state":p(a)?"checked":"unchecked","data-disabled":p(r)?"":void 0,"as-child":v.asChild,as:v.as,disabled:p(r),onClick:l,onKeydown:qt(we(l,["prevent"]),["enter"])}),{default:A(()=>[V(v.$slots,"default",{modelValue:p(a)}),p(d)&&v.name?(_(),H(p($r),{key:0,type:"checkbox",name:v.name,disabled:p(r),required:v.required,value:v.value,checked:!!p(a)},null,8,["name","disabled","required","value","checked"])):L("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),hl=ml,yl=R({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){const t=gl();return se(),(s,o)=>(_(),H(p(ve),{"data-state":p(t).modelValue?.value?"checked":"unchecked","data-disabled":p(t).disabled.value?"":void 0,"as-child":s.asChild,as:s.as},{default:A(()=>[V(s.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),bl=yl;const[Mn,xl]=je("TooltipProvider");var wl=R({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{type:Number,required:!1,default:700},skipDelayDuration:{type:Number,required:!1,default:300},disableHoverableContent:{type:Boolean,required:!1,default:!1},disableClosingTrigger:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:!1}},setup(e){const t=e,{delayDuration:s,skipDelayDuration:o,disableHoverableContent:r,disableClosingTrigger:a,ignoreNonKeyboardFocus:l,disabled:i}=Ve(t);se();const u=E(!0),d=E(!1),{start:c,stop:v}=ds(()=>{u.value=!0},o,{immediate:!1});return xl({isOpenDelayed:u,delayDuration:s,onOpen(){v(),u.value=!1},onClose(){c()},isPointerInTransitRef:d,disableHoverableContent:r,disableClosingTrigger:a,disabled:i,ignoreNonKeyboardFocus:l}),(f,g)=>V(f.$slots,"default")}}),_l=wl;const Ls="tooltip.open",[en,kl]=je("TooltipRoot");var Cl=R({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},delayDuration:{type:Number,required:!1,default:void 0},disableHoverableContent:{type:Boolean,required:!1,default:void 0},disableClosingTrigger:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(e,{emit:t}){const s=e,o=t;se();const r=Mn(),a=S(()=>s.disableHoverableContent??r.disableHoverableContent.value),l=S(()=>s.disableClosingTrigger??r.disableClosingTrigger.value),i=S(()=>s.disabled??r.disabled.value),u=S(()=>s.delayDuration??r.delayDuration.value),d=S(()=>s.ignoreNonKeyboardFocus??r.ignoreNonKeyboardFocus.value),c=fs(s,"open",o,{defaultValue:s.defaultOpen,passive:s.open===void 0});J(c,y=>{r.onClose&&(y?(r.onOpen(),document.dispatchEvent(new CustomEvent(Ls))):r.onClose())});const v=E(!1),f=E(),g=S(()=>c.value?v.value?"delayed-open":"instant-open":"closed"),{start:b,stop:x}=ds(()=>{v.value=!0,c.value=!0},u,{immediate:!1});function h(){x(),v.value=!1,c.value=!0}function m(){x(),c.value=!1}function w(){b()}return kl({contentId:"",open:c,stateAttribute:g,trigger:f,onTriggerChange(y){f.value=y},onTriggerEnter(){r.isOpenDelayed.value?w():h()},onTriggerLeave(){a.value?m():x()},onOpen:h,onClose:m,disableHoverableContent:a,disableClosingTrigger:l,disabled:i,ignoreNonKeyboardFocus:d}),(y,$)=>(_(),H(p(Mr),null,{default:A(()=>[V(y.$slots,"default",{open:p(c)})]),_:3}))}}),$l=Cl,Sl=R({__name:"TooltipContentImpl",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1,default:0},align:{type:null,required:!1,default:"center"},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},arrowPadding:{type:Number,required:!1,default:0},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:t}){const s=e,o=t,r=en(),{forwardRef:a}=se(),l=Eo(),i=S(()=>l.default?.({})),u=S(()=>{if(s.ariaLabel)return s.ariaLabel;let c="";function v(f){typeof f.children=="string"&&f.type!==To?c+=f.children:Array.isArray(f.children)&&f.children.forEach(g=>v(g))}return i.value?.forEach(f=>v(f)),c}),d=S(()=>{const{ariaLabel:c,...v}=s;return v});return ge(()=>{fn(window,"scroll",c=>{c.target?.contains(r.trigger.value)&&r.onClose()}),fn(window,Ls,r.onClose)}),(c,v)=>(_(),H(p(br),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:v[0]||(v[0]=f=>o("escapeKeyDown",f)),onPointerDownOutside:v[1]||(v[1]=f=>{p(r).disableClosingTrigger.value&&p(r).trigger.value?.contains(f.target)&&f.preventDefault(),o("pointerDownOutside",f)}),onFocusOutside:v[2]||(v[2]=we(()=>{},["prevent"])),onDismiss:v[3]||(v[3]=f=>p(r).onClose())},{default:A(()=>[B(p(Ha),ee({ref:p(a),"data-state":p(r).stateAttribute.value},{...c.$attrs,...d.value},{style:{"--reka-tooltip-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-tooltip-content-available-width":"var(--reka-popper-available-width)","--reka-tooltip-content-available-height":"var(--reka-popper-available-height)","--reka-tooltip-trigger-width":"var(--reka-popper-anchor-width)","--reka-tooltip-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:A(()=>[V(c.$slots,"default"),B(p(ms),{id:p(r).contentId,role:"tooltip"},{default:A(()=>[Z(M(u.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),Os=Sl,Al=R({__name:"TooltipContentHoverable",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},setup(e){const s=ps(e),{forwardRef:o,currentElement:r}=se(),{trigger:a,onClose:l}=en(),i=Mn(),{isPointerInTransit:u,onPointerExit:d}=sr(a,r);return i.isPointerInTransitRef=u,d(()=>{l()}),(c,v)=>(_(),H(Os,ee({ref:p(o)},p(s)),{default:A(()=>[V(c.$slots,"default")]),_:3},16))}}),Ml=Al,El=R({__name:"TooltipContent",props:{forceMount:{type:Boolean,required:!1},ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:t}){const s=e,o=t,r=en(),a=Wt(s,o),{forwardRef:l}=se();return(i,u)=>(_(),H(p(Ut),{present:i.forceMount||p(r).open.value},{default:A(()=>[(_(),H(yn(p(r).disableHoverableContent.value?Os:Ml),ee({ref:p(l)},p(a)),{default:A(()=>[V(i.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Tl=El,Bl=R({__name:"TooltipPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=e;return(s,o)=>(_(),H(p(wr),Nt(Vt(t)),{default:A(()=>[V(s.$slots,"default")]),_:3},16))}}),Ll=Bl,Ol=R({__name:"TooltipTrigger",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e,s=en(),o=Mn();s.contentId||=dr(void 0,"reka-tooltip-content");const{forwardRef:r,currentElement:a}=se(),l=E(!1),i=E(!1),u=S(()=>s.disabled.value?{}:{click:x,focus:g,pointermove:v,pointerleave:f,pointerdown:c,blur:b});ge(()=>{s.onTriggerChange(a.value)});function d(){setTimeout(()=>{l.value=!1},1)}function c(){s.open&&!s.disableClosingTrigger.value&&s.onClose(),l.value=!0,document.addEventListener("pointerup",d,{once:!0})}function v(h){h.pointerType!=="touch"&&!i.value&&!o.isPointerInTransitRef.value&&(s.onTriggerEnter(),i.value=!0)}function f(){s.onTriggerLeave(),i.value=!1}function g(h){l.value||s.ignoreNonKeyboardFocus.value&&!h.target.matches?.(":focus-visible")||s.onOpen()}function b(){s.onClose()}function x(){s.disableClosingTrigger.value||s.onClose()}return(h,m)=>(_(),H(p(Tr),{"as-child":"",reference:h.reference},{default:A(()=>[B(p(ve),ee({ref:p(r),"aria-describedby":p(s).open.value?p(s).contentId:void 0,"data-state":p(s).stateAttribute.value,as:h.as,"as-child":t.asChild,"data-grace-area-trigger":""},Bo(u.value)),{default:A(()=>[V(h.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3},8,["reference"]))}}),Il=Ol;function Pl(e){if(!he(e))return dn(e);const t=new Proxy({},{get(s,o,r){return p(Reflect.get(e.value,o,r))},set(s,o,r){return he(e.value[o])&&!he(r)?e.value[o].value=r:e.value[o]=r,!0},deleteProperty(s,o){return Reflect.deleteProperty(e.value,o)},has(s,o){return Reflect.has(e.value,o)},ownKeys(){return Object.keys(e.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return dn(t)}function Rl(e){return Pl(S(e))}function xt(e,...t){const s=t.flat(),o=s[0];return Rl(()=>Object.fromEntries(typeof o=="function"?Object.entries(Ve(e)).filter(([r,a])=>!o(ue(a),r)):Object.entries(Ve(e)).filter(r=>!s.includes(r[0]))))}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const zl=e=>typeof e<"u";function Hl(e){return JSON.parse(JSON.stringify(e))}function jl(e,t,s,o={}){var r,a,l;const{clone:i=!1,passive:u=!1,eventName:d,deep:c=!1,defaultValue:v,shouldEmit:f}=o,g=Qe(),b=s||g?.emit||((r=g?.$emit)==null?void 0:r.bind(g))||((l=(a=g?.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(g?.proxy));let x=d;x=x||`update:${t.toString()}`;const h=y=>i?typeof i=="function"?i(y):Hl(y):y,m=()=>zl(e[t])?h(e[t]):v,w=y=>{f?f(y)&&b(x,y):b(x,y)};if(u){const y=m(),$=E(y);let C=!1;return J(()=>e[t],z=>{C||(C=!0,$.value=h(z),Re(()=>C=!1))}),J($,z=>{!C&&(z!==e[t]||c)&&w(z)},{deep:c}),$}else return S({get(){return m()},set(y){w(y)}})}const Dl=R({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=jl(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(a,l)=>ye((_(),k("textarea",{"onUpdate:modelValue":l[0]||(l[0]=i=>he(r)?r.value=i:null),class:q(p(Te)("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s.class))},null,2)),[[vt,p(r)]])}}),ql={class:"min-h-screen relative flex items-center justify-center overflow-hidden"},Nl={class:"relative z-10 w-full max-w-5xl mx-auto px-6 py-20"},Vl={class:"relative group"},Fl={class:"relative bg-white/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-2xl shadow-gray-200/50 overflow-hidden"},Wl={class:"px-8 pt-8 pb-4"},Ul={class:"flex flex-wrap gap-2"},Gl=["onClick"],Kl={class:"p-8"},Yl={class:"relative"},Xl={class:"absolute bottom-4 left-4 flex items-center gap-4"},Jl={class:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/90 backdrop-blur-sm border border-gray-200/50 shadow-sm"},Ql={class:"text-xs font-medium text-gray-600"},Zl={key:0,class:"px-3 py-1.5 rounded-lg bg-white/90 backdrop-blur-sm border border-gray-200/50 shadow-sm"},ei={class:"flex items-center gap-2"},ti={class:"w-24 h-1 bg-gray-100 rounded-full overflow-hidden"},ni={class:"text-xs font-medium text-gray-600"},si={class:"px-8 pb-8"},oi={class:"flex items-center justify-between"},ri=["disabled"],ai=R({__name:"ArticleInput",emits:["submit"],setup(e,{emit:t}){const s=t,o=E(""),r=[{label:" AI ",content:"AI  AI  AI  AI  AI "},{label:" ",content:"AI "},{label:" ",content:""}],a=S(()=>o.value.length),l=S(()=>a.value>=50),i=d=>{o.value=d},u=()=>{l.value&&s("submit",o.value)};return(d,c)=>{const v=Dl;return _(),k("div",ql,[c[11]||(c[11]=n("div",{class:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px] opacity-50"},null,-1)),c[12]||(c[12]=n("div",{class:"absolute top-0 left-1/4 w-96 h-96 bg-emerald-500/20 rounded-full blur-[128px] animate-pulse"},null,-1)),c[13]||(c[13]=n("div",{class:"absolute bottom-0 right-1/4 w-96 h-96 bg-teal-500/20 rounded-full blur-[128px] animate-pulse",style:{"animation-delay":"1s"}},null,-1)),n("div",Nl,[c[9]||(c[9]=Xe('<div class="text-center mb-16 space-y-8" data-v-50140fe6><div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/80 backdrop-blur-sm border border-gray-200/50 shadow-sm animate-fade-in" data-v-50140fe6><div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse" data-v-50140fe6></div><span class="text-sm font-medium text-gray-700" data-v-50140fe6>AI-Powered Reading Assistant</span></div><div class="space-y-4" data-v-50140fe6><h1 class="text-6xl md:text-7xl font-bold tracking-tight" data-v-50140fe6><span class="bg-clip-text text-transparent bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900" data-v-50140fe6>  </span><br data-v-50140fe6><span class="bg-clip-text text-transparent bg-gradient-to-r from-emerald-600 via-teal-600 to-emerald-600" data-v-50140fe6>  </span></h1><p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed" data-v-50140fe6> AI  </p></div><div class="flex items-center justify-center gap-8 text-sm" data-v-50140fe6><div class="flex items-center gap-2" data-v-50140fe6><svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20" data-v-50140fe6><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" data-v-50140fe6></path></svg><span class="text-gray-600" data-v-50140fe6></span></div><div class="flex items-center gap-2" data-v-50140fe6><svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20" data-v-50140fe6><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" data-v-50140fe6></path></svg><span class="text-gray-600" data-v-50140fe6></span></div><div class="flex items-center gap-2" data-v-50140fe6><svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20" data-v-50140fe6><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" data-v-50140fe6></path></svg><span class="text-gray-600" data-v-50140fe6></span></div></div></div>',1)),n("div",Vl,[c[8]||(c[8]=n("div",{class:"absolute -inset-0.5 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl opacity-0 group-hover:opacity-20 blur transition duration-500"},null,-1)),n("div",Fl,[n("div",Wl,[c[2]||(c[2]=n("div",{class:"flex items-center gap-2 mb-4"},[n("span",{class:"text-sm font-medium text-gray-500"},""),n("div",{class:"flex-1 h-px bg-gradient-to-r from-gray-200 to-transparent"})],-1)),n("div",Ul,[(_(),k(Q,null,ie(r,f=>n("button",{key:f.label,onClick:g=>i(f.content),class:"group/btn inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-50 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 border border-gray-200/50 hover:border-emerald-200 transition-all text-sm font-medium text-gray-700 hover:text-emerald-700"},[n("span",null,M(f.label),1),c[1]||(c[1]=n("svg",{class:"w-4 h-4 opacity-0 group-hover/btn:opacity-100 -translate-x-2 group-hover/btn:translate-x-0 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,Gl)),64))])]),c[7]||(c[7]=n("div",{class:"px-8"},[n("div",{class:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"})],-1)),n("div",Kl,[n("div",Yl,[B(v,{modelValue:p(o),"onUpdate:modelValue":c[0]||(c[0]=f=>he(o)?o.value=f:null),placeholder:`...

`,class:"min-h-[320px] text-base leading-relaxed resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-gray-400 text-gray-700",onKeydown:qt(we(u,["ctrl"]),["enter"])},null,8,["modelValue","onKeydown"]),n("div",Xl,[n("div",Jl,[n("div",{class:q(["w-1.5 h-1.5 rounded-full transition-colors",p(l)?"bg-emerald-500 shadow-sm shadow-emerald-500/50":"bg-gray-300"])},null,2),n("span",Ql,M(p(a))+"  ",1)]),p(a)>0?(_(),k("div",Zl,[n("div",ei,[n("div",ti,[n("div",{class:"h-full bg-gradient-to-r from-emerald-500 to-teal-500 transition-all duration-300",style:pe({width:`${Math.min(p(a)/50*100,100)}%`})},null,4)]),n("span",ni,M(Math.min(Math.floor(p(a)/50*100),100))+"% ",1)])])):L("",!0)]),c[3]||(c[3]=n("div",{class:"absolute bottom-4 right-4 flex items-center gap-1.5 text-xs text-gray-400"},[n("kbd",{class:"px-2 py-1 bg-white/90 border border-gray-200/50 rounded shadow-sm font-medium text-gray-600"},""),n("span",null,"+"),n("kbd",{class:"px-2 py-1 bg-white/90 border border-gray-200/50 rounded shadow-sm font-medium text-gray-600"},"Enter")],-1))])]),n("div",si,[c[6]||(c[6]=n("div",{class:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent mb-6"},null,-1)),n("div",oi,[c[5]||(c[5]=n("div",{class:"flex items-center gap-2 text-sm text-gray-500"},[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),n("span",null,"")],-1)),n("button",{onClick:u,disabled:!p(l),class:"group relative inline-flex items-center gap-2 px-8 py-3.5 rounded-xl font-semibold text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 disabled:from-gray-300 disabled:to-gray-300 shadow-lg shadow-emerald-500/25 hover:shadow-xl hover:shadow-emerald-500/30 disabled:shadow-none transition-all duration-300 hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed"},[...c[4]||(c[4]=[n("span",null,"",-1),n("svg",{class:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1),n("div",{class:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"},null,-1)])],8,ri)])])])]),c[10]||(c[10]=Xe('<div class="mt-20 grid grid-cols-1 md:grid-cols-3 gap-6" data-v-50140fe6><div class="group relative p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-gray-200/50 hover:bg-white/80 hover:shadow-lg hover:shadow-gray-200/50 transition-all duration-300" data-v-50140fe6><div class="flex items-start gap-4" data-v-50140fe6><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform" data-v-50140fe6><svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-50140fe6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-50140fe6></path></svg></div><div data-v-50140fe6><h3 class="font-semibold text-gray-900 mb-2" data-v-50140fe6></h3><p class="text-sm text-gray-600 leading-relaxed" data-v-50140fe6>AI </p></div></div></div><div class="group relative p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-gray-200/50 hover:bg-white/80 hover:shadow-lg hover:shadow-gray-200/50 transition-all duration-300" data-v-50140fe6><div class="flex items-start gap-4" data-v-50140fe6><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform" data-v-50140fe6><svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-50140fe6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" data-v-50140fe6></path></svg></div><div data-v-50140fe6><h3 class="font-semibold text-gray-900 mb-2" data-v-50140fe6></h3><p class="text-sm text-gray-600 leading-relaxed" data-v-50140fe6></p></div></div></div><div class="group relative p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-gray-200/50 hover:bg-white/80 hover:shadow-lg hover:shadow-gray-200/50 transition-all duration-300" data-v-50140fe6><div class="flex items-start gap-4" data-v-50140fe6><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform" data-v-50140fe6><svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-50140fe6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" data-v-50140fe6></path></svg></div><div data-v-50140fe6><h3 class="font-semibold text-gray-900 mb-2" data-v-50140fe6></h3><p class="text-sm text-gray-600 leading-relaxed" data-v-50140fe6></p></div></div></div></div>',1))])])}}}),li=Object.assign($e(ai,[["__scopeId","data-v-50140fe6"]]),{__name:"ArticleInput"}),tn=()=>{const e=F("selected-text",()=>""),t=F("selection-context",()=>""),s=F("selection-position",()=>({x:0,y:0})),o=F("show-intent-buttons",()=>!1),r=F("selected-start",()=>null),a=F("selected-end",()=>null),l=S(()=>{const c=e.value.length;return c<5?"explain":c>50||/|||/.test(e.value)?"analyze":"explain"}),i=c=>{const{content:v}=Ne(),f=v.value;if(!f||!c)return null;const g=f.indexOf(c);return g===-1?(console.warn(" "),null):{start:g,end:g+c.length}};return{selectedText:e,context:t,position:s,showIntentButtons:o,suggestedIntent:l,selectedStart:r,selectedEnd:a,handleSelection:()=>{const c=window.getSelection(),v=c?.toString().trim();if(v&&v.length>0){e.value=v;const{content:f}=Ne();t.value=bo(f.value,v);const g=i(v);g&&(r.value=g.start,a.value=g.end,console.log(" :",g.start,"-",g.end));const x=c?.getRangeAt(0)?.getBoundingClientRect();x&&(s.value={x:x.left+x.width/2,y:x.bottom+10})}},clear:()=>{e.value="",t.value="",r.value=null,a.value=null,o.value=!1,window.getSelection()?.removeAllRanges()}}},Is=()=>{const e=f=>{f=f.replace(/\r\n/g,`
`).replace(/\r/g,`
`);const g=/([!?.]+[\s\n]|[\n])/g,b=f.split(g),x=[];let h="";for(let w=0;w<b.length;w++){const y=b[w];if(y)if(g.test(y)){if(h+=y,t(h,b[w+1])){const $=h.trim();$.length>0&&(x.push($),h="")}}else h+=y}const m=h.trim();return m.length>0&&x.push(m),x.filter(w=>w.length>0)},t=(f,g)=>{if(f.endsWith(`
`))return!0;const b=["Mr.","Mrs.","Ms.","Dr.","Prof.","Sr.","Jr.","etc.","vs.","e.g.","i.e.","U.S.","U.K.","Inc.","Ltd.","Co.","Corp."];for(const x of b)if(f.trim().endsWith(x)&&g&&/^[a-z]/.test(g.trim()))return!1;return!0},s=f=>{const g=f.split(/\n\n+/).filter(h=>h.trim().length>0),b=[];let x=0;return g.forEach((h,m)=>{const y=e(h).map($=>({index:x++,text:$,paragraphIndex:m}));b.push({index:m,sentences:y})}),b},o=f=>{const g=ft(f,{breaks:!0,gfm:!0}),b=document.createElement("div");b.innerHTML=g;const x=b.textContent||"",h=s(x);let m="";return h.forEach(w=>{m+=`<p data-paragraph-index="${w.index}" class="article-paragraph">`,w.sentences.forEach(y=>{m+=`<span id="sentence-${y.index}" data-sentence-index="${y.index}" class="article-sentence">${i(y.text)}</span>`}),m+="</p>"}),m},r=f=>{const g=s(f);let b="";return g.forEach(x=>{b+=`<p data-paragraph-index="${x.index}" class="article-paragraph">`,x.sentences.forEach(h=>{b+=`<span id="sentence-${h.index}" data-sentence-index="${h.index}" class="article-sentence">${i(h.text)}</span>`}),b+="</p>"}),b},a=f=>[/^#{1,6}\s/m,/\*\*.*\*\*/,/\*.*\*/,/\[.*\]\(.*\)/,/```[\s\S]*```/,/^[-*+]\s/m,/^\d+\.\s/m,/^>\s/m,/!\[.*\]\(.*\)/].some(b=>b.test(f)),l=f=>f?a(f)?(console.log("  Markdown  Markdown "),o(f)):(console.log(" "),r(f)):"",i=f=>{const g=document.createElement("div");return g.textContent=f,g.innerHTML};return{renderArticleWithSentenceIds:l,extractSentenceData:f=>{let g=f;if(a(f)){const b=ft(f,{breaks:!0,gfm:!0}),x=document.createElement("div");x.innerHTML=b,g=x.textContent||""}return s(g)},renderWithBackendSentences:f=>{if(!f||f.length===0)return"";console.log(`  ${f.length} `);let g="",b=[],x=0;const h=()=>{b.length>0&&(g+=`<p data-paragraph-index="${x}" class="article-paragraph">`,g+=b.join(""),g+="</p>",b=[],x++)};return f.forEach((m,w)=>{const y=`<span id="sentence-${w}" data-sentence-index="${w}" class="article-sentence">${i(m)} </span>`;b.push(y),(w+1)%10===0&&h()}),h(),g},splitIntoSentences:e,splitIntoParagraphs:s,getSentenceElement:f=>document.getElementById(`sentence-${f}`),cleanContent:f=>{const g=document.createElement("div");return g.innerHTML=f,g.querySelectorAll('[id^="sentence-"]').forEach(x=>{const h=x.textContent||"";x.replaceWith(document.createTextNode(h))}),g.textContent||""},isMarkdown:a,escapeHtml:i}},Pe={serif:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',sansSerif:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',songti:'"Songti SC", "SimSun", "", serif',heiti:'"Heiti SC", "SimHei", "", sans-serif',kaiti:'"Kaiti SC", "KaiTi", "", serif',cangErJinKai:'"TsangerJinKai03", "KaiTi", "", serif'},Ye={small:"16px",medium:"22px",large:"28px",xlarge:"36px"},Kn={small:"1.8",medium:"2.0",large:"2.1",xlarge:"2.0"},Yn="reading-settings",ii=()=>{const e={fontFamily:Pe.cangErJinKai,fontSize:Ye.medium,lineHeight:Kn.medium,singleSentencePerLine:!0},t=()=>{try{const f=localStorage.getItem(Yn);if(f)return{...e,...JSON.parse(f)}}catch(f){console.error(":",f)}return e},s=f=>{try{localStorage.setItem(Yn,JSON.stringify(f))}catch(g){console.error(":",g)}},o=F("reading-settings",()=>t()),r=f=>{o.value.fontFamily=Pe[f],s(o.value)},a=f=>{o.value.fontSize=Ye[f],o.value.lineHeight=Kn[f],s(o.value)},l=()=>{o.value={...e},s(o.value)},i=()=>[{key:"cangErJinKai",label:"",family:Pe.cangErJinKai},{key:"songti",label:"",family:Pe.songti},{key:"heiti",label:"",family:Pe.heiti},{key:"kaiti",label:"",family:Pe.kaiti},{key:"serif",label:"",family:Pe.serif},{key:"sansSerif",label:"",family:Pe.sansSerif}],u=()=>[{key:"small",label:"",size:Ye.small},{key:"medium",label:"",size:Ye.medium},{key:"large",label:"",size:Ye.large},{key:"xlarge",label:"",size:Ye.xlarge}],d=()=>{const f=Object.entries(Pe).find(([g,b])=>b===o.value.fontFamily);return f?f[0]:"cangErJinKai"},c=()=>{const f=Object.entries(Ye).find(([g,b])=>b===o.value.fontSize);return f?f[0]:"medium"},v=()=>{o.value={...o.value,singleSentencePerLine:!o.value.singleSentencePerLine},s(o.value)};return{settings:de(o),setFontFamily:r,setFontSize:a,resetSettings:l,getFontOptions:i,getFontSizeOptions:u,getCurrentFontKey:d,getCurrentSizeKey:c,toggleSingleSentencePerLine:v}},ci={class:"max-w-3xl mx-auto px-12 py-16"},di={key:0,class:"mb-16 animate-fade-in"},ui={class:"flex items-center justify-between"},fi={class:"flex items-center gap-6 text-sm text-gray-500"},pi={class:"flex items-center gap-2"},gi={class:"flex items-center gap-2"},vi={key:0,class:"mt-6 bg-white rounded-xl border border-gray-200 shadow-lg p-6"},mi={class:"space-y-5"},hi={class:"grid grid-cols-3 gap-2"},yi=["onClick"],bi={class:"grid grid-cols-4 gap-2"},xi=["onClick"],wi={class:"flex items-center justify-between cursor-pointer group"},_i={class:"relative"},ki=["checked"],Ci={class:"flex items-center justify-between pt-2"},$i={class:"max-w-none animate-fade-in",style:{"animation-delay":"0.1s"}},Si=["innerHTML"],Ai=R({__name:"ArticlePane",props:{content:{},title:{}},setup(e){const t=e,{handleSelection:s}=tn(),{renderArticleWithSentenceIds:o}=Is(),{settings:r,setFontFamily:a,setFontSize:l,resetSettings:i,getFontOptions:u,getFontSizeOptions:d,getCurrentFontKey:c,getCurrentSizeKey:v,toggleSingleSentencePerLine:f}=ii(),g=E(null),b=E(!1),x=u(),h=d(),m=S(()=>c()),w=S(()=>v()),y=S(()=>t.content?o(t.content):""),$=S(()=>t.content),C=S(()=>$.value.replace(/\s/g,"").length),z=()=>{setTimeout(()=>{s()},10)};return(P,T)=>(_(),k("div",ci,[e.title?(_(),k("div",di,[T[14]||(T[14]=n("div",{class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-50 border border-emerald-100 mb-6"},[n("div",{class:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),n("span",{class:"text-xs font-medium text-emerald-700"},"")],-1)),n("h1",{class:"text-5xl font-bold text-gray-900 leading-tight mb-6 tracking-tight",style:pe({fontFamily:p(r).fontFamily})},M(e.title),5),n("div",ui,[n("div",fi,[T[6]||(T[6]=Xe('<div class="flex items-center gap-2" data-v-94674f16><div class="w-8 h-8 rounded-full bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center" data-v-94674f16><svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-94674f16><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" data-v-94674f16></path></svg></div><span class="font-medium" data-v-94674f16></span></div><div class="flex items-center gap-2" data-v-94674f16><div class="w-px h-4 bg-gray-300" data-v-94674f16></div></div>',2)),n("div",pi,[T[4]||(T[4]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),n("span",null,M(p(C))+" ",1)]),n("div",gi,[T[5]||(T[5]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n("span",null," "+M(Math.ceil(p(C)/400))+" ",1)])]),n("button",{onClick:T[0]||(T[0]=O=>b.value=!p(b)),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 transition-colors group text-sm text-gray-600",title:""},[...T[7]||(T[7]=[n("svg",{class:"w-4 h-4 group-hover:text-emerald-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})],-1),n("span",{class:"group-hover:text-emerald-600 transition-colors"},"",-1)])])]),T[15]||(T[15]=n("div",{class:"mt-6 h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"},null,-1)),B(oe,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:A(()=>[p(b)?(_(),k("div",vi,[n("div",mi,[n("div",null,[T[8]||(T[8]=n("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"  ",-1)),n("div",hi,[(_(!0),k(Q,null,ie(p(x),O=>(_(),k("button",{key:O.key,onClick:I=>p(a)(O.key),class:q(["px-3 py-2 text-sm rounded-lg border-2 transition-all",p(m)===O.key?"border-emerald-500 bg-emerald-50 text-emerald-700 font-semibold":"border-gray-200 hover:border-gray-300 text-gray-700"]),style:pe({fontFamily:O.family})},M(O.label),15,yi))),128))])]),n("div",null,[T[9]||(T[9]=n("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"  ",-1)),n("div",bi,[(_(!0),k(Q,null,ie(p(h),O=>(_(),k("button",{key:O.key,onClick:I=>p(l)(O.key),class:q(["px-3 py-2 text-sm rounded-lg border-2 transition-all",p(w)===O.key?"border-emerald-500 bg-emerald-50 text-emerald-700 font-semibold":"border-gray-200 hover:border-gray-300 text-gray-700"])},M(O.label),11,xi))),128))])]),n("div",null,[n("label",wi,[T[12]||(T[12]=n("div",{class:"flex items-center gap-3"},[n("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})]),n("div",null,[n("span",{class:"text-sm font-medium text-gray-700"},""),n("p",{class:"text-xs text-gray-500"},"")])],-1)),n("div",_i,[n("input",{type:"checkbox",checked:p(r).singleSentencePerLine,onChange:T[1]||(T[1]=(...O)=>p(f)&&p(f)(...O)),class:"sr-only peer"},null,40,ki),T[10]||(T[10]=n("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-emerald-600 transition-colors"},null,-1)),T[11]||(T[11]=n("div",{class:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform peer-checked:translate-x-5"},null,-1))])])]),n("div",Ci,[n("button",{onClick:T[2]||(T[2]=(...O)=>p(i)&&p(i)(...O)),class:"text-sm text-gray-600 hover:text-gray-900 flex items-center gap-1"},[...T[13]||(T[13]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Z("  ",-1)])]),n("button",{onClick:T[3]||(T[3]=O=>b.value=!1),class:"px-4 py-2 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 transition-colors"},"  ")])])])):L("",!0)]),_:1})])):L("",!0),n("article",$i,[n("div",{id:"article-content-container",ref_key:"articleContentRef",ref:g,class:q(["article-content select-text",{"single-sentence-per-line":p(r).singleSentencePerLine}]),style:pe({fontFamily:p(r).fontFamily,fontSize:p(r).fontSize,lineHeight:p(r).lineHeight,textRendering:"optimizeLegibility",WebkitFontSmoothing:"antialiased"}),onMouseup:z,innerHTML:p(y)},null,46,Si)]),T[16]||(T[16]=Xe('<div class="mt-20 pt-8 animate-fade-in" style="animation-delay:0.2s;" data-v-94674f16><div class="relative group" data-v-94674f16><div class="absolute -inset-4 bg-gradient-to-r from-emerald-50 via-teal-50 to-emerald-50 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-xl" data-v-94674f16></div><div class="relative flex flex-col items-center gap-4 p-8 rounded-2xl bg-gradient-to-br from-white to-gray-50 border border-gray-100 shadow-sm" data-v-94674f16><div class="w-12 h-12 rounded-full bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center" data-v-94674f16><svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-94674f16><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-94674f16></path></svg></div><div class="text-center" data-v-94674f16><p class="text-sm font-semibold text-gray-900 mb-1" data-v-94674f16></p><p class="text-sm text-gray-600" data-v-94674f16> AI </p></div><div class="flex items-center gap-2 text-xs text-gray-500" data-v-94674f16><kbd class="px-2 py-1 bg-white border border-gray-200 rounded shadow-sm font-medium text-gray-600" data-v-94674f16>Shift</kbd><span data-v-94674f16>+</span><span data-v-94674f16></span></div></div></div></div>',1))]))}}),Mi=Object.assign($e(Ai,[["__scopeId","data-v-94674f16"]]),{__name:"ArticlePane"}),Ei={class:"mb-4 bg-white/80 backdrop-blur-md border border-gray-200/50 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all"},Ti={class:"flex items-center justify-between mb-3"},Bi={class:"flex items-center gap-2"},Li={class:"text-sm font-semibold text-gray-800"},Oi={key:0,class:"flex items-center gap-1"},Ii={class:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden"},Pi={class:"text-xs text-gray-500"},Ri={class:"space-y-2"},zi={class:"mt-3 flex items-center justify-end gap-2"},Hi=R({__name:"MetaInfoCard",props:{title:{},icon:{},iconBgClass:{},confidence:{}},emits:["feedback"],setup(e,{emit:t}){const s=e,o=E(null),r=S(()=>s.confidence===void 0||s.confidence===null?"":s.confidence>=.8?"bg-emerald-500":s.confidence>=.6?"bg-yellow-500":"bg-orange-500");return(a,l)=>(_(),k("div",Ei,[n("div",Ti,[n("div",Bi,[n("div",{class:q(["w-8 h-8 rounded-lg flex items-center justify-center",e.iconBgClass])},[(_(),H(yn(e.icon),{class:"w-5 h-5 text-white"}))],2),n("h4",Li,M(e.title),1)]),e.confidence!==void 0&&e.confidence!==null?(_(),k("div",Oi,[n("div",Ii,[n("div",{class:q(["h-full rounded-full transition-all",r.value]),style:pe({width:`${e.confidence*100}%`})},null,6)]),n("span",Pi,M(Math.round(e.confidence*100))+"%",1)])):L("",!0)]),n("div",Ri,[V(a.$slots,"default")]),n("div",zi,[n("button",{onClick:l[0]||(l[0]=i=>a.$emit("feedback","helpful")),class:q(["p-1.5 rounded-lg transition-colors",o.value==="helpful"?"bg-emerald-100":"hover:bg-gray-100"]),title:""},[(_(),k("svg",{class:q(["w-4 h-4 transition-colors",o.value==="helpful"?"text-emerald-600":"text-gray-400 hover:text-emerald-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[2]||(l[2]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"},null,-1)])],2))],2),n("button",{onClick:l[1]||(l[1]=i=>a.$emit("feedback","not-helpful")),class:q(["p-1.5 rounded-lg transition-colors",o.value==="not-helpful"?"bg-red-100":"hover:bg-gray-100"]),title:""},[(_(),k("svg",{class:q(["w-4 h-4 transition-colors",o.value==="not-helpful"?"text-red-600":"text-gray-400 hover:text-red-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[3]||(l[3]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"},null,-1)])],2))],2)])]))}}),nn=Object.assign(Hi,{__name:"MetaInfoCard"}),ji={class:"flex items-center gap-2 mb-3"},Di={class:"flex items-center gap-1 text-sm text-gray-500"},qi={class:"text-base text-gray-700 leading-relaxed mb-3"},Ni={key:0,class:"mt-3"},Vi={class:"space-y-1.5"},Fi={class:"mt-4 p-3 bg-violet-50/50 rounded-lg border border-violet-200/50"},Wi={class:"text-sm text-violet-800"},Ui=R({__name:"AuthorIntentCard",props:{authorIntent:{}},emits:["feedback"],setup(e,{emit:t}){const s={template:`
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
  `},o=e,r={inform:"",persuade:"",entertain:"",provoke:""},a={inform:"",persuade:"",entertain:"",provoke:""},l={inform:"bg-blue-100 text-blue-700",persuade:"bg-orange-100 text-orange-700",entertain:"bg-pink-100 text-pink-700",provoke:"bg-purple-100 text-purple-700"},i=S(()=>r[o.authorIntent.primary]||o.authorIntent.primary),u=S(()=>a[o.authorIntent.primary]||""),d=S(()=>l[o.authorIntent.primary]||"bg-gray-100 text-gray-700");return(c,v)=>{const f=nn;return _(),H(f,{title:"",icon:s,confidence:e.authorIntent.confidence,"icon-bg-class":"bg-gradient-to-br from-violet-500 to-purple-600",onFeedback:v[0]||(v[0]=g=>c.$emit("feedback",g))},{default:A(()=>[n("div",ji,[n("span",{class:q(["px-3 py-1.5 text-sm font-medium rounded-full",d.value])},M(i.value),3),n("div",Di,[v[1]||(v[1]=n("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),n("span",null,M(Math.round(e.authorIntent.confidence*100))+"% ",1)])]),n("p",qi,M(e.authorIntent.description),1),e.authorIntent.indicators&&e.authorIntent.indicators.length>0?(_(),k("div",Ni,[v[3]||(v[3]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-4 h-4 text-violet-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("ul",Vi,[(_(!0),k(Q,null,ie(e.authorIntent.indicators,(g,b)=>(_(),k("li",{key:b,class:"text-sm text-gray-600 flex items-start gap-2"},[v[2]||(v[2]=n("svg",{class:"w-2 h-2 text-violet-500 mt-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 8 8"},[n("circle",{cx:"4",cy:"4",r:"3"})],-1)),n("span",null,M(g),1)]))),128))])])):L("",!0),n("div",Fi,[n("p",Wi,[n("strong",null,M(i.value),1),Z(": "+M(u.value),1)])])]),_:1},8,["confidence"])}}}),Gi=Object.assign(Ui,{__name:"AuthorIntentCard"}),Ki={class:"flex items-center gap-2 mb-3"},Yi={class:"mb-3"},Xi={class:"flex items-center justify-between text-sm text-gray-600 mb-1"},Ji={class:"font-medium"},Qi={class:"relative h-2 bg-gray-200 rounded-full overflow-hidden"},Zi={class:"space-y-2 text-base"},ec={class:"flex items-center justify-between"},tc={class:"font-medium text-gray-800"},nc={class:"flex items-center justify-between"},sc={key:0,class:"flex items-center justify-between"},oc={class:"font-medium text-gray-800"},rc={key:0,class:"mt-4 p-3 bg-amber-50/50 rounded-lg border border-amber-200/50"},ac={class:"space-y-1"},lc={class:"mt-4 p-3 bg-gradient-to-r from-amber-50/50 to-orange-50/50 rounded-lg border border-amber-200/50"},ic={class:"flex items-start gap-2"},cc={class:"text-sm text-amber-800"},dc=R({__name:"TimelinessCard",props:{timelinessAnalysis:{},timelinessScore:{}},emits:["feedback"],setup(e,{emit:t}){const s={template:`
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
  `},o=e,r={timeless:"",evergreen:"","time-sensitive":"",breaking:""},a={low:"",medium:"",high:""},l={timeless:"bg-emerald-100 text-emerald-700",evergreen:"bg-green-100 text-green-700","time-sensitive":"bg-orange-100 text-orange-700",breaking:"bg-red-100 text-red-700"},i={low:"text-emerald-600",medium:"text-orange-600",high:"text-red-600"},u=S(()=>r[o.timelinessAnalysis.category]||o.timelinessAnalysis.category),d=S(()=>a[o.timelinessAnalysis.decay_rate]||o.timelinessAnalysis.decay_rate),c=S(()=>l[o.timelinessAnalysis.category]||"bg-gray-100 text-gray-700"),v=S(()=>i[o.timelinessAnalysis.decay_rate]||"text-gray-600"),f=S(()=>o.timelinessScore>=.7?"bg-gradient-to-r from-orange-500 to-red-500":o.timelinessScore>=.4?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-emerald-500 to-green-500"),g=x=>{try{return new Date(x).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}catch{return x}},b=S(()=>{const x=o.timelinessAnalysis.category;return x==="timeless"?"":x==="evergreen"?"":x==="time-sensitive"?"":x==="breaking"?"":""});return(x,h)=>{const m=nn;return _(),H(m,{title:"",icon:s,confidence:e.timelinessScore,"icon-bg-class":"bg-gradient-to-br from-amber-500 to-orange-600",onFeedback:h[0]||(h[0]=w=>x.$emit("feedback",w))},{default:A(()=>[n("div",Ki,[n("span",{class:q(["px-3 py-1.5 text-sm font-medium rounded-full",c.value])},M(u.value),3),n("span",{class:q(["text-sm font-medium",v.value])},M(d.value),3)]),n("div",Yi,[n("div",Xi,[h[1]||(h[1]=n("span",null,"",-1)),n("span",Ji,M(Math.round(e.timelinessScore*100))+"%",1)]),n("div",Qi,[n("div",{class:q(["h-full rounded-full transition-all",f.value]),style:pe({width:`${e.timelinessScore*100}%`})},null,6)]),h[2]||(h[2]=n("div",{class:"flex items-center justify-between text-xs text-gray-500 mt-1"},[n("span",null,""),n("span",null,"")],-1))]),n("div",Zi,[n("div",ec,[h[3]||(h[3]=n("span",{class:"text-gray-600"},":",-1)),n("span",tc,M(u.value),1)]),n("div",nc,[h[4]||(h[4]=n("span",{class:"text-gray-600"},":",-1)),n("span",{class:q(["font-medium",v.value])},M(d.value),3)]),e.timelinessAnalysis.best_before?(_(),k("div",sc,[h[5]||(h[5]=n("span",{class:"text-gray-600"},":",-1)),n("span",oc,M(g(e.timelinessAnalysis.best_before)),1)])):L("",!0)]),e.timelinessAnalysis.context_dependencies&&e.timelinessAnalysis.context_dependencies.length>0?(_(),k("div",rc,[h[7]||(h[7]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-4 h-4 text-amber-700",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-amber-800"},"")],-1)),n("ul",ac,[(_(!0),k(Q,null,ie(e.timelinessAnalysis.context_dependencies,(w,y)=>(_(),k("li",{key:y,class:"text-sm text-amber-700 flex items-start gap-1.5"},[h[6]||(h[6]=n("svg",{class:"w-2 h-2 text-amber-700 mt-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 8 8"},[n("circle",{cx:"4",cy:"4",r:"3"})],-1)),n("span",null,M(w),1)]))),128))])])):L("",!0),n("div",lc,[n("div",ic,[h[9]||(h[9]=n("svg",{class:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),n("p",cc,[h[8]||(h[8]=n("strong",null,":",-1)),Z(" "+M(b.value),1)])])])]),_:1},8,["confidence"])}}}),uc=Object.assign(dc,{__name:"TimelinessCard"}),fc={class:"mb-3"},pc={key:0,class:"flex items-center gap-2 p-3 bg-emerald-50 rounded-lg border border-emerald-200"},gc={key:1,class:"flex items-center gap-2 p-3 bg-rose-50 rounded-lg border border-rose-200"},vc={key:0,class:"mb-3"},mc={class:"flex flex-wrap gap-2"},hc={key:1,class:"mb-3"},yc={class:"flex items-center justify-between text-sm text-gray-600 mb-1"},bc={class:"relative h-2 bg-gray-200 rounded-full overflow-hidden"},xc={class:"flex items-center justify-between text-sm mb-3"},wc={key:2,class:"mt-4"},_c={class:"space-y-2"},kc={class:"flex items-start gap-2 mb-1.5"},Cc={class:"px-2 py-0.5 bg-rose-200 text-rose-800 text-xs font-medium rounded"},$c={class:"text-sm text-gray-700 italic mb-1.5"},Sc={class:"text-sm text-rose-700"},Ac={class:"mt-4 p-3 bg-gradient-to-r from-rose-50/50 to-pink-50/50 rounded-lg border border-rose-200/50"},Mc={class:"flex items-start gap-2"},Ec={class:"text-sm text-rose-800"},Tc=R({__name:"BiasCard",props:{biasAnalysis:{}},emits:["feedback"],setup(e,{emit:t}){const s={template:`
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
    </svg>
  `},o=e,r={confirmation_bias:"",political_bias:"",cultural_bias:"",selection_bias:"",anchoring_bias:"",availability_bias:""},a={low:"",medium:"",high:""},l={balanced:"",slightly_biased:"",heavily_biased:""},i=S(()=>a[o.biasAnalysis.severity]||o.biasAnalysis.severity),u=S(()=>l[o.biasAnalysis.overall_balance]||o.biasAnalysis.overall_balance),d=S(()=>{switch(o.biasAnalysis.severity){case"low":return"text-yellow-600";case"medium":return"text-orange-600";case"high":return"text-red-600";default:return"text-gray-600"}}),c=S(()=>{switch(o.biasAnalysis.severity){case"low":return"bg-yellow-500";case"medium":return"bg-orange-500";case"high":return"bg-red-500";default:return"bg-gray-500"}}),v=S(()=>{switch(o.biasAnalysis.severity){case"low":return"33%";case"medium":return"66%";case"high":return"100%";default:return"0%"}}),f=S(()=>{switch(o.biasAnalysis.overall_balance){case"balanced":return"text-emerald-600";case"slightly_biased":return"text-orange-600";case"heavily_biased":return"text-red-600";default:return"text-gray-600"}}),g=S(()=>o.biasAnalysis.detected?o.biasAnalysis.severity==="high"?"":o.biasAnalysis.severity==="medium"?"":"":"");return(b,x)=>{const h=nn;return _(),H(h,{title:"",icon:s,confidence:e.biasAnalysis.detected?.8:.9,"icon-bg-class":"bg-gradient-to-br from-rose-500 to-pink-600",onFeedback:x[0]||(x[0]=m=>b.$emit("feedback",m))},{default:A(()=>[n("div",fc,[e.biasAnalysis.detected?(_(),k("div",gc,[...x[2]||(x[2]=[n("svg",{class:"w-5 h-5 text-rose-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),n("div",null,[n("p",{class:"text-base font-medium text-rose-800"},""),n("p",{class:"text-sm text-rose-700 mt-0.5"},"")],-1)])])):(_(),k("div",pc,[...x[1]||(x[1]=[n("svg",{class:"w-5 h-5 text-emerald-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),n("div",null,[n("p",{class:"text-base font-medium text-emerald-800"},""),n("p",{class:"text-sm text-emerald-700 mt-0.5"},"")],-1)])]))]),e.biasAnalysis.detected&&e.biasAnalysis.types.length>0?(_(),k("div",vc,[x[3]||(x[3]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-rose-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",mc,[(_(!0),k(Q,null,ie(e.biasAnalysis.types,(m,w)=>(_(),k("span",{key:w,class:"px-2 py-1 bg-rose-100 text-rose-700 text-sm rounded-lg"},M(r[m]||m),1))),128))])])):L("",!0),e.biasAnalysis.detected?(_(),k("div",hc,[n("div",yc,[x[4]||(x[4]=n("span",null,"",-1)),n("span",{class:q(["font-medium",d.value])},M(i.value),3)]),n("div",bc,[n("div",{class:q(["h-full rounded-full transition-all",c.value]),style:pe({width:v.value})},null,6)])])):L("",!0),n("div",xc,[x[5]||(x[5]=n("span",{class:"text-gray-600"},":",-1)),n("span",{class:q(["font-medium",f.value])},M(u.value),3)]),e.biasAnalysis.detected&&e.biasAnalysis.examples&&e.biasAnalysis.examples.length>0?(_(),k("div",wc,[x[6]||(x[6]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-rose-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),n("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",_c,[(_(!0),k(Q,null,ie(e.biasAnalysis.examples.slice(0,3),(m,w)=>(_(),k("div",{key:w,class:"p-3 bg-rose-50/50 rounded-lg border border-rose-200/50"},[n("div",kc,[n("span",Cc,M(r[m.type]||m.type),1)]),n("p",$c,'"'+M(m.text)+'"',1),n("p",Sc,M(m.explanation),1)]))),128))])])):L("",!0),n("div",Ac,[n("div",Mc,[x[8]||(x[8]=n("svg",{class:"w-4 h-4 text-rose-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),n("p",Ec,[x[7]||(x[7]=n("strong",null,":",-1)),Z(" "+M(g.value),1)])])])]),_:1},8,["confidence"])}}}),Bc=Object.assign(Tc,{__name:"BiasCard"}),Lc={key:0,class:"mb-4"},Oc={class:"flex flex-wrap gap-2"},Ic={key:1,class:"mb-4"},Pc={class:"space-y-1.5"},Rc={key:2,class:"mb-4"},zc={class:"space-y-1.5"},Hc={key:3,class:"mb-4"},jc={class:"flex flex-wrap gap-2"},Dc={class:"mt-4 p-3 bg-gradient-to-r from-indigo-50/50 to-blue-50/50 rounded-lg border border-indigo-200/50"},qc={class:"flex items-start gap-2"},Nc={class:"text-sm text-indigo-800"},Vc={key:4,class:"mt-4 p-3 bg-gradient-to-r from-emerald-50/50 to-green-50/50 rounded-lg border border-emerald-200/50"},Fc=R({__name:"KnowledgeGapsCard",props:{knowledgeGaps:{}},emits:["feedback"],setup(e,{emit:t}){const s={template:`
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
    </svg>
  `},o=e,r=S(()=>(!o.knowledgeGaps.prerequisites||o.knowledgeGaps.prerequisites.length===0)&&(!o.knowledgeGaps.assumptions||o.knowledgeGaps.assumptions.length===0)&&(!o.knowledgeGaps.missing_context||o.knowledgeGaps.missing_context.length===0)),a=S(()=>{if(r.value)return"";const l=o.knowledgeGaps.prerequisites&&o.knowledgeGaps.prerequisites.length>0,i=o.knowledgeGaps.assumptions&&o.knowledgeGaps.assumptions.length>0;return l&&i?"":l?"":i?"":""});return(l,i)=>{const u=nn;return _(),H(u,{title:"",icon:s,"icon-bg-class":"bg-gradient-to-br from-indigo-500 to-blue-600",onFeedback:i[0]||(i[0]=d=>l.$emit("feedback",d))},{default:A(()=>[e.knowledgeGaps.prerequisites&&e.knowledgeGaps.prerequisites.length>0?(_(),k("div",Lc,[i[1]||(i[1]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-indigo-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",Oc,[(_(!0),k(Q,null,ie(e.knowledgeGaps.prerequisites,(d,c)=>(_(),k("span",{key:c,class:"px-3 py-1.5 bg-indigo-50 border border-indigo-200 text-indigo-700 text-sm rounded-lg hover:bg-indigo-100 transition-colors cursor-pointer"},M(d),1))),128))]),i[2]||(i[2]=n("p",{class:"text-sm text-gray-600 mt-2"},"",-1))])):L("",!0),e.knowledgeGaps.assumptions&&e.knowledgeGaps.assumptions.length>0?(_(),k("div",Ic,[i[4]||(i[4]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("ul",Pc,[(_(!0),k(Q,null,ie(e.knowledgeGaps.assumptions,(d,c)=>(_(),k("li",{key:c,class:"text-sm text-gray-700 flex items-start gap-2 p-2 bg-blue-50/50 rounded-lg border border-blue-200/50"},[i[3]||(i[3]=n("svg",{class:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)),n("span",null,M(d),1)]))),128))]),i[5]||(i[5]=n("p",{class:"text-sm text-gray-600 mt-2"},"",-1))])):L("",!0),e.knowledgeGaps.missing_context&&e.knowledgeGaps.missing_context.length>0?(_(),k("div",Rc,[i[7]||(i[7]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("ul",zc,[(_(!0),k(Q,null,ie(e.knowledgeGaps.missing_context,(d,c)=>(_(),k("li",{key:c,class:"text-sm text-gray-700 flex items-start gap-2"},[i[6]||(i[6]=n("svg",{class:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),n("span",null,M(d),1)]))),128))]),i[8]||(i[8]=n("p",{class:"text-sm text-gray-600 mt-2"},"",-1))])):L("",!0),e.knowledgeGaps.related_concepts&&e.knowledgeGaps.related_concepts.length>0?(_(),k("div",Hc,[i[9]||(i[9]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),n("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",jc,[(_(!0),k(Q,null,ie(e.knowledgeGaps.related_concepts,(d,c)=>(_(),k("span",{key:c,class:"px-3 py-1.5 bg-emerald-50 border border-emerald-200 text-emerald-700 text-sm rounded-lg hover:bg-emerald-100 transition-colors cursor-pointer"},M(d),1))),128))]),i[10]||(i[10]=n("p",{class:"text-sm text-gray-600 mt-2"},"",-1))])):L("",!0),n("div",Dc,[n("div",qc,[i[12]||(i[12]=n("svg",{class:"w-4 h-4 text-indigo-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})],-1)),n("p",Nc,[i[11]||(i[11]=n("strong",null,":",-1)),Z(" "+M(a.value),1)])])]),r.value?(_(),k("div",Vc,[...i[13]||(i[13]=[n("div",{class:"flex items-center gap-2"},[n("svg",{class:"w-5 h-5 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),n("p",{class:"text-sm font-medium text-emerald-800"},"")],-1)])])):L("",!0)]),_:1})}}}),Wc=Object.assign(Fc,{__name:"KnowledgeGapsCard"}),Uc=R({__name:"CardDescription",props:{class:{}},setup(e){const t=e;return(s,o)=>(_(),k("p",{"data-slot":"card-description",class:q(p(Te)("text-muted-foreground text-sm",t.class))},[V(s.$slots,"default")],2))}}),Xn=R({__name:"CardHeader",props:{class:{}},setup(e){const t=e;return(s,o)=>(_(),k("div",{"data-slot":"card-header",class:q(p(Te)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t.class))},[V(s.$slots,"default")],2))}}),Jn=R({__name:"CardTitle",props:{class:{}},setup(e){const t=e;return(s,o)=>(_(),k("h3",{"data-slot":"card-title",class:q(p(Te)("leading-none font-semibold",t.class))},[V(s.$slots,"default")],2))}}),Qn=R({__name:"Badge",props:{asChild:{type:Boolean},as:{},variant:{},class:{}},setup(e){const t=e,s=xt(t,"class");return(o,r)=>(_(),H(p(ve),ee({"data-slot":"badge",class:p(Te)(p(Gc)({variant:e.variant}),t.class)},p(s)),{default:A(()=>[V(o.$slots,"default")]),_:3},16,["class"]))}}),Gc=Ro("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),Kc=R({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,s=xt(t,"class");return(o,r)=>(_(),H(p(al),ee(p(s),{class:p(Te)("flex touch-none select-none transition-colors",e.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",e.orientation==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-px",t.class)}),{default:A(()=>[B(p(ul),{class:"relative flex-1 rounded-full bg-border"})]),_:1},16,["class"]))}}),Yc=R({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,s=xt(t,"class");return(o,r)=>(_(),H(p(Na),ee(p(s),{class:p(Te)("relative overflow-hidden",t.class)}),{default:A(()=>[B(p(pl),{class:"h-full w-full rounded-[inherit]"},{default:A(()=>[V(o.$slots,"default")]),_:3}),B(Kc),B(p(Ua))]),_:3},16,["class"]))}});/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xc=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,o)=>o?o.toUpperCase():s.toLowerCase()),Jc=e=>{const t=Xc(e);return t.charAt(0).toUpperCase()+t.slice(1)},Qc=(...e)=>e.filter((t,s,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===s).join(" ").trim(),es=e=>e==="";/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ct={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=({name:e,iconNode:t,absoluteStrokeWidth:s,"absolute-stroke-width":o,strokeWidth:r,"stroke-width":a,size:l=ct.width,color:i=ct.stroke,...u},{slots:d})=>Ot("svg",{...ct,...u,width:l,height:l,stroke:i,"stroke-width":es(s)||es(o)||s===!0||o===!0?Number(r||a||ct["stroke-width"])*24/Number(l):r||a||ct["stroke-width"],class:Qc("lucide",u.class,...e?[`lucide-${Zn(Jc(e))}-icon`,`lucide-${Zn(e)}`]:["lucide-icon"])},[...t.map(c=>Ot(...c)),...d.default?[d.default()]:[]]);/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=(e,t)=>(s,{slots:o,attrs:r})=>Ot(Zc,{...r,...s,iconNode:t,name:e},o);/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=En("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=En("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=En("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),sd={class:"space-y-4"},od={class:"text-sm text-gray-700 leading-relaxed"},rd={key:0,class:"mt-4 space-y-2"},ad={class:"space-y-1"},ld={key:1,class:"mt-4 grid grid-cols-3 gap-3"},id={class:"text-center p-3 bg-blue-50 rounded-lg"},cd={class:"text-xl font-bold text-blue-700"},dd={class:"text-center p-3 bg-green-50 rounded-lg"},ud={class:"text-xl font-bold text-green-700"},fd={class:"text-center p-3 bg-amber-50 rounded-lg"},pd={class:"text-xl font-bold text-amber-700"},gd={class:"space-y-4"},vd={key:0,class:"relative pl-6 pb-4"},md=["onClick"],hd={class:"flex items-start gap-2 mb-2"},yd={class:"text-sm text-gray-800 leading-relaxed"},bd={class:"text-xs text-gray-500 mt-2"},xd={key:1,class:"relative pl-6 pb-4"},wd=["onClick"],_d={class:"flex items-start gap-2 mb-2"},kd={class:"text-sm text-gray-800 leading-relaxed"},Cd={class:"text-xs text-gray-500 mt-2"},$d=R({__name:"ArgumentStructureView",props:{highlights:{},annotations:{}},setup(e){const t=e,s=S(()=>[...t.highlights].sort((l,i)=>(l.sentence_index||0)-(i.sentence_index||0))),o=l=>l?l.toFixed(1):"0",r=l=>{let i=0;for(let u=0;u<=l;u++)s.value[u]?.category==="claim"&&i++;return i},a=l=>{const i=document.getElementById("article-content-container");if(!i)return;const u=i.querySelectorAll(".meta-view-highlight");for(const d of u)if(d.textContent?.trim()===l.text.trim()){d.scrollIntoView({behavior:"smooth",block:"center"}),d.classList.add("highlight-flash"),setTimeout(()=>{d.classList.remove("highlight-flash")},2e3);break}};return(l,i)=>(_(),k("div",sd,[B(p(Rt),null,{default:A(()=>[B(p(Xn),{class:"pb-3"},{default:A(()=>[B(p(Jn),{class:"text-sm flex items-center gap-2"},{default:A(()=>[B(p(td),{class:"w-4 h-4"}),i[0]||(i[0]=Z("  ",-1))]),_:1})]),_:1}),B(p(Pt),null,{default:A(()=>[n("p",od,M(e.annotations.summary),1),e.annotations.key_insights&&e.annotations.key_insights.length>0?(_(),k("div",rd,[i[1]||(i[1]=n("h4",{class:"text-xs font-semibold text-gray-600"},"",-1)),n("ul",ad,[(_(!0),k(Q,null,ie(e.annotations.key_insights,(u,d)=>(_(),k("li",{key:d,class:"text-xs text-gray-600 flex items-start gap-2"},[B(p(ed),{class:"w-3 h-3 text-emerald-600 mt-0.5 flex-shrink-0"}),n("span",null,M(u),1)]))),128))])])):L("",!0),e.annotations.statistics?(_(),k("div",ld,[n("div",id,[n("div",cd,M(e.annotations.statistics.claim_count||0),1),i[2]||(i[2]=n("div",{class:"text-xs text-gray-600"},"",-1))]),n("div",dd,[n("div",ud,M(e.annotations.statistics.evidence_count||0),1),i[3]||(i[3]=n("div",{class:"text-xs text-gray-600"},"",-1))]),n("div",fd,[n("div",pd,M(o(e.annotations.statistics.claim_to_evidence_ratio)),1),i[4]||(i[4]=n("div",{class:"text-xs text-gray-600"},"",-1))])])):L("",!0)]),_:1})]),_:1}),B(p(Rt),null,{default:A(()=>[B(p(Xn),{class:"pb-3"},{default:A(()=>[B(p(Jn),{class:"text-sm flex items-center gap-2"},{default:A(()=>[B(p(nd),{class:"w-4 h-4"}),i[5]||(i[5]=Z("  ",-1))]),_:1}),B(p(Uc),{class:"text-xs"},{default:A(()=>[...i[6]||(i[6]=[Z("",-1)])]),_:1})]),_:1}),B(p(Pt),null,{default:A(()=>[B(p(Yc),{class:"h-[400px] pr-4"},{default:A(()=>[n("div",gd,[(_(!0),k(Q,null,ie(s.value,(u,d)=>(_(),k("div",{key:d,class:"group"},[u.category==="claim"?(_(),k("div",vd,[i[7]||(i[7]=n("div",{class:"absolute left-3 top-0 bottom-0 w-px bg-blue-200"},null,-1)),i[8]||(i[8]=n("div",{class:"absolute left-[0.6875rem] top-3 w-2.5 h-2.5 rounded-full bg-blue-500 border-2 border-white"},null,-1)),n("div",{onClick:c=>a(u),class:"ml-4 p-3 bg-blue-50 border border-blue-200 rounded-lg cursor-pointer hover:bg-blue-100 hover:shadow-md transition-all"},[n("div",hd,[B(p(Qn),{variant:"default",class:"bg-blue-600 text-xs"},{default:A(()=>[Z(" "+M(r(d)),1)]),_:2},1024)]),n("p",yd,M(u.text),1),n("p",bd,M(u.tooltip),1)],8,md)])):u.category==="evidence"?(_(),k("div",xd,[i[10]||(i[10]=n("div",{class:"absolute left-3 top-0 bottom-0 w-px bg-green-200"},null,-1)),i[11]||(i[11]=n("div",{class:"absolute left-[0.6875rem] top-3 w-2.5 h-2.5 rounded-full bg-green-500 border-2 border-white"},null,-1)),n("div",{onClick:c=>a(u),class:"ml-4 p-3 bg-green-50 border border-green-200 rounded-lg cursor-pointer hover:bg-green-100 hover:shadow-md transition-all"},[n("div",_d,[B(p(Qn),{variant:"default",class:"bg-green-600 text-xs"},{default:A(()=>[...i[9]||(i[9]=[Z("",-1)])]),_:1})]),n("p",kd,M(u.text),1),n("p",Cd,M(u.tooltip),1)],8,wd)])):L("",!0)]))),128))])]),_:1})]),_:1})]),_:1})]))}}),Sd=Object.assign($e($d,[["__scopeId","data-v-8da86f09"]]),{__name:"ArgumentStructureView"}),Ps=()=>{const e=be(),t=F("enabled-lenses",()=>new Set),s=F("lens-results",()=>new Map),o=F("loading-lenses",()=>new Set),r=F("lens-error",()=>null),a=async(h,m,w=!1)=>{const y=new Set(o.value);y.add(m),o.value=y,r.value=null;try{const $=await $fetch(`${e.public.apiBase}/api/v1/articles/${h}/thinking-lens/${m}`,{params:{force_reanalyze:w}});if($.status==="completed"){s.value.set(m,$.lens_result);const C=new Set(o.value);return C.delete(m),o.value=C,console.log(` ${m} :`,$.lens_result.highlights.length,""),$.lens_result}else if($.status==="pending")return console.log(` ${m} ID: ${$.task_id}`),null}catch($){console.error(" :",$),r.value=$.data?.detail||$.message||"";const C=new Set(o.value);throw C.delete(m),o.value=C,$}},l=async(h,m,w)=>{if(t.value.has(m))v(w,m),t.value.delete(m),console.log(` ${m} `);else if(t.value.add(m),s.value.has(m)){const y=s.value.get(m);y&&(d(w,y.highlights,m),console.log(` ${m} `))}else{const y=await a(h,m);y?(d(w,y.highlights,m),console.log(` ${m} `)):console.log(` ${m} `)}},i=h=>{g(h),t.value.clear()},u=(h,m)=>{if(!h||m.length===0){console.warn(" ");return}try{g(h),console.log(" ",m.length,"");const w=performance.now();c(h,m);const y=performance.now()-w;console.log(` : ${y.toFixed(0)}ms`)}catch(w){console.error(" :",w)}},d=(h,m,w)=>{if(!h||m.length===0){console.warn(" ");return}try{console.log(`  ${w}:`,m.length,"");const y=performance.now();c(h,m,w);const $=performance.now()-y;console.log(` ${w} : ${$.toFixed(0)}ms`)}catch(y){console.error(" :",y)}},c=(h,m,w)=>{const y=new Map;m.forEach(T=>{const O=T.text.trim();O&&y.set(O,T)});const $=document.createTreeWalker(h,NodeFilter.SHOW_TEXT,{acceptNode:T=>T.parentElement?.classList.contains("meta-view-highlight")?NodeFilter.FILTER_REJECT:T.textContent?.trim()?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),C=[];let z;for(;z=$.nextNode();)C.push(z);const P=new Set;for(const T of C){const O=T.textContent||"";for(const[I,K]of y.entries()){if(P.has(I))continue;const W=O.indexOf(I);if(W!==-1){const ne=O.substring(0,W),X=O.substring(W,W+I.length),re=O.substring(W+I.length),te=T.parentNode;if(te){const ae=f(X,K,w);ne&&te.insertBefore(document.createTextNode(ne),T),te.insertBefore(ae,T),re&&te.insertBefore(document.createTextNode(re),T),te.removeChild(T),P.add(I);break}}}}},v=(h,m)=>{const w=h.querySelectorAll(`.meta-view-highlight[data-lens-type="${m}"]`);w.forEach(y=>{const $=y.parentNode;if($){const C=document.createTextNode(y.textContent||"");$.replaceChild(C,y)}}),h.normalize(),console.log(`  ${w.length}  ${m} `)},f=(h,m,w)=>{const y=document.createElement("span");return y.className="meta-view-highlight",y.dataset.category=m.category,y.dataset.tooltip=m.tooltip,w&&(y.dataset.lensType=w),y.style.backgroundColor=m.color,y.style.borderBottom=`2px solid ${m.color.replace("0.4","0.6")}`,y.style.cursor="help",y.style.padding="0.1em 0.2em",y.style.borderRadius="0.25em",y.style.transition="all 0.2s ease",y.textContent=h,y.addEventListener("mouseenter",()=>{y.style.backgroundColor=m.color.replace("0.4","0.6"),y.style.boxShadow="0 0 0 2px rgba(0, 0, 0, 0.1)"}),y.addEventListener("mouseleave",()=>{y.style.backgroundColor=m.color,y.style.boxShadow="none"}),y},g=h=>{h.querySelectorAll(".meta-view-highlight").forEach(w=>{const y=w.parentNode;if(y){const $=document.createTextNode(w.textContent||"");y.replaceChild($,w)}}),h.normalize()},b=h=>{g(h)},x=()=>{s.value.clear(),t.value.clear(),r.value=null};return{enabledLenses:de(t),lensResults:de(s),loadingLenses:de(o),error:de(r),isArgumentLensEnabled:S(()=>t.value.has("argument_structure")),isStanceLensEnabled:S(()=>t.value.has("author_stance")),isLoadingArgumentLens:S(()=>o.value.has("argument_structure")),isLoadingStanceLens:S(()=>o.value.has("author_stance")),loadLens:a,toggleLens:l,clearLens:i,renderHighlights:u,renderHighlightsByType:d,removeHighlights:g,removeHighlightsByType:v,clearHighlights:b,clearLensResults:x}},Ad={class:"mb-4 bg-white/80 backdrop-blur-md border border-gray-200/50 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all"},Md={class:"flex items-center justify-between mb-4"},Ed={key:0,class:"mb-4 p-3 bg-gradient-to-r from-teal-50/50 to-cyan-50/50 rounded-lg border border-teal-200/50"},Td={class:"space-y-3"},Bd={key:0,class:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-xl flex items-center justify-center z-10"},Ld={class:"flex items-start gap-3"},Od={class:"flex-1"},Id={class:"flex items-center gap-2 mb-1"},Pd={key:0,class:"px-2 py-0.5 bg-teal-500 text-white text-[10px] font-medium rounded-full"},Rd={key:0,class:"mt-3"},zd={class:"flex items-center justify-between text-xs text-gray-600 pt-2 border-t border-teal-200/50"},Hd={key:0,class:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-xl flex items-center justify-center z-10"},jd={class:"flex items-start gap-3"},Dd={class:"flex-1"},qd={class:"flex items-center gap-2 mb-1"},Nd={key:0,class:"px-2 py-0.5 bg-purple-500 text-white text-[10px] font-medium rounded-full"},Vd={key:0,class:"mt-3 space-y-2"},Fd={class:"flex flex-wrap gap-2"},Wd={class:"flex items-center gap-1.5"},Ud={class:"text-xs text-gray-600"},Gd={class:"flex items-center gap-1.5"},Kd={class:"text-xs text-gray-600"},Yd={class:"pt-2 border-t border-purple-200/50"},Xd={class:"flex items-center justify-between text-xs text-gray-600 mb-1"},Jd={class:"font-medium"},Qd={class:"relative h-2 bg-gray-200 rounded-full overflow-hidden"},Zd={class:"flex items-center justify-between text-xs text-gray-600 pt-2 border-t border-purple-200/50"},eu={key:0,class:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg"},tu={class:"flex items-start gap-2"},nu={class:"flex-1"},su={class:"text-xs text-red-700 mt-1"},ou={key:0,class:"mt-4 pt-3 border-t border-gray-200"},ru=R({__name:"ThinkingLensSwitcher",props:{articleId:{},containerElementId:{}},emits:["lensApplied","lensRemoved"],setup(e,{emit:t}){const s=e,o=t,{enabledLenses:r,lensResults:a,loadingLenses:l,error:i,toggleLens:u}=Ps(),d=E(!1),c=E(null),v=$=>r.value.has($),f=$=>a.value.get($)||null,g=$=>l.value.has($),b=async $=>{c.value=$;try{const C=s.containerElementId?document.getElementById(s.containerElementId):null;if(!C){console.error(" ");return}await u(s.articleId,$,C),r.value.has($)?o("lensApplied",$):o("lensRemoved")}catch(C){console.error("Failed to toggle lens:",C)}finally{c.value=null}},x=$=>{const C=s.containerElementId?document.getElementById(s.containerElementId):null;C&&u(s.articleId,$,C),o("lensRemoved")},h=()=>{c.value&&b(c.value)},m=($,C)=>{const z=f($);return z?z.highlights.filter(P=>P.category===C).length:0},w=$=>{const C=f($);return C?C.highlights.length:0},y=()=>{const $=f("author_stance");if(!$)return 0;const C=$.highlights.length;if(C===0)return 0;const z=m("author_stance","subjective");return Math.round(z/C*100)};return J(()=>s.articleId,()=>{r.value.clear()}),($,C)=>{const z=Sd;return _(),k("div",Ad,[n("div",Md,[C[6]||(C[6]=Xe('<div class="flex items-center gap-2"><div class="w-8 h-8 rounded-lg bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></div><h4 class="text-sm font-semibold text-gray-800"></h4></div>',1)),n("button",{onClick:C[0]||(C[0]=P=>d.value=!d.value),class:"p-1 rounded-lg hover:bg-gray-100 transition-colors",title:""},[...C[5]||(C[5]=[n("svg",{class:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)])])]),B(oe,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","leave-active-class":"transition-all duration-200 ease-in","leave-to-class":"opacity-0 -translate-y-2"},{default:A(()=>[d.value?(_(),k("div",Ed,[...C[7]||(C[7]=[n("p",{class:"text-xs text-teal-800 leading-relaxed"},"  ",-1)])])):L("",!0)]),_:1}),n("div",Td,[n("div",{onClick:C[2]||(C[2]=P=>b("argument_structure")),class:q(["relative p-4 rounded-xl border-2 cursor-pointer transition-all",v("argument_structure")?"border-teal-500 bg-gradient-to-r from-teal-50 to-cyan-50 shadow-md":"border-gray-200 bg-white/50 hover:border-teal-300 hover:shadow-sm"])},[g("argument_structure")?(_(),k("div",Bd,[...C[8]||(C[8]=[n("svg",{class:"w-6 h-6 text-teal-600 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])):L("",!0),n("div",Ld,[n("div",{class:q(["w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors",v("argument_structure")?"bg-teal-500":"bg-gray-200"])},[(_(),k("svg",{class:q(["w-5 h-5 transition-colors",v("argument_structure")?"text-white":"text-gray-500"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...C[9]||(C[9]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)])],2))],2),n("div",Od,[n("div",Id,[n("h5",{class:q(["text-sm font-semibold transition-colors",v("argument_structure")?"text-teal-700":"text-gray-700"])},"",2),v("argument_structure")?(_(),k("span",Pd,"  ")):L("",!0)]),C[10]||(C[10]=n("p",{class:"text-xs text-gray-600 mb-2"},"",-1)),v("argument_structure")&&f("argument_structure")?(_(),k("div",Rd,[n("div",zd,[n("span",null," "+M(w("argument_structure"))+" ",1),n("button",{onClick:C[1]||(C[1]=we(P=>x("argument_structure"),["stop"])),class:"px-2 py-1 text-teal-600 hover:bg-teal-100 rounded transition-colors"},"  ")])])):L("",!0)])])],2),n("div",{onClick:C[4]||(C[4]=P=>b("author_stance")),class:q(["relative p-4 rounded-xl border-2 cursor-pointer transition-all",v("author_stance")?"border-purple-500 bg-gradient-to-r from-purple-50 to-pink-50 shadow-md":"border-gray-200 bg-white/50 hover:border-purple-300 hover:shadow-sm"])},[g("author_stance")?(_(),k("div",Hd,[...C[11]||(C[11]=[n("svg",{class:"w-6 h-6 text-purple-600 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])):L("",!0),n("div",jd,[n("div",{class:q(["w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors",v("author_stance")?"bg-purple-500":"bg-gray-200"])},[(_(),k("svg",{class:q(["w-5 h-5 transition-colors",v("author_stance")?"text-white":"text-gray-500"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...C[12]||(C[12]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"},null,-1)])],2))],2),n("div",Dd,[n("div",qd,[n("h5",{class:q(["text-sm font-semibold transition-colors",v("author_stance")?"text-purple-700":"text-gray-700"])},"",2),v("author_stance")?(_(),k("span",Nd,"  ")):L("",!0)]),C[16]||(C[16]=n("p",{class:"text-xs text-gray-600 mb-2"},"",-1)),v("author_stance")&&f("author_stance")?(_(),k("div",Vd,[n("div",Fd,[n("div",Wd,[C[13]||(C[13]=n("span",{class:"w-3 h-3 rounded bg-indigo-200 border border-indigo-400"},null,-1)),n("span",Ud," ("+M(m("author_stance","objective"))+")",1)]),n("div",Gd,[C[14]||(C[14]=n("span",{class:"w-3 h-3 rounded bg-rose-200 border border-rose-400"},null,-1)),n("span",Kd," ("+M(m("author_stance","subjective"))+")",1)])]),n("div",Yd,[n("div",Xd,[C[15]||(C[15]=n("span",null,"",-1)),n("span",Jd,M(y())+"%",1)]),n("div",Qd,[n("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-rose-500 rounded-full transition-all",style:pe({width:`${y()}%`})},null,4)])]),n("div",Zd,[n("span",null," "+M(w("author_stance"))+" ",1),n("button",{onClick:C[3]||(C[3]=we(P=>x("author_stance"),["stop"])),class:"px-2 py-1 text-purple-600 hover:bg-purple-100 rounded transition-colors"},"  ")])])):L("",!0)])])],2)]),B(oe,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-4","leave-active-class":"transition-all duration-200 ease-in","leave-to-class":"opacity-0 -translate-y-4"},{default:A(()=>[v("argument_structure")&&f("argument_structure")?(_(),H(z,{key:0,highlights:f("argument_structure").highlights,annotations:f("argument_structure").annotations,class:"mt-4"},null,8,["highlights","annotations"])):L("",!0)]),_:1}),B(oe,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","leave-active-class":"transition-all duration-200 ease-in","leave-to-class":"opacity-0 -translate-y-2"},{default:A(()=>[p(i)?(_(),k("div",eu,[n("div",tu,[C[18]||(C[18]=n("svg",{class:"w-4 h-4 text-red-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),n("div",nu,[C[17]||(C[17]=n("p",{class:"text-xs text-red-800 font-medium"},"",-1)),n("p",su,M(p(i)),1),n("button",{onClick:h,class:"mt-2 px-3 py-1 bg-red-600 text-white text-xs rounded-lg hover:bg-red-700 transition-colors"},"  ")])])])):L("",!0)]),_:1}),!v("argument_structure")&&!v("author_stance")?(_(),k("div",ou,[...C[19]||(C[19]=[n("p",{class:"text-xs text-gray-500 text-center"},"  ",-1)])])):L("",!0)])}}}),au=Object.assign(ru,{__name:"ThinkingLensSwitcher"}),Rs=()=>{const e=be(),t=F("meta-view-active",()=>!1),s=F("meta-analysis-data",()=>null),o=F("meta-view-analyzing",()=>!1),r=F("meta-view-error",()=>null),a=async(f,g,b,x,h,m,w="zh",y=!1)=>{o.value=!0,r.value=null;try{const $=await $fetch(`${e.public.apiBase}/api/v1/meta-analysis/analyze`,{method:"POST",body:{title:f,author:g,publish_date:b,full_text:x,user_id:h,source_url:m,language:w,force_reanalyze:y}});if($.status==="completed"&&$.meta_analysis){if(s.value=$.meta_analysis,o.value=!1,console.log(" :",$.meta_analysis.id),$.meta_analysis.generated_title){const{title:C}=Ne();C.value=$.meta_analysis.generated_title,console.log(" AI:",$.meta_analysis.generated_title)}return $.meta_analysis}else if($.status==="pending")return console.log(" ID:",$.task_id),null}catch($){throw console.error(" :",$),r.value=$.data?.detail||$.message||"",o.value=!1,$}},l=async f=>{try{const g=await $fetch(`${e.public.apiBase}/api/v1/meta-analysis/${f}`);if(g.exists&&g.meta_analysis){if(s.value=g.meta_analysis,console.log(" :",g.meta_analysis.id),g.meta_analysis.generated_title){const{title:b}=Ne();b.value=g.meta_analysis.generated_title,console.log(" AI:",g.meta_analysis.generated_title)}return!0}return!1}catch(g){return console.error(" :",g),!1}},i=()=>{t.value=!t.value},u=()=>{t.value=!1},d=()=>{t.value=!0},c=()=>{s.value=null,r.value=null},v=async(f,g,b,x,h,m,w)=>{try{await $fetch(`${e.public.apiBase}/api/v1/meta-analysis/feedback`,{method:"POST",body:{user_id:f,meta_analysis_id:b,lens_result_id:x,feedback_type:g,rating:h,comment:m,feedback_data:w}}),console.log(" ")}catch(y){throw console.error(" :",y),y}};return{isMetaViewActive:de(t),metaAnalysisData:de(s),isAnalyzing:de(o),analysisError:de(r),analyzeArticle:a,fetchMetaAnalysis:l,toggleMetaView:i,closeMetaView:u,openMetaView:d,clearMetaAnalysis:c,submitFeedback:v}},lu={key:0,class:"fixed top-0 right-0 h-full w-full md:w-[420px] bg-white/70 backdrop-blur-xl border-l border-gray-200/50 shadow-2xl overflow-y-auto z-40"},iu={class:"sticky top-0 z-10 bg-white/90 backdrop-blur-xl border-b border-gray-200/50 p-6"},cu={class:"flex items-center justify-between"},du={class:"p-6 space-y-6"},uu={key:0,class:"py-12 flex flex-col items-center justify-center"},fu={key:1,class:"py-12 flex flex-col items-center justify-center"},pu={class:"text-xs text-gray-500 mb-4 text-center"},gu={class:"mt-6 p-4 bg-gray-50/50 rounded-xl border border-gray-200/50"},vu={class:"space-y-1 text-sm text-gray-500"},mu={key:3,class:"py-12 flex flex-col items-center justify-center"},hu=R({__name:"MetaInfoPanel",props:{articleContent:{}},emits:["retry"],setup(e,{emit:t}){const{isMetaViewActive:s,metaAnalysisData:o,isAnalyzing:r,analysisError:a,closeMetaView:l,submitFeedback:i}=Rs(),{user:u}=mt(),d=async(f,g)=>{if(!(!u.value?.id||!o.value?.id))try{await i(u.value.id,"meta_info_card",o.value.id,void 0,g==="helpful"?5:1,void 0,{card_type:f,helpful:g==="helpful"}),console.log(" :",f,g)}catch(b){console.error(" :",b)}},c=f=>{console.log(" :",f)},v=()=>{console.log(" ")};return(f,g)=>{const b=Gi,x=uc,h=Bc,m=Wc,w=au;return _(),k(Q,null,[B(oe,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:A(()=>[p(s)?(_(),k("aside",lu,[n("div",iu,[n("div",cu,[g[8]||(g[8]=n("div",{class:"flex items-center gap-3"},[n("div",{class:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md"},[n("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])]),n("div",null,[n("h2",{class:"text-lg font-bold bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent"},"  "),n("p",{class:"text-xs text-gray-500"},"Meta-View Mode")])],-1)),n("button",{onClick:g[0]||(g[0]=(...y)=>p(l)&&p(l)(...y)),class:"p-2 rounded-lg hover:bg-gray-100 transition-colors"},[...g[7]||(g[7]=[n("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),n("div",du,[p(r)?(_(),k("div",uu,[...g[9]||(g[9]=[n("div",{class:"w-16 h-16 border-4 border-violet-600 border-t-transparent rounded-full animate-spin mb-4"},null,-1),n("p",{class:"text-sm text-gray-600"},"...",-1),n("p",{class:"text-xs text-gray-500 mt-1"},"",-1)])])):p(a)?(_(),k("div",fu,[g[10]||(g[10]=n("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4"},[n("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),g[11]||(g[11]=n("p",{class:"text-sm text-gray-700 mb-2"},"",-1)),n("p",pu,M(p(a)),1),n("button",{onClick:g[1]||(g[1]=y=>f.$emit("retry")),class:"px-4 py-2 bg-violet-600 hover:bg-violet-700 text-white text-sm rounded-lg transition-colors"},"  ")])):p(o)?(_(),k(Q,{key:2},[B(b,{"author-intent":p(o).author_intent,onFeedback:g[2]||(g[2]=y=>d("author_intent",y))},null,8,["author-intent"]),B(x,{"timeliness-analysis":p(o).timeliness_analysis,"timeliness-score":p(o).timeliness_score,onFeedback:g[3]||(g[3]=y=>d("timeliness",y))},null,8,["timeliness-analysis","timeliness-score"]),B(h,{"bias-analysis":p(o).bias_analysis,onFeedback:g[4]||(g[4]=y=>d("bias",y))},null,8,["bias-analysis"]),B(m,{"knowledge-gaps":p(o).knowledge_gaps,onFeedback:g[5]||(g[5]=y=>d("knowledge_gaps",y))},null,8,["knowledge-gaps"]),B(w,{"article-id":p(o).article_id,"container-element-id":"article-content-container",onLensApplied:c,onLensRemoved:v},null,8,["article-id"]),n("div",gu,[g[12]||(g[12]=n("div",{class:"flex items-center gap-2 mb-2"},[n("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",vu,[n("p",null,": "+M(p(o).analysis_quality.llm_model),1),n("p",null,": "+M(p(o).analysis_quality.processing_time_ms)+"ms",1),n("p",null,": "+M(Math.round(p(o).analysis_quality.confidence_score*100))+"%",1),n("p",null,": "+M(p(o).analysis_quality.prompt_version),1)])])],64)):(_(),k("div",mu,[...g[13]||(g[13]=[n("div",{class:"w-20 h-20 bg-gradient-to-br from-violet-100 to-purple-100 rounded-2xl flex items-center justify-center mb-4"},[n("svg",{class:"w-10 h-10 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])],-1),n("p",{class:"text-sm text-gray-700 mb-1"},"",-1),n("p",{class:"text-xs text-gray-500 text-center"},"",-1)])]))])])):L("",!0)]),_:1}),B(oe,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[p(s)?(_(),k("div",{key:0,class:"fixed inset-0 bg-black/20 backdrop-blur-sm z-30 md:hidden",onClick:g[6]||(g[6]=(...y)=>p(l)&&p(l)(...y))})):L("",!0)]),_:1})],64)}}}),yu=Object.assign(hu,{__name:"MetaInfoPanel"}),bu={key:0,class:"conversation-thread"},xu={class:"px-2 py-0.5 rounded text-xs bg-emerald-100 text-emerald-700"},wu={key:0,class:"space-y-4 overflow-hidden"},_u={class:"flex items-center gap-2 mb-1.5"},ku={class:"text-xs font-medium"},Cu={key:0,class:"text-xs text-gray-400"},$u=["innerHTML"],Su={key:1,class:"text-sm text-gray-700 py-2"},Au={key:0,class:"message-item assistant"},Mu={class:"message-content pl-4 border-l-2 border-emerald-300 bg-emerald-50/30"},Eu=["innerHTML"],Tu=R({__name:"ConversationThread",props:{messages:{},isGenerating:{type:Boolean},currentAnswer:{}},setup(e){const t=e,s=E(!1),o=a=>{const l=new Date(a),u=new Date().getTime()-l.getTime();return u<6e4?"":u<36e5?`${Math.floor(u/6e4)} `:u<864e5?`${Math.floor(u/36e5)} `:l.toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},r=a=>a?ft(a,{breaks:!0}):"";return J(()=>t.messages.length,(a,l)=>{a>l&&(s.value=!1)}),(a,l)=>e.messages.length>0?(_(),k("div",bu,[n("button",{onClick:l[0]||(l[0]=i=>s.value=!p(s)),class:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-emerald-700 transition-colors mb-3"},[(_(),k("svg",{class:q(["w-4 h-4 transition-transform",!p(s)&&"rotate-90"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[1]||(l[1]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)),l[2]||(l[2]=n("span",null," ",-1)),n("span",xu,M(Math.floor(e.messages.length/2))+"  ",1)]),B(oe,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-screen","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 max-h-screen","leave-to-class":"opacity-0 max-h-0"},{default:A(()=>[p(s)?L("",!0):(_(),k("div",wu,[(_(!0),k(Q,null,ie(e.messages,(i,u)=>(_(),k("div",{key:u,class:q(["message-item",i.role])},[n("div",_u,[n("span",ku,M(i.role==="user"?" ":" AI "),1),i.timestamp?(_(),k("span",Cu,M(o(i.timestamp)),1)):L("",!0)]),n("div",{class:q(["message-content pl-4 border-l-2 transition-colors",[i.role==="user"?"border-blue-300 bg-blue-50/30":"border-emerald-300 bg-emerald-50/30"]])},[i.role==="assistant"?(_(),k("div",{key:0,class:"prose prose-sm max-w-none",innerHTML:r(i.content)},null,8,$u)):(_(),k("p",Su,M(i.content),1))],2)],2))),128)),e.isGenerating&&e.currentAnswer?(_(),k("div",Au,[l[4]||(l[4]=n("div",{class:"flex items-center gap-2 mb-1.5"},[n("span",{class:"text-xs font-medium"}," AI "),n("div",{class:"flex items-center gap-1 text-xs text-emerald-600"},[n("div",{class:"animate-spin h-3 w-3 border-2 border-emerald-600 border-t-transparent rounded-full"}),n("span",null,"...")])],-1)),n("div",Mu,[n("div",{class:"prose prose-sm max-w-none",innerHTML:r(e.currentAnswer)},null,8,Eu),l[3]||(l[3]=n("span",{class:"inline-block w-0.5 h-4 bg-emerald-600 animate-blink ml-1 align-middle"},null,-1))])])):L("",!0)]))]),_:1})])):L("",!0)}}),Bu=Object.assign($e(Tu,[["__scopeId","data-v-28b9a8c7"]]),{__name:"ConversationThread"}),Lu={class:"follow-up-section"},Ou={class:"flex flex-wrap gap-2 mb-3"},Iu=["onClick","disabled"],Pu={class:"mr-1"},Ru={key:0,class:"flex gap-2"},zu={class:"flex gap-2"},Hu=["disabled"],ju=["disabled"],Du={key:0,class:"text-xs text-gray-400 mt-2"},qu=R({__name:"FollowUpButtons",props:{buttons:{},loading:{type:Boolean},disabled:{type:Boolean}},emits:["select"],setup(e,{emit:t}){const s=e,o=t,r=E(""),a=i=>{s.disabled||s.loading||(o("select",i.label),r.value="")},l=()=>{const i=r.value.trim();!i||s.disabled||s.loading||(o("select",i),r.value="")};return(i,u)=>(_(),k("div",Lu,[u[1]||(u[1]=n("p",{class:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},[n("span",null,""),n("span",null,"")],-1)),n("div",Ou,[(_(!0),k(Q,null,ie(e.buttons,d=>(_(),k("button",{key:d.id,onClick:c=>a(d),disabled:e.disabled||e.loading,class:q(["px-3 py-2 text-sm rounded-lg border transition-all",[e.disabled||e.loading?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-emerald-300 bg-emerald-50 hover:bg-emerald-100 hover:border-emerald-400 text-emerald-700 hover:shadow-sm active:scale-95"]])},[n("span",Pu,M(d.icon),1),n("span",null,M(d.label),1)],10,Iu))),128)),e.loading&&e.buttons.length===0?(_(),k("div",Ru,[(_(),k(Q,null,ie(3,d=>n("div",{key:d,class:"px-3 py-2 rounded-lg bg-gray-100 animate-pulse",style:{width:"120px",height:"36px"}})),64))])):L("",!0)]),n("div",zu,[ye(n("input",{"onUpdate:modelValue":u[0]||(u[0]=d=>he(r)?r.value=d:null),onKeydown:qt(l,["enter"]),disabled:e.disabled||e.loading,placeholder:" ...",class:q(["flex-1 min-w-0 px-3 py-2 text-sm rounded-lg border border-gray-300 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all",[e.disabled||e.loading?"bg-gray-50 text-gray-400 cursor-not-allowed":"bg-white"]])},null,42,Hu),[[vt,p(r)]]),p(r).trim()?(_(),k("button",{key:0,onClick:l,disabled:e.disabled||e.loading,class:q(["px-4 py-2 text-sm font-medium rounded-lg transition-all",[e.disabled||e.loading?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700 active:scale-95"]])},"  ",10,ju)):L("",!0)]),e.disabled?L("",!0):(_(),k("p",Du,"  Enter  "))]))}}),Nu=Object.assign($e(qu,[["__scopeId","data-v-1ab677ff"]]),{__name:"FollowUpButtons"}),ln="insightreader_stash",ts=50,Tn=()=>{const e=F("stash-items",()=>[]),{title:t,content:s}=Ne(),o=v=>{const f={id:`stash_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),articleTitle:t.value,articleContent:s.value,selectedText:v.selectedText,context:v.context,intent:v.intent,customQuestion:v.customQuestion,insight:v.insight,reasoning:v.reasoning,conversationHistory:v.conversationHistory?[...v.conversationHistory]:void 0,modelUsed:v.modelUsed,tokens:v.tokens};return e.value.unshift(f),e.value.length>ts&&(e.value=e.value.slice(0,ts)),d(),console.log(" :",f.selectedText.substring(0,20),"..."),f},r=v=>{const f=e.value.findIndex(g=>g.id===v);if(f>-1){const g=e.value.splice(f,1)[0];d(),console.log(" :",g.selectedText.substring(0,20),"...")}},a=()=>{const v=e.value.length;e.value=[],localStorage.removeItem(ln),console.log(" :",v,"")},l=(v,f)=>{const g=e.value.splice(v,1)[0];e.value.splice(f,0,g),d()},i=(v,f)=>e.value.some(g=>g.selectedText===v&&g.insight===f),u=()=>{try{const v=localStorage.getItem(ln);v&&(e.value=JSON.parse(v),console.log(" :",e.value.length,""))}catch(v){console.error(":",v)}},d=()=>{try{localStorage.setItem(ln,JSON.stringify(e.value))}catch(v){console.error(":",v)}},c=()=>{const v=e.value.reduce((g,b)=>g+b.insight.length+(b.reasoning?.length||0),0),f=e.value.reduce((g,b)=>g+(b.conversationHistory?.length||0),0);return{count:e.value.length,totalWords:v,totalConversations:f,hasConversations:f>0,hasReasoning:e.value.some(g=>g.reasoning)}};return ge(()=>{u()}),{stashItems:de(e),addToStash:o,removeFromStash:r,clearStash:a,reorderStash:l,isStashed:i,getStats:c}},zs=()=>{const e=be();return{connect:async(s,o,r)=>{const a=`${e.public.apiBase}${s}`;try{const l=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!l.ok)throw new Error(`HTTP ${l.status}: ${l.statusText}`);const i=l.body?.getReader(),u=new TextDecoder;if(!i)throw new Error("");try{for(;;){const{done:d,value:c}=await i.read();if(d)break;const f=u.decode(c).split(`
`);for(const g of f)if(g.startsWith("data: ")){const b=g.substring(6);try{const x=JSON.parse(b);switch(x.type){case"start":r.onStart?.();break;case"delta":x.content&&r.onDelta?.(x.content);break;case"reasoning":x.content&&r.onReasoning?.(x.content);break;case"complete":r.onComplete?.(x.metadata);break;case"error":r.onError?.(x);break}}catch(x){console.error(" SSE ",x)}}}}finally{i.releaseLock()}}catch(l){throw r.onError?.({message:l instanceof Error?l.message:""}),l}}}},Vu=()=>{const e=be(),t=F("followup-conversation",()=>[]),s=F("followup-buttons",()=>[]),o=F("followup-generating-buttons",()=>!1),r=F("followup-generating-answer",()=>!1),a=F("followup-current-answer",()=>""),l=F("followup-current-reasoning",()=>""),i=F("followup-error",()=>null);return{conversationHistory:t,followUpButtons:s,isGeneratingButtons:o,isGeneratingAnswer:r,currentAnswer:a,currentReasoning:l,error:i,generateButtons:async(f,g,b)=>{o.value=!0,i.value=null;const x=[{id:"example_default",label:"",icon:"",category:"example"},{id:"simplify_default",label:"",icon:"",category:"simplify"},{id:"extend_default",label:"",icon:"",category:"extend"}];try{const h={selected_text:f,insight:g,intent:b,conversation_history:t.value},m=await $fetch(`${e.public.apiBase}/api/v1/insights/generate-buttons`,{method:"POST",body:h});m.status==="completed"&&m.buttons?(s.value=m.buttons,o.value=!1,console.log(" :",m.buttons.length,"")):m.status==="pending"&&(s.value=x,console.log(" ID:",m.task_id))}catch(h){console.error(" :",h),i.value=h instanceof Error?h.message:"",s.value=x,o.value=!1}},askFollowUp:async(f,g,b,x=!1)=>{r.value=!0,a.value="",l.value="",i.value=null;const h={role:"user",content:b,timestamp:Date.now()};t.value.push(h);try{const{connect:m}=zs(),w={selected_text:f,initial_insight:g,conversation_history:t.value.slice(0,-1),follow_up_question:b,use_reasoning:x};await m("/api/v1/insights/follow-up",w,{onStart:()=>{console.log(" ")},onDelta:y=>{a.value+=y},onReasoning:y=>{l.value+=y},onComplete:y=>{const $={role:"assistant",content:a.value,timestamp:Date.now()};t.value.push($),console.log(" ",{metadata:y,conversationLength:t.value.length}),r.value=!1},onError:y=>{i.value=y.message||"",r.value=!1,t.value.pop()}})}catch(m){i.value=m instanceof Error?m.message:"",r.value=!1,t.value.pop()}},clearConversation:()=>{t.value=[],s.value=[],a.value="",l.value="",i.value=null},undoLastQuestion:()=>{t.value.length>=2&&t.value.splice(-2,2)}}},Fu=globalThis.setInterval,Hs=()=>{const{user:e,token:t}=mt(),s=be();let o=null,r=null,a=0;const l=10,i=1e3,u=3e4;let d=Date.now(),c=null;const v=45e3,f=F("sse-connection-state",()=>"disconnected"),g=E(!1),b=new Map,x=[],h=[],m=[],w=[],y=()=>{r&&(clearTimeout(r),r=null)},$=()=>{c&&(clearInterval(c),c=null)},C=()=>{$(),d=Date.now(),c=Fu(()=>{Date.now()-d>v&&(console.warn("[SSE] "),O(),f.value="disconnected",P())},1e4)},z=()=>Math.min(i*Math.pow(2,a),u)+Math.random()*1e3,P=()=>{if(g.value){console.log("[SSE] ");return}if(a>=l){console.error("[SSE] "),f.value="failed";return}y();const N=z();console.log(`[SSE]  ${a+1}/${l}  ${Math.round(N)}ms`),f.value="reconnecting",r=setTimeout(()=>{a++,T()},N)},T=()=>{if(!e.value||!t.value){console.warn("[SSE]  token ");return}if(o&&o.readyState!==EventSource.CLOSED){console.log("[SSE] ");return}const N=`${s.public.apiBase}/api/v1/sse/analysis-notifications?token=${t.value}`;console.log("[SSE] :",a>0?`( ${a} )`:"()");try{o=new EventSource(N),f.value="connecting",o.onopen=()=>{console.log("[SSE] "),f.value="connected",a=0,y(),C()},o.addEventListener("connected",Y=>{const U=JSON.parse(Y.data);console.log("[SSE] ID:",U.user_id),d=Date.now()}),o.addEventListener("task_started",Y=>{const U=JSON.parse(Y.data);console.log("[SSE] :",U.task_type,U.task_id)}),o.addEventListener("task_completed",async Y=>{const U=JSON.parse(Y.data);if(console.log("[SSE] :",U.task_type,U.task_id),U.task_type==="article_analysis"||U.task_type==="article_reanalysis"){const ce=U.result.article_id,De=b.get(ce);De&&await De(ce),await te(ce)}else if(U.task_type==="meta_analysis")for(const ce of x)await ce(U.result.article_id,U.result.meta_analysis);else if(U.task_type.startsWith("thinking_lens_")){const ce=U.task_type.replace("thinking_lens_","");for(const De of h)await De(ce,U.result.lens_result)}else if(U.task_type==="button_generation")for(const ce of m)await ce(U.result.buttons)}),o.addEventListener("task_failed",Y=>{const U=JSON.parse(Y.data);console.error("[SSE] :",U.task_type,U.error);for(const ce of w)ce(U.task_type,U.error);showToast({message:`: ${U.error}`,type:"error"})}),o.addEventListener("heartbeat",Y=>{d=Date.now()}),o.onerror=Y=>{console.error("[SSE] :",Y),o?.readyState===EventSource.CONNECTING?(console.log("[SSE] ..."),f.value="reconnecting"):o?.readyState===EventSource.CLOSED&&(console.warn("[SSE] "),O(),f.value="disconnected",P())}}catch(Y){console.error("[SSE] :",Y),f.value="failed",P()}},O=()=>{$(),o&&(o.close(),o=null,console.log("[SSE] "))},I=()=>{g.value=!0,y(),$(),o&&(o.close(),o=null,console.log("[SSE] ")),f.value="disconnected",a=0},K=(N,Y)=>{b.set(N,Y)},W=N=>{x.push(N)},ne=N=>{h.push(N)},X=N=>{m.push(N)},re=N=>{w.push(N)},te=async N=>{console.log("  ID:",N)};return ge(()=>{T()}),Ge(()=>{I()}),{connect:T,disconnect:I,reconnect:()=>{g.value=!1,a=0,T()},connectionState:de(f),isManuallyDisconnected:de(g),onAnalysisComplete:K,onMetaAnalysisComplete:W,onLensComplete:ne,onButtonGenerationComplete:X,onTaskFailed:re}},Wu={class:"p-6 h-full flex flex-col"},Uu={class:"flex-1 overflow-auto"},Gu={key:0,class:"bg-red-50 border-l-4 border-red-500 rounded-r-lg p-4 mb-4"},Ku={class:"flex items-start gap-3"},Yu={class:"text-red-700 text-sm"},Xu={key:"content"},Ju={key:0,class:"flex items-center gap-3 text-gray-700 mb-6 p-4 bg-emerald-50 rounded-xl border border-emerald-100"},Qu={key:1,class:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden"},Zu={key:0,class:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex justify-end gap-2"},e0=["disabled"],t0={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n0={key:1,class:"animate-spin h-4 w-4 border-2 border-amber-600 border-t-transparent rounded-full"},s0={key:1,class:"flex items-center gap-2 text-amber-700 text-sm px-3 py-1.5 bg-amber-50 rounded-lg border border-amber-200"},o0={key:0,class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r0={key:1,class:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full mr-2"},a0={key:3,class:"flex items-center gap-2 text-green-700 text-sm px-3 py-1.5 bg-green-50 rounded-lg border border-green-200"},l0={class:"px-6 py-6"},i0={key:0,class:"mb-6"},c0={key:0,class:"p-4 bg-gray-50 rounded-xl border border-gray-200 mb-6 overflow-hidden"},d0={key:0,class:"flex items-center gap-2 text-gray-500 text-sm"},u0=["innerHTML"],f0={key:2,class:"inline-block w-0.5 h-5 bg-emerald-600 animate-blink ml-1 align-middle"},p0=["innerHTML"],g0={key:1,class:"inline-block w-0.5 h-5 bg-emerald-600 animate-blink ml-1 align-middle"},v0={key:2,class:"mt-6 pt-6 border-t border-gray-100"},m0={key:"empty",class:"text-center py-20 animate-fade-in"},h0=R({__name:"InsightPane",props:{insight:{},reasoning:{},isLoading:{type:Boolean},error:{},currentRequest:{},useReasoning:{type:Boolean}},setup(e){const t=e,{isAuthenticated:s}=mt(),{saveInsight:o}=zo(),{addToStash:r,isStashed:a}=Tn(),{conversationHistory:l,followUpButtons:i,isGeneratingButtons:u,isGeneratingAnswer:d,currentAnswer:c,generateButtons:v,askFollowUp:f,clearConversation:g}=Vu(),{onButtonGenerationComplete:b}=Hs(),x=E(!1),h=E(!1),m=E(!1),w=S(()=>!t.insight||!t.currentRequest?!1:a(t.currentRequest.selected_text,t.insight)),y=E(!0),$=S(()=>t.insight?ft(t.insight,{breaks:!0}):""),C=S(()=>t.reasoning?ft(t.reasoning,{breaks:!0}):"");J(()=>t.reasoning,O=>{O&&O.length>0&&(y.value=!0)}),ge(()=>{b(O=>{console.log(" :",O.length,"",O),i.value=O,u.value=!1,console.log(" :",i.value.length,":",u.value)})}),J(()=>[t.insight,t.isLoading],([O,I],[K,W])=>{!I&&W&&O&&t.currentRequest&&v(t.currentRequest.selected_text,O,t.currentRequest.intent)}),J(()=>t.insight,(O,I)=>{O!==I&&O&&(h.value=!1,g())});const z=async()=>{if(!t.currentRequest){alert("");return}x.value=!0;const O=await o({selected_text:t.currentRequest.selected_text,context:t.currentRequest.context,intent:t.currentRequest.intent,custom_question:t.currentRequest.custom_question,insight:t.insight});x.value=!1,O.success?(h.value=!0,setTimeout(()=>{h.value=!1},3e3)):alert(O.error||"")},P=async()=>{if(!t.currentRequest||!t.insight){alert("");return}m.value=!0;try{r({selectedText:t.currentRequest.selected_text,context:t.currentRequest.context,intent:t.currentRequest.intent,customQuestion:t.currentRequest.custom_question,insight:t.insight,reasoning:t.reasoning||void 0,conversationHistory:l.value.length>0?[...l.value]:void 0}),console.log(" "),setTimeout(()=>{m.value=!1},500)}catch(O){console.error(":",O),alert(""),m.value=!1}},T=async O=>{if(!t.currentRequest||!t.insight)return;const I=F("use-reasoning",()=>!1);await f(t.currentRequest.selected_text,t.insight,O,I.value),c.value&&v(t.currentRequest.selected_text,t.insight,t.currentRequest.intent)};return(O,I)=>{const K=bn,W=Bu,ne=Nu;return _(),k("div",Wu,[I[13]||(I[13]=Xe('<div class="mb-6" data-v-7f8667c9><div class="flex items-center gap-2 mb-2" data-v-7f8667c9><div class="w-8 h-8 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center" data-v-7f8667c9><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-7f8667c9><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" data-v-7f8667c9></path></svg></div><h2 class="text-lg font-semibold text-gray-900" data-v-7f8667c9>AI </h2></div><p class="text-sm text-gray-500" data-v-7f8667c9></p></div>',1)),n("div",Uu,[B(oe,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0"},{default:A(()=>[e.error?(_(),k("div",Gu,[n("div",Ku,[I[2]||(I[2]=n("svg",{class:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n("div",null,[I[1]||(I[1]=n("p",{class:"text-red-800 text-sm font-medium mb-1"},"",-1)),n("p",Yu,M(e.error),1)])])])):L("",!0)]),_:1}),B(oe,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0",mode:"out-in"},{default:A(()=>[e.insight||e.reasoning||e.isLoading?(_(),k("div",Xu,[e.isLoading&&!e.insight&&!e.reasoning?(_(),k("div",Ju,[...I[3]||(I[3]=[n("div",{class:"relative"},[n("div",{class:"animate-spin h-5 w-5 border-2 border-emerald-600 border-t-transparent rounded-full"}),n("div",{class:"absolute inset-0 animate-ping h-5 w-5 border-2 border-emerald-400 border-t-transparent rounded-full opacity-20"})],-1),n("div",null,[n("p",{class:"text-sm font-semibold"},"AI ..."),n("p",{class:"text-xs text-gray-600 mt-0.5"},"")],-1)])])):L("",!0),e.insight||e.reasoning||e.isLoading&&e.useReasoning?(_(),k("div",Qu,[e.isLoading?L("",!0):(_(),k("div",Zu,[p(w)?(_(),k("div",s0,[...I[5]||(I[5]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),n("span",{class:"font-medium"},"",-1)])])):(_(),k("button",{key:0,onClick:P,disabled:p(m),class:q(["px-3 py-1.5 text-sm font-medium rounded-lg transition-all flex items-center gap-1.5",[p(m)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-amber-50 text-amber-700 border border-amber-200 hover:bg-amber-100 hover:border-amber-300"]])},[p(m)?(_(),k("div",n0)):(_(),k("svg",t0,[...I[4]||(I[4]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"},null,-1)])])),n("span",null,M(p(m)?"...":" "),1)],10,e0)),p(s)&&!p(h)?(_(),H(K,{key:2,variant:"outline",size:"sm",onClick:z,disabled:p(x),class:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all"},{default:A(()=>[p(x)?(_(),k("div",r0)):(_(),k("svg",o0,[...I[6]||(I[6]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"},null,-1)])])),Z(" "+M(p(x)?"...":""),1)]),_:1},8,["disabled"])):p(s)&&p(h)?(_(),k("div",a0,[...I[7]||(I[7]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),n("span",{class:"font-medium"},"",-1)])])):L("",!0)])),n("div",l0,[e.useReasoning||e.reasoning?(_(),k("div",i0,[n("button",{onClick:I[0]||(I[0]=X=>y.value=!p(y)),class:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-emerald-700 transition-colors mb-3"},[(_(),k("svg",{class:q(["w-4 h-4 transition-transform",p(y)&&"rotate-90"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...I[8]||(I[8]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)),I[9]||(I[9]=n("span",null,"",-1)),I[10]||(I[10]=n("span",{class:"px-2 py-0.5 rounded text-xs bg-emerald-100 text-emerald-700"},"",-1))]),p(y)?(_(),k("div",c0,[!e.reasoning&&e.isLoading?(_(),k("div",d0,[...I[11]||(I[11]=[n("div",{class:"animate-spin h-4 w-4 border-2 border-emerald-600 border-t-transparent rounded-full"},null,-1),n("span",null,"AI ...",-1)])])):(_(),k("div",{key:1,class:"prose prose-sm max-w-none text-gray-700",innerHTML:p(C)},null,8,u0)),e.isLoading&&e.reasoning?(_(),k("span",f0)):L("",!0)])):L("",!0)])):L("",!0),n("div",{class:"prose prose-sm max-w-none",innerHTML:p($)},null,8,p0),e.isLoading?(_(),k("span",g0)):L("",!0),!e.isLoading&&e.insight?(_(),k("div",v0,[p(l).length>0||p(d)&&p(c)?(_(),H(W,{key:0,messages:p(l),"is-generating":p(d),"current-answer":p(c),class:"mb-6"},null,8,["messages","is-generating","current-answer"])):L("",!0),B(ne,{buttons:p(i),loading:p(u)||p(d),disabled:p(d),onSelect:T},null,8,["buttons","loading","disabled"])])):L("",!0)])])):L("",!0)])):(_(),k("div",m0,[...I[12]||(I[12]=[n("div",{class:"mb-6 relative"},[n("div",{class:"absolute inset-0 flex items-center justify-center"},[n("div",{class:"w-24 h-24 bg-emerald-100 rounded-full animate-pulse opacity-20"})]),n("svg",{class:"w-20 h-20 mx-auto text-emerald-500 relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})])],-1),n("h3",{class:"text-xl font-semibold text-gray-700 mb-3"},"",-1),n("p",{class:"text-gray-500 mb-2"},"",-1),n("p",{class:"text-sm text-gray-400"},"AI ",-1)])]))]),_:1})])])}}}),y0=Object.assign($e(h0,[["__scopeId","data-v-7f8667c9"]]),{__name:"InsightPane"}),js=()=>{const e=[{type:"md",label:"Markdown (.md)",mimeType:"text/markdown;charset=utf-8",extension:"md"},{type:"txt",label:" (.txt)",mimeType:"text/plain;charset=utf-8",extension:"txt"}],t=u=>({explain:"",analyze:"",counter:""})[u]||u,s=u=>new Date(u).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),o=u=>{if(u.length===0)return"";const d=u[0],c=d.articleTitle||"",v=d.articleContent;let f=`# ${c}

`;return f+=` ${new Date().toLocaleString("zh-CN")}
`,f+=`  ${u.length} 

`,f+=`---

`,v&&v.trim()&&(f+=`##  

`,f+=`${v}

`,f+=`---

`),f+=`##  

`,u.forEach((g,b)=>{f+=`### ${b+1}. "${g.selectedText}"

`,f+=`- ****${t(g.intent)}
`,f+=`- ****${s(g.timestamp)}
`,g.modelUsed&&(f+=`- ****${g.modelUsed}
`),g.customQuestion&&(f+=`- ****${g.customQuestion}
`),f+=`
`,g.context&&g.context.trim()&&(f+=`****

`,f+=`> ${g.context.replace(/\n/g,`
> `)}

`),g.reasoning&&g.reasoning.trim()&&(f+=`####  

`,f+=`${g.reasoning}

`),f+=`####  

`,f+=`${g.insight}

`,g.conversationHistory&&g.conversationHistory.length>0&&(f+=`####  ${g.conversationHistory.length/2} 

`,g.conversationHistory.forEach(x=>{const h=x.role==="user"?"****":"**AI**";f+=`${h}${x.content}

`})),f+=`---

`}),f+=`
>   InsightReader  | [https://insightreader.ai](https://insightreader.ai)
`,f},r=u=>{if(u.length===0)return"";const d=u[0],c=d.articleTitle||"",v=d.articleContent;let f=`${c}
`;return f+=`${"=".repeat(c.length)}

`,f+=`${new Date().toLocaleString("zh-CN")}
`,f+=` ${u.length} 

`,f+=`${"-".repeat(60)}

`,v&&v.trim()&&(f+=`

`,f+=`${v}

`,f+=`${"-".repeat(60)}

`),f+=`

`,u.forEach((g,b)=>{f+=`${b+1}. "${g.selectedText}"

`,f+=`${t(g.intent)}
`,f+=`${s(g.timestamp)}
`,g.customQuestion&&(f+=`${g.customQuestion}
`),f+=`
`,g.context&&g.context.trim()&&(f+=`
${g.context}

`),g.reasoning&&g.reasoning.trim()&&(f+=`
${g.reasoning}

`),f+=`
${g.insight}

`,g.conversationHistory&&g.conversationHistory.length>0&&(f+=`${g.conversationHistory.length/2} 
`,g.conversationHistory.forEach(x=>{const h=x.role==="user"?"":"AI";f+=`${h}${x.content}
`}),f+=`
`),f+=`${"-".repeat(60)}

`}),f+=`
 InsightReader 
`,f},a=(u,d,c)=>{try{const f=new Blob(["\uFEFF"+u],{type:c}),g=URL.createObjectURL(f),b=document.createElement("a");b.href=g,b.download=d,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(g),console.log(" :",d)}catch(v){throw console.error(":",v),v}};return{exportFormats:e,exportInsights:(u,d="md",c)=>{if(u.length===0)throw new Error("");const v=new Date().toISOString().split("T")[0],b=`${(u[0].articleTitle||"").replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g,"_").substring(0,30)}_${v}`;let x,h,m;switch(d){case"md":x=o(u),h="text/markdown;charset=utf-8",m="md";break;case"txt":x=r(u),h="text/plain;charset=utf-8",m="txt";break;default:throw new Error("")}const w=c?`${c}.${m}`:`${b}.${m}`;a(x,w,h)},exportAsMarkdown:o,exportAsText:r,copyToClipboard:async(u,d="md")=>{try{const c=d==="md"?o(u):r(u);return await navigator.clipboard.writeText(c),console.log(" "),!0}catch(c){return console.error(":",c),!1}},getIntentLabel:t,formatTime:s}},b0={class:"px-6 py-5 space-y-5"},x0={class:"flex items-center gap-2 text-sm text-gray-600 bg-gray-50 rounded-lg p-3"},w0={class:"text-emerald-700"},_0={class:"space-y-2"},k0=["value"],C0={class:"flex-1"},$0={class:"font-medium text-gray-900"},S0={class:"text-xs text-gray-500"},A0={class:"flex items-center gap-2"},M0={class:"text-sm text-gray-500"},E0={class:"text-xs text-gray-500 mt-1"},T0={class:"space-y-2"},B0={class:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer"},L0={class:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer"},O0={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3"},I0=["disabled"],P0={key:0,class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"},R0=R({__name:"ExportDialog",props:{show:{type:Boolean},items:{}},emits:["close","exported"],setup(e,{emit:t}){const s=e,o=t,{exportInsights:r,exportFormats:a}=js(),l=E("md"),i=E(""),u=E(!0),d=E(!0),c=E(!1),v=S(()=>s.items.length),f=S(()=>{const m=new Date().toISOString().split("T")[0];return`${(s.items[0]?.articleTitle||"").replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g,"_").substring(0,30)}_${m}`}),g=m=>m==="md"?"md":"txt",b=m=>({md:" NotionObsidian ",txt:""})[m],x=()=>{c.value||o("close")},h=async()=>{if(!(c.value||s.items.length===0)){c.value=!0;try{const m=s.items.map(w=>({...w,conversationHistory:u.value?w.conversationHistory:void 0,reasoning:d.value?w.reasoning:void 0}));r(m,l.value,i.value.trim()||void 0),console.log(" "),setTimeout(()=>{o("exported"),o("close"),c.value=!1},500)}catch(m){console.error(":",m),alert(""+(m instanceof Error?m.message:"")),c.value=!1}}};return J(()=>s.show,m=>{m&&(l.value="md",i.value="",u.value=!0,d.value=!0)}),(m,w)=>(_(),H(oe,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.show?(_(),k("div",{key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:we(x,["self"])},[B(oe,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:A(()=>[e.show?(_(),k("div",{key:0,class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",onClick:w[4]||(w[4]=we(()=>{},["stop"]))},[n("div",{class:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-emerald-50 to-white"},[n("div",{class:"flex items-center justify-between"},[w[6]||(w[6]=n("div",{class:"flex items-center gap-3"},[n("div",{class:"w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center"},[n("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])]),n("div",null,[n("h3",{class:"text-lg font-semibold text-gray-900"},""),n("p",{class:"text-sm text-gray-500"},"")])],-1)),n("button",{onClick:x,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...w[5]||(w[5]=[n("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),n("div",b0,[n("div",x0,[w[9]||(w[9]=n("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),n("span",null,[w[7]||(w[7]=Z(" ",-1)),n("strong",w0,M(p(v)),1),w[8]||(w[8]=Z(" ",-1))])]),n("div",null,[w[10]||(w[10]=n("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),n("div",_0,[(_(!0),k(Q,null,ie(p(a),y=>(_(),k("label",{key:y.type,class:q(["flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-all",[p(l)===y.type?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-emerald-300 hover:bg-gray-50"]])},[ye(n("input",{type:"radio",value:y.type,"onUpdate:modelValue":w[0]||(w[0]=$=>he(l)?l.value=$:null),class:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"},null,8,k0),[[Lo,p(l)]]),n("div",C0,[n("div",$0,M(y.label),1),n("div",S0,M(b(y.type)),1)])],2))),128))])]),n("div",null,[w[11]||(w[11]=n("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),n("div",A0,[ye(n("input",{"onUpdate:modelValue":w[1]||(w[1]=y=>he(i)?i.value=y:null),type:"text",placeholder:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none text-sm"},null,512),[[vt,p(i)]]),n("span",M0,"."+M(g(p(l))),1)]),n("p",E0," "+M(p(f))+"."+M(g(p(l))),1)]),n("div",T0,[n("label",B0,[ye(n("input",{type:"checkbox","onUpdate:modelValue":w[2]||(w[2]=y=>he(u)?u.value=y:null),class:"w-4 h-4 text-emerald-600 focus:ring-emerald-500 rounded"},null,512),[[un,p(u)]]),w[12]||(w[12]=n("span",null,"",-1))]),n("label",L0,[ye(n("input",{type:"checkbox","onUpdate:modelValue":w[3]||(w[3]=y=>he(d)?d.value=y:null),class:"w-4 h-4 text-emerald-600 focus:ring-emerald-500 rounded"},null,512),[[un,p(d)]]),w[13]||(w[13]=n("span",null,"",-1))])])]),n("div",O0,[n("button",{onClick:x,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},"  "),n("button",{onClick:h,disabled:p(c),class:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2"},[p(c)?(_(),k("div",P0)):L("",!0),n("span",null,M(p(c)?"...":""),1)],8,I0)])])):L("",!0)]),_:1})])):L("",!0)]),_:1}))}}),z0=Object.assign(R0,{__name:"ExportDialog"}),H0={class:"stash-panel h-full flex flex-col"},j0={class:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white"},D0={class:"flex items-center justify-between mb-3"},q0={class:"flex items-center gap-2"},N0={class:"text-lg font-semibold text-gray-900"},V0={key:0,class:"text-emerald-600"},F0={class:"flex items-center gap-2"},W0={key:0,class:"flex items-center gap-4 text-xs text-gray-600"},U0={key:0},G0={key:1},K0={class:"flex-1 overflow-auto"},Y0={key:0,class:"flex flex-col items-center justify-center h-full text-center py-20 px-6"},X0={key:1,class:"p-4 space-y-3"},J0={class:"px-4 py-3 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100"},Q0={class:"flex items-start justify-between gap-3"},Z0={class:"flex-1 min-w-0"},ef={class:"text-sm font-medium text-gray-900 truncate mb-1"},tf={class:"flex items-center gap-3 text-xs text-gray-500"},nf={class:"flex items-center gap-1"},sf={class:"flex items-center gap-1"},of=["onClick"],rf=["onClick"],af={class:"px-4 py-3"},lf={class:"text-sm text-gray-600 line-clamp-2"},cf={key:0,class:"mt-2 flex items-center gap-1 text-xs text-emerald-600"},df=R({__name:"StashPanel",emits:["viewItem"],setup(e,{emit:t}){const s=t,{stashItems:o,removeFromStash:r,clearStash:a,getStats:l}=Tn(),{formatTime:i,getIntentLabel:u}=js(),d=E(!1),c=S(()=>l()),v=(h,m)=>h.length<=m?h:h.substring(0,m)+"...",f=h=>{confirm("")&&r(h)},g=()=>{confirm(` ${c.value.count} `)&&a()},b=h=>{s("viewItem",h)},x=()=>{console.log(" ")};return(h,m)=>{const w=z0;return _(),k("div",H0,[n("div",j0,[n("div",D0,[n("div",q0,[m[3]||(m[3]=n("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)),n("h3",N0,[m[2]||(m[2]=Z("  ",-1)),p(c).count>0?(_(),k("span",V0,"("+M(p(c).count)+")",1)):L("",!0)])]),n("div",F0,[p(c).count>0?(_(),k("button",{key:0,onClick:m[0]||(m[0]=y=>d.value=!0),class:"px-3 py-1.5 text-sm font-medium text-emerald-700 bg-emerald-100 hover:bg-emerald-200 rounded-lg transition-colors flex items-center gap-1"},[...m[4]||(m[4]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),n("span",null,"",-1)])])):L("",!0),p(c).count>0?(_(),k("button",{key:1,onClick:g,class:"px-3 py-1.5 text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100 rounded-lg transition-colors flex items-center gap-1"},[...m[5]||(m[5]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),n("span",null,"",-1)])])):L("",!0)])]),p(c).count>0?(_(),k("div",W0,[n("span",null," "+M(p(c).totalWords)+" ",1),p(c).hasConversations?(_(),k("span",U0," "+M(p(c).totalConversations)+" ",1)):L("",!0),p(c).hasReasoning?(_(),k("span",G0," ")):L("",!0)])):L("",!0)]),n("div",K0,[p(o).length===0?(_(),k("div",Y0,[...m[6]||(m[6]=[Xe('<div class="mb-6 relative" data-v-2f30ae25><div class="absolute inset-0 flex items-center justify-center" data-v-2f30ae25><div class="w-24 h-24 bg-gray-100 rounded-full animate-pulse opacity-20" data-v-2f30ae25></div></div><svg class="w-20 h-20 mx-auto text-gray-300 relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2f30ae25><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" data-v-2f30ae25></path></svg></div><h3 class="text-lg font-semibold text-gray-700 mb-2" data-v-2f30ae25></h3><p class="text-sm text-gray-500 mb-1" data-v-2f30ae25>&quot;&quot;</p><p class="text-xs text-gray-400" data-v-2f30ae25></p>',4)])])):(_(),k("div",X0,[(_(!0),k(Q,null,ie(p(o),(y,$)=>(_(),k("div",{key:y.id,class:"stash-item bg-white rounded-xl border border-gray-200 hover:border-emerald-300 hover:shadow-md transition-all overflow-hidden"},[n("div",J0,[n("div",Q0,[n("div",Z0,[n("h4",ef,M($+1)+'. "'+M(v(y.selectedText,40))+'" ',1),n("div",tf,[n("span",nf,[m[7]||(m[7]=n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Z(" "+M(p(i)(y.timestamp)),1)]),n("span",null,M(p(u)(y.intent)),1),n("span",null,M(y.insight.length)+" ",1)])]),n("div",sf,[n("button",{onClick:C=>b(y),class:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded transition-colors",title:""},[...m[8]||(m[8]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,of),n("button",{onClick:C=>f(y.id),class:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:""},[...m[9]||(m[9]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,rf)])])]),n("div",af,[n("p",lf,M(v(y.insight,100)),1),y.conversationHistory&&y.conversationHistory.length>0?(_(),k("div",cf,[m[10]||(m[10]=n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),n("span",null," "+M(y.conversationHistory.length/2)+" ",1)])):L("",!0)])]))),128))]))]),B(w,{show:p(d),items:p(o),onClose:m[1]||(m[1]=y=>d.value=!1),onExported:x},null,8,["show","items"])])}}}),uf=Object.assign($e(df,[["__scopeId","data-v-2f30ae25"]]),{__name:"StashPanel"}),ff={class:"flex h-[calc(100vh-64px)]"},pf={class:"flex-1 overflow-auto relative"},gf={class:"w-px bg-gradient-to-b from-transparent via-gray-200 to-transparent shadow-sm"},vf={class:"w-[580px] overflow-auto relative bg-gradient-to-br from-white via-slate-50/30 to-white"},mf={class:"relative z-10"},hf=R({__name:"ReaderLayout",setup(e,{expose:t}){const s=E(!1);return t({togglePanel:()=>{s.value=!s.value}}),(r,a)=>(_(),k("div",ff,[n("div",pf,[a[0]||(a[0]=n("div",{class:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none"},null,-1)),V(r.$slots,"left",{},void 0,!0)]),ye(n("div",gf,null,512),[[It,p(s)]]),B(oe,{name:"slide-fade"},{default:A(()=>[ye(n("div",vf,[a[1]||(a[1]=n("div",{class:"absolute inset-0 bg-[radial-gradient(#e5e7eb_0.5px,transparent_0.5px)] [background-size:12px_12px] opacity-20 pointer-events-none"},null,-1)),n("div",mf,[V(r.$slots,"right",{},void 0,!0)])],512),[[It,p(s)]])]),_:3})]))}}),yf=Object.assign($e(hf,[["__scopeId","data-v-196a4ca1"]]),{__name:"ReaderLayout"}),bf=R({__name:"SelectionTrigger",props:{show:{type:Boolean},position:{}},emits:["click","close"],setup(e,{emit:t}){const s=e,o=t,r=S(()=>{if(!s.show)return{};const i=48,u=8;let d=s.position.x,c=s.position.y;return{left:`${d+u}px`,top:`${c-i-u}px`}}),a=()=>{o("click")},l=()=>{o("close")};return(i,u)=>(_(),k(Q,null,[B(oe,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.show?(_(),k("div",{key:0,class:"fixed inset-0 z-40",onClick:l})):L("",!0)]),_:1}),B(oe,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 scale-90","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-90"},{default:A(()=>[e.show?(_(),k("button",{key:0,style:pe(p(r)),onClick:we(a,["stop"]),class:"fixed z-50 w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 rounded-full shadow-lg hover:shadow-xl flex items-center justify-center transition-all group",title:"AI "},[...u[0]||(u[0]=[n("svg",{class:"w-6 h-6 text-white group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),n("span",{class:"absolute inset-0 rounded-full bg-emerald-400 opacity-75 animate-ping"},null,-1)])],4)):L("",!0)]),_:1})],64))}}),xf=Object.assign($e(bf,[["__scopeId","data-v-583b2f40"]]),{__name:"SelectionTrigger"}),wf={class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-zinc-50 border-b border-gray-200 flex items-start justify-between gap-2"},_f={class:"flex items-start space-x-2 flex-1 min-w-0"},kf={class:"text-sm text-gray-700 line-clamp-2 leading-relaxed"},Cf={class:"p-4 space-y-2"},$f=["onClick"],Sf={class:"flex-1"},Af={class:"font-medium text-gray-900 group-hover:text-emerald-700 transition-colors"},Mf={class:"text-xs text-gray-500 mt-0.5"},Ef={class:"px-4 pb-3 border-b border-gray-100"},Tf={class:"flex items-center justify-between cursor-pointer group"},Bf={class:"relative"},Lf={class:"px-4 pb-4"},Of={class:"pt-3 border-t border-gray-100"},If={class:"relative"},Pf={key:0,class:"absolute left-1/2 transform -translate-x-1/2 -bottom-2"},Rf={key:1,class:"absolute left-1/2 transform -translate-x-1/2 -top-2"},zf=R({__name:"IntentButtons",props:{show:{type:Boolean},position:{},selectedText:{}},emits:["select","close"],setup(e,{emit:t}){const s=e,o=t,r=E(""),a=E(null),l=E(null),i=E(!1),u=E(!1),d=S(()=>{if(!s.show)return{};const b=window.innerHeight,x=window.innerWidth,h=450,m=384,w=20,y=16;let $=s.position.x,C=s.position.y;const z=b-C,P=C;z<h+w&&P>z?(u.value=!0,C=C-h-y):(u.value=!1,C=C+y);let T=$;const O=m/2;return T-O<w?T=O+w:T+O>x-w&&(T=x-O-w),C<w?C=w:C+h>b-w&&(C=b-h-w),{left:`${T}px`,top:`${C}px`,transform:"translateX(-50%)"}}),c=[{type:"explain",label:"",description:"",color:"bg-emerald-100 text-emerald-600",icon:R({template:`
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      `})},{type:"analyze",label:"",description:"",color:"bg-teal-100 text-teal-600",icon:R({template:`
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
        </svg>
      `})},{type:"counter",label:"",description:"",color:"bg-slate-100 text-slate-600",icon:R({template:`
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
        </svg>
      `})}],v=b=>{o("select",b,void 0,i.value),r.value=""},f=()=>{r.value.trim()&&(o("select","custom",r.value,i.value),r.value="")},g=()=>{o("close"),r.value=""};return J(()=>s.show,b=>{b&&Re(()=>{})}),(b,x)=>{const h=bn,m=Pt,w=Rt;return _(),k(Q,null,[B(oe,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.show?(_(),k("div",{key:0,class:"fixed inset-0 z-40",onClick:g})):L("",!0)]),_:1}),B(oe,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 scale-95 translate-y-2","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:A(()=>[e.show?(_(),k("div",{key:0,ref_key:"popupRef",ref:l,style:pe(p(d)),class:"fixed z-50"},[B(w,{class:"w-96 shadow-2xl border-0 overflow-hidden backdrop-blur-md bg-white/95"},{default:A(()=>[B(m,{class:"p-0"},{default:A(()=>[n("div",wf,[n("div",_f,[x[2]||(x[2]=n("svg",{class:"w-4 h-4 text-emerald-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)),n("p",kf,' "'+M(e.selectedText)+'" ',1)]),n("button",{onClick:g,class:"flex-shrink-0 w-6 h-6 rounded-full hover:bg-white/60 flex items-center justify-center transition-colors group",title:" (Esc)"},[...x[3]||(x[3]=[n("svg",{class:"w-4 h-4 text-gray-500 group-hover:text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),n("div",Cf,[(_(),k(Q,null,ie(c,y=>n("button",{key:y.type,onClick:$=>v(y.type),class:"group w-full flex items-center space-x-3 px-4 py-3 text-left rounded-xl hover:bg-gradient-to-r hover:from-slate-50 hover:to-zinc-50 transition-all duration-200 border border-transparent hover:border-gray-200 hover:shadow-sm"},[n("div",{class:q(["w-10 h-10 rounded-lg flex items-center justify-center transition-all",y.color])},[(_(),H(yn(y.icon),{class:"w-5 h-5"}))],2),n("div",Sf,[n("div",Af,M(y.label),1),n("div",Mf,M(y.description),1)]),x[4]||(x[4]=n("svg",{class:"w-4 h-4 text-gray-400 group-hover:text-emerald-600 opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,$f)),64))]),n("div",Ef,[n("label",Tf,[x[6]||(x[6]=n("div",{class:"flex items-center space-x-2"},[n("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),n("div",null,[n("span",{class:"text-sm font-medium text-gray-700"},""),n("p",{class:"text-xs text-gray-500"},"AI")])],-1)),n("div",Bf,[ye(n("input",{"onUpdate:modelValue":x[0]||(x[0]=y=>he(i)?i.value=y:null),type:"checkbox",class:"sr-only peer"},null,512),[[un,p(i)]]),x[5]||(x[5]=n("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),n("div",Lf,[n("div",Of,[n("form",{onSubmit:we(f,["prevent"]),class:"space-y-2"},[n("div",If,[ye(n("input",{ref_key:"customInput",ref:a,"onUpdate:modelValue":x[1]||(x[1]=y=>he(r)?r.value=y:null),type:"text",placeholder:"...",class:"w-full pl-10 pr-4 py-2.5 text-sm border-2 border-gray-200 rounded-lg focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 transition-all",onKeydown:qt(g,["esc"])},null,544),[[vt,p(r)]]),x[7]||(x[7]=n("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1))]),B(h,{type:"submit",disabled:!p(r).trim(),class:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white shadow-md hover:shadow-lg transition-all",size:"sm"},{default:A(()=>[...x[8]||(x[8]=[n("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),Z("  ",-1)])]),_:1},8,["disabled"])],32)])]),x[9]||(x[9]=n("div",{class:"px-4 pb-3 flex items-center justify-between text-xs text-gray-400"},[n("span",null,[Z(": "),n("kbd",{class:"px-1.5 py-0.5 bg-gray-100 rounded"},"Esc"),Z(" ")]),n("span",{class:"flex items-center space-x-1"},[n("span",{class:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),n("span",null,"AI ")])],-1))]),_:1})]),_:1}),p(u)?(_(),k("div",Pf,[...x[10]||(x[10]=[n("div",{class:"w-4 h-4 bg-white rotate-45 border-r border-b border-gray-200"},null,-1)])])):(_(),k("div",Rf,[...x[11]||(x[11]=[n("div",{class:"w-4 h-4 bg-white rotate-45 border-l border-t border-gray-200"},null,-1)])]))],4)):L("",!0)]),_:1})],64)}}}),Hf=Object.assign($e(zf,[["__scopeId","data-v-bb2f57ef"]]),{__name:"IntentButtons"}),cn="insightreader_history",ns=100,Bn=()=>{const e=F("history",()=>[]),t=()=>{try{const d=localStorage.getItem(cn);d&&(e.value=JSON.parse(d))}catch(d){console.error(":",d)}},s=()=>{try{localStorage.setItem(cn,JSON.stringify(e.value))}catch(d){console.error(":",d)}},o=d=>{const c={...d,id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return e.value.unshift(c),e.value.length>ns&&(e.value=e.value.slice(0,ns)),s(),c},r=d=>{e.value=e.value.filter(c=>c.id!==d),s()},a=()=>{e.value=[],localStorage.removeItem(cn)},l=d=>{const c=d.toLowerCase();return e.value.filter(v=>v.selectedText.toLowerCase().includes(c)||v.insight.toLowerCase().includes(c)||v.articleTitle?.toLowerCase().includes(c))},i=d=>e.value.filter(c=>c.intent===d),u=(d=10)=>e.value.slice(0,d);return ge(()=>{t()}),{history:de(e),addHistoryItem:o,deleteHistoryItem:r,clearHistory:a,searchHistory:l,filterByIntent:i,getRecentHistory:u}},jf={key:0,class:"fixed inset-y-0 right-0 w-96 bg-white shadow-2xl z-50 flex flex-col"},Df={class:"p-4 border-b flex items-center justify-between"},qf={class:"flex items-center gap-2"},Nf={class:"p-4 border-b"},Vf={class:"flex-1 overflow-y-auto p-4 space-y-3"},Ff={key:0,class:"text-center text-gray-400 mt-10"},Wf={class:"text-sm"},Uf={class:"flex items-center justify-between mb-2 text-xs text-gray-500"},Gf={class:"px-2 py-0.5 bg-blue-50 text-blue-600 rounded"},Kf={class:"text-sm font-medium text-gray-900 mb-2 line-clamp-2"},Yf={class:"text-xs text-gray-600 line-clamp-2"},Xf={key:0,class:"text-xs text-gray-400 mt-2"},Jf=R({__name:"HistoryPanel",props:{isOpen:{type:Boolean}},emits:["select","close"],setup(e,{emit:t}){const{history:s,deleteHistoryItem:o,clearHistory:r,searchHistory:a}=Bn(),l=E(""),i=t,u=S(()=>l.value?a(l.value):s.value),d=g=>{const b=new Date(g),h=new Date().getTime()-b.getTime();return h<6e4?"":h<36e5?`${Math.floor(h/6e4)}`:h<864e5?`${Math.floor(h/36e5)}`:h<6048e5?`${Math.floor(h/864e5)}`:b.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},c=g=>({explain:"",analyze:"",counter:""})[g]||g,v=g=>{i("select",g),i("close")},f=()=>{confirm("")&&r()};return(g,b)=>{const x=bn,h=Pt,m=Rt;return _(),k("div",null,[B(oe,{name:"slide"},{default:A(()=>[e.isOpen?(_(),k("div",jf,[n("div",Df,[b[5]||(b[5]=n("h2",{class:"text-lg font-semibold"},"",-1)),n("div",qf,[p(s).length>0?(_(),H(x,{key:0,variant:"ghost",size:"sm",onClick:f},{default:A(()=>[...b[3]||(b[3]=[Z("  ",-1)])]),_:1})):L("",!0),B(x,{variant:"ghost",size:"sm",onClick:b[0]||(b[0]=w=>i("close"))},{default:A(()=>[...b[4]||(b[4]=[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:1})])]),n("div",Nf,[ye(n("input",{"onUpdate:modelValue":b[1]||(b[1]=w=>he(l)?l.value=w:null),type:"text",placeholder:"...",class:"w-full px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[vt,p(l)]])]),n("div",Vf,[p(u).length===0?(_(),k("div",Ff,[b[6]||(b[6]=n("svg",{class:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),n("p",Wf,M(p(l)?"":""),1)])):L("",!0),(_(!0),k(Q,null,ie(p(u),w=>(_(),H(m,{key:w.id,class:"cursor-pointer hover:shadow-md transition-shadow",onClick:y=>v(w)},{default:A(()=>[B(h,{class:"p-3"},{default:A(()=>[n("div",Uf,[n("span",null,M(d(w.timestamp)),1),n("span",Gf,M(c(w.intent)),1)]),n("p",Kf,' "'+M(w.selectedText)+'" ',1),n("p",Yf,M(w.insight.substring(0,100))+M(w.insight.length>100?"...":""),1),w.articleTitle?(_(),k("p",Xf," : "+M(w.articleTitle),1)):L("",!0),B(x,{variant:"ghost",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:we(y=>p(o)(w.id),["stop"])},{default:A(()=>[...b[7]||(b[7]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])])):L("",!0)]),_:1}),B(oe,{name:"fade"},{default:A(()=>[e.isOpen?(_(),k("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-30 z-40",onClick:b[2]||(b[2]=w=>i("close"))})):L("",!0)]),_:1})])}}}),Qf=Object.assign($e(Jf,[["__scopeId","data-v-2afdc87c"]]),{__name:"HistoryPanel"}),Mt=R({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(e,{emit:t}){const r=Wt(e,t);return(a,l)=>(_(),H(p($l),Nt(Vt(p(r))),{default:A(()=>[V(a.$slots,"default")]),_:3},16))}}),Et=R({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},class:{}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:t}){const s=e,o=t,r=xt(s,"class"),a=Wt(r,o);return(l,i)=>(_(),H(p(Ll),null,{default:A(()=>[B(p(Tl),ee({...p(a),...l.$attrs},{class:p(Te)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s.class)}),{default:A(()=>[V(l.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Zf=R({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(e){const t=e;return(s,o)=>(_(),H(p(_l),Nt(Vt(t)),{default:A(()=>[V(s.$slots,"default")]),_:3},16))}}),Tt=R({__name:"TooltipTrigger",props:{reference:{},asChild:{type:Boolean},as:{}},setup(e){const t=e;return(s,o)=>(_(),H(p(Il),Nt(Vt(t)),{default:A(()=>[V(s.$slots,"default")]),_:3},16))}}),ep={key:0,class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},tp={key:1,class:"w-5 h-5 text-white animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},np={key:2,class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},sp={class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-medium"},op={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center font-medium"},rp={key:0,class:"px-4 py-2 bg-violet-600 text-white text-sm rounded-lg shadow-lg"},ap={key:0,class:"absolute bottom-6 right-6 w-3 h-3 bg-emerald-500/50 rounded-full animate-pulse pointer-events-none"},lp=R({__name:"FloatingActions",props:{isInsightPanelExpanded:{type:Boolean},insightCount:{},isReplayMode:{type:Boolean},historyCount:{},isMetaViewActive:{type:Boolean},isMetaAnalyzing:{type:Boolean}},emits:["toggle-insight-panel","toggle-replay","open-history","toggle-meta-view"],setup(e){const t=E(!1);return(s,o)=>(_(),H(p(Zf),null,{default:A(()=>[n("div",{onMouseenter:o[4]||(o[4]=r=>t.value=!0),onMouseleave:o[5]||(o[5]=r=>t.value=!1),class:"fixed bottom-0 right-0 w-32 h-32 z-40 pointer-events-auto"},[n("div",{class:q(["absolute bottom-6 right-6 flex flex-col gap-3 transition-all duration-300",p(t)?"opacity-100 translate-x-0":"opacity-0 translate-x-8 pointer-events-none"])},[B(p(Mt),null,{default:A(()=>[B(p(Tt),{"as-child":""},{default:A(()=>[n("button",{onClick:o[0]||(o[0]=r=>s.$emit("toggle-insight-panel")),class:"p-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all duration-200"},[(_(),k("svg",{class:q(["w-5 h-5 transition-transform duration-200",{"rotate-180":!e.isInsightPanelExpanded}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[6]||(o[6]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)])],2))])]),_:1}),B(p(Et),{side:"left",class:"bg-gray-900 text-white border-gray-900"},{default:A(()=>[Z(M(e.isInsightPanelExpanded?"AI":"AI"),1)]),_:1})]),_:1}),B(p(Mt),null,{default:A(()=>[B(p(Tt),{"as-child":""},{default:A(()=>[n("button",{onClick:o[1]||(o[1]=r=>s.$emit("toggle-meta-view")),class:q(["p-3 rounded-full shadow-lg transition-all duration-300","bg-gradient-to-br from-violet-500/80 to-purple-600/80 backdrop-blur-md","hover:from-violet-600 hover:to-purple-700 hover:shadow-xl hover:scale-110",e.isMetaViewActive?"opacity-100":"opacity-40 hover:opacity-100"])},[!e.isMetaAnalyzing&&!e.isMetaViewActive?(_(),k("svg",ep,[...o[7]||(o[7]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])])):e.isMetaAnalyzing?(_(),k("svg",tp,[...o[8]||(o[8]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(_(),k("svg",np,[...o[9]||(o[9]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],2)]),_:1}),B(p(Et),{side:"left",class:"bg-gray-900 text-white border-gray-900"},{default:A(()=>[Z(M(e.isMetaViewActive?"":""),1)]),_:1})]),_:1}),B(oe,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 scale-90","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-90"},{default:A(()=>[e.insightCount>0?(_(),H(p(Mt),{key:0},{default:A(()=>[B(p(Tt),{"as-child":""},{default:A(()=>[n("button",{onClick:o[2]||(o[2]=r=>s.$emit("toggle-replay")),class:q(["relative p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110",e.isReplayMode?"bg-gradient-to-r from-orange-500 to-amber-600 text-white":"bg-white text-orange-600 hover:bg-orange-50"])},[o[10]||(o[10]=n("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)),n("span",sp,M(e.insightCount),1)],2)]),_:1}),B(p(Et),{side:"left",class:"bg-gray-900 text-white border-gray-900"},{default:A(()=>[Z(M(e.isReplayMode?"":""),1)]),_:1})]),_:1})):L("",!0)]),_:1}),B(p(Mt),null,{default:A(()=>[B(p(Tt),{"as-child":""},{default:A(()=>[n("button",{onClick:o[3]||(o[3]=r=>s.$emit("open-history")),class:"relative p-3 bg-white border border-gray-300 hover:border-gray-400 rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all duration-200 text-gray-700"},[o[11]||(o[11]=n("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e.historyCount>0?(_(),k("span",op,M(e.historyCount),1)):L("",!0)])]),_:1}),B(p(Et),{side:"left",class:"bg-gray-900 text-white border-gray-900"},{default:A(()=>[...o[12]||(o[12]=[Z("  ",-1)])]),_:1})]),_:1}),B(oe,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.isMetaAnalyzing?(_(),k("div",rp,[...o[13]||(o[13]=[n("div",{class:"flex items-center gap-2"},[n("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n("span",null,"...")],-1)])])):L("",!0)]),_:1})],2),!p(t)&&!e.isMetaAnalyzing?(_(),k("div",ap)):L("",!0)],32)]),_:1}))}}),ip=Object.assign(lp,{__name:"FloatingActions"}),cp={class:"p-6 border-b border-gray-200 bg-gradient-to-r from-orange-50 to-amber-50"},dp={class:"flex items-center justify-between"},up={class:"flex items-center gap-3"},fp={class:"text-xs text-gray-500"},pp={class:"p-6 overflow-y-auto max-h-[calc(80vh-100px)] space-y-4"},gp={class:"p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg"},vp={class:"text-gray-800 leading-relaxed"},mp={key:0},hp={class:"p-4 bg-blue-50 rounded-lg"},yp={class:"text-gray-800"},bp={key:1},xp={class:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-100 rounded-full"},wp={class:"text-sm text-gray-700"},_p={class:"p-4 bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg"},kp={class:"text-gray-800 leading-relaxed whitespace-pre-wrap"},Cp={key:2},$p={class:"p-4 bg-purple-50 rounded-lg"},Sp={class:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap"},Ap=R({__name:"InsightHistoryModal",props:{selectedItem:{}},emits:["close","continueChat"],setup(e,{emit:t}){const s=e,o=t,r=()=>{o("close")},a=()=>{s.selectedItem&&o("continueChat",s.selectedItem)},l=u=>new Date(u).toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=u=>({explain:"",summarize:"",question:"",expand:"",analyze:""})[u]||u;return(u,d)=>(_(),H(oe,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.selectedItem?(_(),k("div",{key:0,class:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r},[n("div",{class:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",onClick:d[0]||(d[0]=we(()=>{},["stop"]))},[n("div",cp,[n("div",dp,[n("div",up,[d[2]||(d[2]=n("div",{class:"w-10 h-10 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center"},[n("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})])],-1)),n("div",null,[d[1]||(d[1]=n("h3",{class:"text-lg font-bold text-gray-900"},"",-1)),n("p",fp,M(l(e.selectedItem.created_at)),1)])]),n("button",{onClick:r,class:"p-2 rounded-lg hover:bg-white/50 transition-colors"},[...d[3]||(d[3]=[n("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),n("div",pp,[n("div",null,[d[4]||(d[4]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," ",-1)),n("div",gp,[n("p",vp,M(e.selectedItem.selected_text),1)])]),e.selectedItem.question?(_(),k("div",mp,[d[5]||(d[5]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," ",-1)),n("div",hp,[n("p",yp,M(e.selectedItem.question),1)])])):(_(),k("div",bp,[d[6]||(d[6]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," ",-1)),n("div",xp,[n("span",wp,M(i(e.selectedItem.intent)),1)])])),n("div",null,[d[7]||(d[7]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," AI ",-1)),n("div",_p,[n("p",kp,M(e.selectedItem.insight),1)])]),e.selectedItem.reasoning?(_(),k("div",Cp,[d[8]||(d[8]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," ",-1)),n("div",$p,[n("p",Sp,M(e.selectedItem.reasoning),1)])])):L("",!0)]),n("div",{class:"p-6 border-t border-gray-200 bg-gray-50 flex items-center justify-between"},[n("button",{onClick:r,class:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors"},"  "),n("button",{onClick:a,class:"px-6 py-2 bg-gradient-to-r from-orange-500 to-amber-600 text-white text-sm rounded-lg hover:from-orange-600 hover:to-amber-700 transition-all shadow-md flex items-center gap-2"},[...d[9]||(d[9]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),Z("  ",-1)])])])])])):L("",!0)]),_:1}))}}),Mp=Object.assign(Ap,{__name:"InsightHistoryModal"}),Bt=E({auto_basic_analysis:!0,auto_meta_analysis:!1,auto_argument_lens:!1,auto_stance_lens:!1}),dt=E(!1),ut=E(null);function Ep(){async function e(o){dt.value=!0,ut.value=null;try{const r=be(),a=await $fetch(`${r.public.apiBase}/api/v1/preferences/analysis/${o}`);return Bt.value=a,a}catch(r){throw ut.value=r instanceof Error?r.message:"",console.error(":",r),r}finally{dt.value=!1}}async function t(o,r){dt.value=!0,ut.value=null;try{const a=be(),l=await $fetch(`${a.public.apiBase}/api/v1/preferences/analysis/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:r});return Bt.value=l,l}catch(a){throw ut.value=a instanceof Error?a.message:"",console.error(":",a),a}finally{dt.value=!1}}async function s(o,r){const a=!Bt.value[r];await t(o,{[r]:a})}return{preferences:Bt,isLoading:dt,error:ut,fetchPreferences:e,updatePreferences:t,togglePreference:s}}const Lt=R({__name:"Switch",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null]},disabled:{type:Boolean},id:{},value:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=t,r=xt(s,"class"),a=Wt(r,o);return(l,i)=>(_(),H(p(hl),ee(p(a),{class:p(Te)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s.class)}),{default:A(()=>[B(p(bl),{class:q(p(Te)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5"))},{default:A(()=>[V(l.$slots,"thumb")]),_:3},8,["class"])]),_:3},16,["class"]))}}),Tp={class:"p-6 space-y-4"},Bp={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},Lp={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},Op={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},Ip={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},Pp=R({__name:"AnalysisSettingsModal",props:{isOpen:{type:Boolean},userId:{}},emits:["close","preferencesUpdated"],setup(e,{emit:t}){const s=e,o=t,r=E({auto_basic_analysis:!0,auto_meta_analysis:!1,auto_argument_lens:!1,auto_stance_lens:!1}),a=E(!1),l=E(!1);J(()=>s.isOpen,async d=>{if(d&&s.userId){a.value=!0,l.value=!1;try{const c=be(),v=await $fetch(`${c.public.apiBase}/api/v1/preferences/analysis/${s.userId}`);r.value=v,l.value=!0,console.log(" :",v)}catch(c){console.error(":",c)}finally{a.value=!1}}});const i=()=>{o("close")},u=async(d,c)=>{try{a.value=!0;const v=be(),f=await $fetch(`${v.public.apiBase}/api/v1/preferences/analysis/${s.userId}`,{method:"PUT",body:{[d]:c}});r.value=f,o("preferencesUpdated",f),console.log(" :",d,"=",c)}catch(v){console.error(":",v);try{const f=be(),g=await $fetch(`${f.public.apiBase}/api/v1/preferences/analysis/${s.userId}`);r.value=g}catch(f){console.error(":",f)}}finally{a.value=!1}};return(d,c)=>(_(),H(oe,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.isOpen?(_(),k("div",{key:0,class:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:i},[n("div",{class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",onClick:c[4]||(c[4]=we(()=>{},["stop"]))},[n("div",{class:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50"},[n("div",{class:"flex items-center justify-between"},[c[6]||(c[6]=n("div",{class:"flex items-center gap-3"},[n("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center"},[n("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])]),n("div",null,[n("h3",{class:"text-lg font-bold text-gray-900"},""),n("p",{class:"text-xs text-gray-500"},"")])],-1)),n("button",{onClick:i,class:"p-2 rounded-lg hover:bg-white/50 transition-colors"},[...c[5]||(c[5]=[n("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),n("div",Tp,[c[11]||(c[11]=n("p",{class:"text-sm text-gray-600 mb-4"},"  ",-1)),n("div",Bp,[c[7]||(c[7]=n("div",{class:"flex-1"},[n("div",{class:"flex items-center gap-2 mb-1"},[n("svg",{class:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),n("span",{class:"font-medium text-gray-900"},"")]),n("p",{class:"text-xs text-gray-500"},"")],-1)),B(Lt,{"model-value":p(r).auto_basic_analysis,"onUpdate:modelValue":c[0]||(c[0]=v=>u("auto_basic_analysis",v)),disabled:p(a)},null,8,["model-value","disabled"])]),n("div",Lp,[c[8]||(c[8]=n("div",{class:"flex-1"},[n("div",{class:"flex items-center gap-2 mb-1"},[n("svg",{class:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]),n("span",{class:"font-medium text-gray-900"},"")]),n("p",{class:"text-xs text-gray-500"},"")],-1)),B(Lt,{"model-value":p(r).auto_meta_analysis,"onUpdate:modelValue":c[1]||(c[1]=v=>u("auto_meta_analysis",v)),disabled:p(a)},null,8,["model-value","disabled"])]),n("div",Op,[c[9]||(c[9]=n("div",{class:"flex-1"},[n("div",{class:"flex items-center gap-2 mb-1"},[n("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})]),n("span",{class:"font-medium text-gray-900"},"")]),n("p",{class:"text-xs text-gray-500"},"")],-1)),B(Lt,{"model-value":p(r).auto_argument_lens,"onUpdate:modelValue":c[2]||(c[2]=v=>u("auto_argument_lens",v)),disabled:p(a)},null,8,["model-value","disabled"])]),n("div",Ip,[c[10]||(c[10]=n("div",{class:"flex-1"},[n("div",{class:"flex items-center gap-2 mb-1"},[n("svg",{class:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})]),n("span",{class:"font-medium text-gray-900"},"")]),n("p",{class:"text-xs text-gray-500"},"")],-1)),B(Lt,{"model-value":p(r).auto_stance_lens,"onUpdate:modelValue":c[3]||(c[3]=v=>u("auto_stance_lens",v)),disabled:p(a)},null,8,["model-value","disabled"])]),c[12]||(c[12]=n("div",{class:"mt-6 p-3 bg-blue-50 border-l-4 border-blue-500 rounded"},[n("div",{class:"flex items-start gap-2"},[n("svg",{class:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),n("p",{class:"text-xs text-blue-700"},"  ")])],-1))]),n("div",{class:"p-6 border-t border-gray-200 bg-gray-50 flex items-center justify-end gap-3"},[n("button",{onClick:i,class:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white text-sm rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-md"},"  ")])])])):L("",!0)]),_:1}))}}),Rp=Object.assign(Pp,{__name:"AnalysisSettingsModal"}),Ds=()=>{const e=F("is-generating",()=>!1),t=F("current-insight",()=>""),s=F("current-reasoning",()=>""),o=F("insight-error",()=>null),{addHistoryItem:r}=Bn(),{title:a,content:l}=Ne(),{selectedStart:i,selectedEnd:u}=tn(),{user:d}=mt(),c=F("current-article-id",()=>null),v=be();return{isGenerating:e,currentInsight:t,currentReasoning:s,error:o,generate:async b=>{e.value=!0,t.value="",s.value="",o.value=null;try{const{connect:x}=zs();await x("/api/v1/insights/generate",b,{onStart:()=>{t.value="",s.value="",console.log(" :",b.use_reasoning)},onDelta:h=>{t.value+=h,console.log(" :",h.substring(0,50))},onReasoning:h=>{s.value+=h,console.log(" :",h.substring(0,50))},onComplete:async h=>{if(e.value=!1,console.log(" ",{metadata:h,hasReasoning:!!s.value,reasoningLength:s.value.length}),t.value&&r({selectedText:b.selected_text,context:b.context,intent:b.intent,customQuestion:b.custom_question,insight:t.value,articleTitle:a.value}),t.value&&d.value?.id&&c.value)try{const m=l.value,w=i.value||0,y=u.value||0,$=w>0?m.substring(Math.max(0,w-100),w):"",C=y<m.length?m.substring(y,Math.min(m.length,y+100)):"";await $fetch(`${v.public.apiBase}/api/v1/insights/history`,{method:"POST",body:{article_id:c.value,selected_text:b.selected_text,selected_start:i.value,selected_end:u.value,context_before:$,context_after:C,intent:b.intent,question:b.custom_question||null,insight:t.value,reasoning:s.value||null}}),console.log(" ")}catch(m){console.error(" :",m)}},onError:h=>{o.value=h.message||"",e.value=!1,console.error(" :",h)}})}catch(x){o.value=x instanceof Error?x.message:"",e.value=!1}},clear:()=>{t.value="",s.value="",o.value=null,e.value=!1}}},zp=()=>{const e=be(),t=F("insight-history",()=>[]),s=F("is-replay-mode",()=>!1),o=F("selected-history-item",()=>null),r=F("insight-history-loading",()=>!1),a=async(x,h)=>{r.value=!0;try{const m=await $fetch(`${e.public.apiBase}/api/v1/insights/history`,{params:{article_id:x,user_id:h}});return t.value=m.insights,console.log(" ",m.total,""),m.insights}catch(m){return console.error(" :",m),[]}finally{r.value=!1}},l=()=>{s.value=!s.value,s.value||(o.value=null)},i=(x,h)=>{f(x),console.log(" ",h.length,"");for(const m of h)try{u(x,m)}catch(w){console.error(" :",m.selected_text.substring(0,30),w)}console.log(" ")},u=(x,h)=>{h.selected_text.trim()&&(h.selected_start!==null&&h.selected_end!==null?d(x,h)||(console.warn(" "),c(x,h)):c(x,h))},d=(x,h)=>{if(h.selected_start===null||h.selected_end===null)return!1;const{content:m}=Ne(),w=m.value;if(!w)return!1;const y=w.substring(h.selected_start,h.selected_end),$=document.createTreeWalker(x,NodeFilter.SHOW_TEXT,{acceptNode:U=>{const ce=U.parentElement;return ce?.classList.contains("insight-replay-highlight")||ce?.classList.contains("meta-view-highlight")?NodeFilter.FILTER_REJECT:U.textContent?.trim()?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),C=[];let z;for(;z=$.nextNode();)C.push(z);let P=0;const T=[];for(const U of C){const ce=U.textContent||"";T.push({node:U,startOffset:P,endOffset:P+ce.length}),P+=ce.length}const O=T.filter(U=>U.startOffset<h.selected_end&&U.endOffset>h.selected_start);if(O.length===0)return console.warn(" "),!1;if(O.length>1)return console.warn(" "),!1;const I=O[0],K=I.node,W=Math.max(0,h.selected_start-I.startOffset),ne=Math.min(K.textContent.length,h.selected_end-I.startOffset),X=K.textContent||"",re=X.substring(0,W),te=X.substring(W,ne),ae=X.substring(ne);if(te!==y)return console.warn(" "),console.log(":",y.substring(0,50)),console.log(":",te.substring(0,50)),!1;const N=K.parentNode;if(!N)return!1;const Y=v(te,h);return re&&N.insertBefore(document.createTextNode(re),K),N.insertBefore(Y,K),ae&&N.insertBefore(document.createTextNode(ae),K),N.removeChild(K),console.log(" :",h.selected_start,"-",h.selected_end),!0},c=(x,h)=>{const m=h.selected_text.trim();if(!m)return;const w=document.createTreeWalker(x,NodeFilter.SHOW_TEXT,{acceptNode:C=>{const z=C.parentElement;return z?.classList.contains("insight-replay-highlight")||z?.classList.contains("meta-view-highlight")?NodeFilter.FILTER_REJECT:C.textContent?.trim()?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),y=[];let $;for(;$=w.nextNode();)y.push($);for(const C of y){const z=C.textContent||"",P=z.indexOf(m);if(P!==-1){const T=z.substring(0,P),O=z.substring(P,P+m.length),I=z.substring(P+m.length),K=C.parentNode;if(!K)continue;const W=v(O,h);T&&K.insertBefore(document.createTextNode(T),C),K.insertBefore(W,C),I&&K.insertBefore(document.createTextNode(I),C),K.removeChild(C);break}}},v=(x,h)=>{const m=document.createElement("span");return m.className="insight-replay-highlight",m.dataset.insightId=h.id.toString(),m.style.borderBottom="3px solid #f97316",m.style.cursor="pointer",m.style.backgroundColor="rgba(249, 115, 22, 0.1)",m.style.padding="0.1em 0.2em",m.style.borderRadius="0.25em",m.style.transition="all 0.2s ease",m.textContent=x,m.addEventListener("click",w=>{w.stopPropagation();const{currentInsight:y,currentReasoning:$}=Ds(),{selectedText:C,context:z,selectedStart:P,selectedEnd:T,showIntentButtons:O}=tn();y.value=h.insight,h.reasoning&&($.value=h.reasoning),C.value=h.selected_text;const I=h.context_before||"",K=h.context_after||"";z.value=I+h.selected_text+K,P.value=h.selected_start,T.value=h.selected_end,O.value=!0,console.log(" ")}),m.addEventListener("mouseenter",()=>{m.style.backgroundColor="rgba(249, 115, 22, 0.2)",m.style.boxShadow="0 0 0 2px rgba(249, 115, 22, 0.2)"}),m.addEventListener("mouseleave",()=>{m.style.backgroundColor="rgba(249, 115, 22, 0.1)",m.style.boxShadow="none"}),m},f=x=>{x.querySelectorAll(".insight-replay-highlight").forEach(m=>{const w=m.parentNode;if(w){const y=document.createTextNode(m.textContent||"");w.replaceChild(y,m)}}),x.normalize()},g=x=>{o.value=x},b=()=>{t.value=[],s.value=!1,o.value=null};return{insightHistory:de(t),isReplayMode:de(s),selectedHistoryItem:de(o),isLoading:de(r),loadInsightHistory:a,toggleReplayMode:l,renderHistoryHighlights:i,removeHistoryHighlights:f,selectHistoryItem:g,clearReplayState:b}},Hp=()=>{const e=E(new Map),t=async u=>{const d=document.getElementById("article-content-container");if(!d){console.warn(" ");return}if(console.log(" ..."),u.sentences&&u.sentences.length>0){console.log(` Stanza ${u.sentences.length} `),console.log(" ...");const{renderWithBackendSentences:v}=Is(),f=v(u.sentences);d.innerHTML=f,console.log(" ")}else console.log(" ");const c=s(u);e.value=c,console.log(` ${c.size} `),await o(d,c),console.log(" ")},s=u=>{const d=new Map;return u.concept_sparks&&u.concept_sparks.forEach(c=>{d.has(c.sentence_index)||d.set(c.sentence_index,{sentence_index:c.sentence_index,sentence_text:"",concepts:[],arguments:[],totalCount:0});const v=d.get(c.sentence_index);v.concepts.push(c),v.totalCount++}),u.argument_sparks&&u.argument_sparks.forEach(c=>{d.has(c.sentence_index)||d.set(c.sentence_index,{sentence_index:c.sentence_index,sentence_text:"",concepts:[],arguments:[],totalCount:0});const v=d.get(c.sentence_index);v.arguments.push(c),v.totalCount++}),d},o=async(u,d)=>{for(const[c,v]of d.entries()){await new Promise(f=>setTimeout(f,c*30));try{const f=document.querySelector(`#sentence-${c}`);if(!f){console.warn(` : #sentence-${c}`);continue}v.sentence_text=f.textContent||"",f.classList.add("has-sparks");const g=r(v);f.appendChild(g);const b=a(v);f.setAttribute("data-spark-tooltip",b),f.addEventListener("click",x=>{x.stopPropagation(),document.querySelectorAll(".has-sparks.show-tooltip").forEach(h=>{h!==f&&h.classList.remove("show-tooltip")}),f.classList.toggle("show-tooltip")}),f.addEventListener("mouseenter",()=>{f.classList.add("spark-hover")}),f.addEventListener("mouseleave",()=>{f.classList.remove("spark-hover")})}catch(f){console.error(" :",f)}}l(),i()},r=u=>{const d=document.createElement("span");d.className="spark-badge";const c=u.concepts.length>0,v=u.arguments.length>0;let f="";return v&&!c?f="":v&&c&&(f=""),d.innerHTML=`
      <span class="spark-icon">${f}</span>
    `,d},a=u=>{const d=[];if(u.concepts.length>0){const c=u.concepts.map(v=>` ${v.text} (: ${v.importance_score}/10) - ${v.explanation_hint}`);d.push(...c)}if(u.arguments.length>0){const c=u.arguments.map(v=>`${v.type==="claim"?"":v.type==="evidence"?"":""} ${v.role_description}`);d.push(...c)}return d.join(" | ")},l=()=>{if(document.getElementById("spark-renderer-v2-styles"))return;const u=document.createElement("style");u.id="spark-renderer-v2-styles",u.textContent=`
      /*  */
      .has-sparks {
        position: relative;
        cursor: pointer !important;
        transition: all 0.2s ease;
        padding: 2px 4px;
        margin: -2px -4px;
        border-radius: 4px;
      }

      .has-sparks:hover,
      .spark-hover {
        background-color: rgba(16, 185, 129, 0.08);
      }

      /*  */
      // .spark-badge {
      //   display: inline-flex;
      //   align-items: center;
      //   gap: 2px;
      //   padding: 1px 6px;
      //   margin-left: 4px;
      //   background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      //   border-radius: 10px;
      //   font-size: 11px;
      //   font-weight: 600;
      //   color: white;
      //   box-shadow: 0 1px 3px rgba(16, 185, 129, 0.3);
      //   animation: badge-appear 0.4s ease-out;
      //   vertical-align: middle;
      //   white-space: nowrap;
      // }

      .spark-icon {
        font-size: 15px;
        line-height: 1;
      }

      .spark-count {
        line-height: 1;
      }

      @keyframes badge-appear {
        from {
          opacity: 0;
          transform: scale(0.8) translateY(-2px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      /*  */
      .has-sparks::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, #10b981, transparent);
        opacity: 0;
        transition: opacity 0.2s;
      }

      .has-sparks:hover::after {
        opacity: 0.5;
      }
    `,document.head.appendChild(u)},i=()=>{window.__sparkTooltipClickHandler&&document.removeEventListener("click",window.__sparkTooltipClickHandler);const u=d=>{d.target.closest(".has-sparks")||document.querySelectorAll(".has-sparks.show-tooltip").forEach(v=>{v.classList.remove("show-tooltip")})};window.__sparkTooltipClickHandler=u,document.addEventListener("click",u)};return{renderSparks:t,sparkGroups:e}},jp=()=>{const e=E(new Map),t=r=>{if(r.key==="Escape"){const a=e.value.get("escape");a&&(a(),r.preventDefault())}if((r.ctrlKey||r.metaKey)&&r.key==="k"){const a=e.value.get("search");a&&(a(),r.preventDefault())}if((r.ctrlKey||r.metaKey)&&r.key==="/"){const a=e.value.get("help");a&&(a(),r.preventDefault())}},s=(r,a)=>{e.value.set(r,a)},o=r=>{e.value.delete(r)};return ge(()=>{window.addEventListener("keydown",t)}),Ge(()=>{window.removeEventListener("keydown",t)}),{register:s,unregister:o}},Dp={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-zinc-50 relative overflow-hidden"},qp={class:"relative z-10"},Np={class:"border-b border-gray-200 bg-white"},Vp={class:"flex"},Fp={class:"flex items-center justify-center gap-2"},Wp={key:0,class:"ml-1 px-1.5 py-0.5 text-xs bg-amber-600 text-white rounded-full"},Up={class:"flex-1 overflow-hidden"},tg=R({__name:"index",setup(e){const{content:t,title:s,isReading:o,setArticle:r}=Ne(),{selectedText:a,context:l,position:i,showIntentButtons:u,clear:d,selectedStart:c,selectedEnd:v}=tn(),{currentInsight:f,currentReasoning:g,isGenerating:b,error:x,generate:h}=Ds(),{stashItems:m}=Tn(),{insightHistory:w,selectedHistoryItem:y,loadInsightHistory:$,clearReplayState:C,selectHistoryItem:z,isReplayMode:P,toggleReplayMode:T,renderHistoryHighlights:O,removeHistoryHighlights:I}=zp(),{history:K}=Bn(),{isMetaViewActive:W,isAnalyzing:ne,analyzeArticle:X,toggleMetaView:re}=Rs(),{enabledLenses:te,renderHighlightsByType:ae}=Ps(),N=E(!1),Y=E(!1),U=E(null),{fetchPreferences:ce}=Ep(),De=E(!1),et=E(null),wt=F("current-article-id",()=>null),Ke=be(),{user:Se}=mt(),{connect:qs,disconnect:Ns,onAnalysisComplete:Vs,onMetaAnalysisComplete:Fs,onLensComplete:Ws,onTaskFailed:Us}=Hs(),{renderSparks:sn}=Hp(),on=E(null),Gs=S(()=>f.value),Ks=S(()=>g.value),Ys=S(()=>b.value),Xs=S(()=>x.value),_t=E(void 0),Js=F("use-reasoning",()=>!1),qe=E("insight"),Ln=S(()=>m.value.length),Oe=E(!1);J(()=>a.value,D=>{D&&D.length>0&&!u.value?Oe.value=!0:Oe.value=!1});const Qs=()=>{Oe.value=!1,u.value=!0},Zs=()=>{Oe.value=!1,d()},{register:eo}=jp();Ge(()=>{Ns()});const to=async D=>{if(r(D),Se.value?.id)try{const j=await $fetch(`${Ke.public.apiBase}/api/v1/articles/save-with-analysis`,{method:"POST",body:{title:s.value||"",content:D}});if(wt.value=j.article.id,console.log(" , ID:",j.article.id),j.analysis.status==="completed"){console.log(" ...");const G=await $fetch(`${Ke.public.apiBase}/api/v1/articles/${j.article.id}/analysis-report`);on.value=G.report_data,await sn(G.report_data),console.log(" ")}else console.log(" ..."),Vs(j.article.id,async G=>{console.log(`  ID: ${G}`);try{const le=await $fetch(`${Ke.public.apiBase}/api/v1/articles/${G}/analysis-report`);on.value=le.report_data,await sn(le.report_data),console.log(" ");const fe=(le.report_data.concept_sparks?.length||0)+(le.report_data.argument_sparks?.length||0);fe>0&&console.log(`  ${fe} `)}catch(le){console.error(" :",le)}});!et.value&&Se.value?.id?ce(Se.value.id).then(G=>{et.value=G,G.auto_meta_analysis&&wt.value&&(console.log(" ..."),$fetch(`${Ke.public.apiBase}/api/v1/meta-analysis/analyze`,{method:"POST",body:{title:s.value||"",author:"",full_text:D}}).then(le=>{le.status==="completed"?console.log(" "):le.status==="pending"&&console.log(" ID:",le.task_id)}).catch(le=>{console.error(" :",le)}))}).catch(G=>{console.warn(":",G)}):et.value?.auto_meta_analysis&&(console.log(" ..."),$fetch(`${Ke.public.apiBase}/api/v1/meta-analysis/analyze`,{method:"POST",body:{title:s.value||"",author:"",full_text:D}}).then(G=>{G.status==="completed"?console.log(" "):G.status==="pending"&&console.log(" ID:",G.task_id)}).catch(G=>{console.error(" :",G)})),j.article.is_new||(await $(j.article.id,Se.value.id),console.log(" "))}catch(j){console.error(" :",j)}},no=async(D,j,G)=>{Y.value||it();const le=F("use-reasoning",()=>!1),fe={selected_text:a.value,context:l.value,intent:D,custom_question:j,use_reasoning:le.value,include_full_text:G||!1};G&&t.value&&(fe.full_text=t.value),_t.value=fe,await h(fe),d(),Oe.value=!1},so=D=>{Y.value||it(),f.value=D.insight,_t.value=void 0,qe.value="insight",D.articleTitle&&D.articleTitle!==s.value&&console.log(":",D.articleTitle)},oo=D=>{Y.value||it(),a.value=D.selected_text;const j=D.context_before||"",G=D.context_after||"";l.value=j+D.selected_text+G,c.value=D.selected_start,v.value=D.selected_end,f.value=D.insight,D.reasoning&&(g.value=D.reasoning),z(null),u.value=!0,console.log(" ")},ro=D=>{Y.value||it(),f.value=D.insight,g.value=D.reasoning||"",_t.value={selected_text:D.selectedText,context:D.context,intent:D.intent,custom_question:D.customQuestion,use_reasoning:!!D.reasoning},qe.value="insight",console.log(" :",D.selectedText.substring(0,30),"...")},ao=D=>{et.value=D,console.log(" :",D)},it=()=>{U.value&&U.value.togglePanel(),Y.value=!Y.value},lo=()=>{T();const D=document.getElementById("article-content-container");D&&(P.value?O(D,w.value):I(D))},io=async()=>{if(W.value)re();else try{await X(s.value||"","",new Date().toISOString(),t.value,Se.value?.id,void 0),re()}catch(D){console.error(":",D),re()}};Oo({title:"InsightReader - ",meta:[{name:"description",content:" AI "}]}),J(()=>wt.value,async D=>{D&&Se.value?.id?(await $(D,Se.value.id),w.value.length>0&&console.log(`  ${D}  ${w.value.length} `)):C()});const co=Io();return ge(async()=>{qs(),Se.value?.id&&!et.value&&ce(Se.value.id).then(j=>{et.value=j,console.log(" ")}).catch(j=>{console.warn(":",j)}),Fs(async(j,G)=>{console.log(`  ID: ${j}`);const le=F("meta-analysis-data",()=>null),fe=F("meta-view-analyzing",()=>!1);le.value=G,fe.value=!1,console.log(" "),G.generated_title&&(s.value=G.generated_title,console.log(" AI:",G.generated_title))}),Ws(async(j,G)=>{console.log(`  ${j} `);const le=F("lens-results"),fe=F("loading-lenses");le.value.set(j,G);const kt=new Set(fe.value);if(kt.delete(j),fe.value=kt,console.log(` : ${fe.value.size}`),te.value.has(j)){const Ct=document.querySelector(".article-content");Ct&&(ae(Ct,G.highlights,j),console.log(` ${j} `))}console.log(` ${j}  ${G.highlights?.length||0} `)}),Us((j,G)=>{console.error(` ${j} :`,G);const fe={article_analysis:"",article_reanalysis:"",meta_analysis:"",thinking_lens_argument_structure:"",thinking_lens_author_stance:""}[j]||"";console.log(` ${fe}: ${G}`)}),eo("escape",()=>{(u.value||Oe.value)&&(d(),Oe.value=!1)});const D=co.query.articleId;if(D)try{const j=await $fetch(`${Ke.public.apiBase}/api/v1/articles/${D}`);r(j.content,j.title),wt.value=Number(D),console.log(" :",j.title),await Re();try{const G=await $fetch(`${Ke.public.apiBase}/api/v1/articles/${D}/analysis-report`);on.value=G.report_data,await sn(G.report_data),console.log(" ")}catch{console.log(" ")}}catch(j){console.error(" :",j)}}),(D,j)=>{const G=xo,le=li,fe=Mi,kt=yu,Ct=y0,uo=uf,fo=yf,po=xf,go=Hf,vo=Qf,mo=ip,ho=Mp,yo=Rp;return _(),k("div",Dp,[j[10]||(j[10]=n("div",{class:"fixed inset-0 overflow-hidden pointer-events-none z-0"},[n("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-emerald-400/10 rounded-full blur-3xl"}),n("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-slate-400/10 rounded-full blur-3xl"}),n("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-zinc-400/5 rounded-full blur-3xl"})],-1)),n("div",qp,[B(G,{onOpenSettings:j[0]||(j[0]=tt=>De.value=!0)}),p(o)?(_(),H(fo,{key:1,ref_key:"readerLayoutRef",ref:U},{left:A(()=>[B(fe,{content:p(t),title:p(s)},null,8,["content","title"]),p(o)?(_(),H(kt,{key:0,"article-content":p(t)},null,8,["article-content"])):L("",!0)]),right:A(()=>[n("div",Np,[n("div",Vp,[n("button",{onClick:j[1]||(j[1]=tt=>qe.value="insight"),class:q(["flex-1 px-4 py-3 text-sm font-medium transition-all",[p(qe)==="insight"?"text-emerald-700 border-b-2 border-emerald-600 bg-emerald-50/50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"]])},[...j[7]||(j[7]=[n("span",{class:"flex items-center justify-center gap-2"},[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),n("span",null,"AI ")],-1)])],2),n("button",{onClick:j[2]||(j[2]=tt=>qe.value="stash"),class:q(["flex-1 px-4 py-3 text-sm font-medium transition-all relative",[p(qe)==="stash"?"text-amber-700 border-b-2 border-amber-600 bg-amber-50/50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"]])},[n("span",Fp,[j[8]||(j[8]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)),j[9]||(j[9]=n("span",null,"",-1)),p(Ln)>0?(_(),k("span",Wp,M(p(Ln)),1)):L("",!0)])],2)])]),n("div",Up,[ye(B(Ct,{insight:p(Gs),reasoning:p(Ks),"is-loading":p(Ys),error:p(Xs),"current-request":p(_t),"use-reasoning":p(Js)},null,8,["insight","reasoning","is-loading","error","current-request","use-reasoning"]),[[It,p(qe)==="insight"]]),ye(B(uo,{onViewItem:ro},null,512),[[It,p(qe)==="stash"]])])]),_:1},512)):(_(),H(le,{key:0,onSubmit:to})),B(po,{show:p(Oe),position:p(i),onClick:Qs,onClose:Zs},null,8,["show","position"]),B(go,{show:p(u),position:p(i),"selected-text":p(a),onSelect:no,onClose:p(d)},null,8,["show","position","selected-text","onClose"]),B(vo,{"is-open":p(N),onClose:j[3]||(j[3]=tt=>N.value=!1),onSelect:so},null,8,["is-open"]),p(o)?(_(),H(mo,{key:2,"is-insight-panel-expanded":p(Y),"insight-count":p(w).length,"is-replay-mode":p(P),"history-count":p(K).length,"is-meta-view-active":p(W),"is-meta-analyzing":p(ne),onToggleInsightPanel:it,onToggleReplay:lo,onOpenHistory:j[4]||(j[4]=tt=>N.value=!0),onToggleMetaView:io},null,8,["is-insight-panel-expanded","insight-count","is-replay-mode","history-count","is-meta-view-active","is-meta-analyzing"])):L("",!0),B(ho,{"selected-item":p(y),onClose:j[5]||(j[5]=tt=>p(z)(null)),onContinueChat:oo},null,8,["selected-item"]),B(yo,{"is-open":p(De),"user-id":p(Se)?.id||0,onClose:j[6]||(j[6]=tt=>De.value=!1),onPreferencesUpdated:ao},null,8,["is-open","user-id"])])])}}});export{tg as default};
