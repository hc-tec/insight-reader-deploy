import{_ as B}from"./CR-T6FEM.js";import{a as z,_ as R}from"./Dh0Zgqt2.js";import{D as G,a9 as V,v as f,m as A,u as H,c as n,b as i,w as d,o as a,K as b,a as e,x as o,t as v,d as u,a0 as $,R as j,$ as q,a1 as N}from"#entry";import{a as D}from"./Dbg_rtJb.js";const I={class:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center px-6 py-12"},K={key:0,class:"mb-6 p-3 bg-red-50 border border-red-200 rounded-md"},E={class:"text-sm text-red-600"},F={class:"space-y-3 mb-6"},S={key:1},T={class:"space-y-4"},W={key:0,class:"flex items-center justify-center"},P={key:1},U={key:0,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md"},J={class:"text-sm text-red-600"},O={key:2,class:"space-y-4"},Q={class:"p-4 bg-green-50 border border-green-200 rounded-md"},X={class:"flex items-start"},Y={class:"text-sm text-green-700"},le=G({__name:"login",setup(Z){const y=V(),{loginWithGoogle:_,loginWithGithub:h,requestMagicLink:w}=D(),r=f(""),g=f(!1),l=f(""),c=f(!1);A(()=>{const s=y.query.error;s&&(l.value=s)});const k=()=>{_()},C=()=>{h()},p=async()=>{if(r.value){console.log("[Login] 开始发送魔法链接:",r.value),g.value=!0,l.value="";try{const s=await w(r.value);console.log("[Login] 魔法链接请求结果:",s),s.success?(console.log("[Login] 魔法链接发送成功"),c.value=!0):(console.error("[Login] 魔法链接发送失败:",s.error),l.value=s.error||"发送失败，请重试")}catch(s){console.error("[Login] 魔法链接请求异常:",s),l.value="发送失败，请重试"}finally{g.value=!1}}};return H({title:"登录 - InsightReader",meta:[{name:"description",content:"登录 InsightReader，开始你的深度阅读之旅"}]}),(s,t)=>{const m=B,L=R,M=z;return a(),n("div",I,[i(M,{class:"w-full max-w-md"},{default:d(()=>[i(L,{class:"p-8"},{default:d(()=>[o(l)&&!o(c)?(a(),n("div",K,[e("p",E,v(o(l)),1)])):b("",!0),t[11]||(t[11]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"InsightReader"),e("p",{class:"text-gray-600"},"登录开始深度阅读之旅")],-1)),e("div",F,[i(m,{onClick:k,variant:"outline",size:"lg",class:"w-full h-12 text-base font-medium border-2 hover:bg-gray-50"},{default:d(()=>[...t[2]||(t[2]=[e("svg",{class:"mr-3 h-5 w-5",viewBox:"0 0 24 24"},[e("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})],-1),u(" 通过 Google 登录 ",-1)])]),_:1}),i(m,{onClick:C,variant:"outline",size:"lg",class:"w-full h-12 text-base font-medium border-2 hover:bg-gray-50"},{default:d(()=>[...t[3]||(t[3]=[e("svg",{class:"mr-3 h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clip-rule":"evenodd"})],-1),u(" 通过 GitHub 登录 ",-1)])]),_:1})]),t[12]||(t[12]=e("div",{class:"relative mb-6"},[e("div",{class:"absolute inset-0 flex items-center"},[e("div",{class:"w-full border-t border-gray-300"})]),e("div",{class:"relative flex justify-center text-sm"},[e("span",{class:"px-4 bg-white text-gray-500"},"或使用邮箱继续")])],-1)),o(c)?(a(),n("div",O,[e("div",Q,[e("div",X,[t[9]||(t[9]=e("svg",{class:"h-5 w-5 text-green-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[t[8]||(t[8]=e("h3",{class:"text-sm font-medium text-green-800 mb-1"},"邮件已发送！",-1)),e("p",Y,[t[6]||(t[6]=u(" 我们已向 ",-1)),e("strong",null,v(o(r)),1),t[7]||(t[7]=u(" 发送了登录链接。 请检查你的邮箱并点击链接完成登录。 ",-1))])])])]),i(m,{onClick:t[1]||(t[1]=x=>c.value=!1),variant:"outline",class:"w-full"},{default:d(()=>[...t[10]||(t[10]=[u(" 使用其他邮箱 ",-1)])]),_:1})])):(a(),n("div",S,[e("div",T,[e("div",null,[t[4]||(t[4]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"}," 邮箱地址 ",-1)),$(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=x=>q(r)?r.value=x:null),type:"email",required:"",placeholder:"your@email.com",onKeypress:j(p,["enter"]),class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,544),[[N,o(r)]])]),i(m,{onClick:p,class:"w-full"},{default:d(()=>[o(g)?(a(),n("div",W,[...t[5]||(t[5]=[e("div",{class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"},null,-1),u(" 发送中... ",-1)])])):(a(),n("span",P,"发送登录链接"))]),_:1})]),o(l)?(a(),n("div",U,[e("p",J,v(o(l)),1)])):b("",!0)])),t[13]||(t[13]=e("div",{class:"mt-6 text-center text-xs text-gray-500"},[e("p",null,"登录即表示你同意我们的服务条款和隐私政策"),e("p",{class:"mt-2"},"无需密码，更安全更便捷")],-1))]),_:1})]),_:1})])}}});export{le as default};
