import{_ as v}from"./CR-T6FEM.js";import{_ as k}from"./C3IiFqp8.js";import{a as y,_ as w}from"./Dh0Zgqt2.js";import{D as h,aa as C,ab as B,v as u,m as j,u as M,c as s,b as o,w as n,o as r,x as c,a as t,t as L,d as N}from"#entry";import{a as V}from"./D0N764uA.js";const R={class:"min-h-screen bg-gray-50 flex items-center justify-center px-6"},$={key:0,class:"text-center"},D={key:1,class:"text-center"},S={key:2,class:"text-center"},T={class:"text-red-600 mb-6"},F=h({__name:"magic",setup(q){const m=C(),f=B(),{verifyMagicLink:x}=V(),a=u(!0),d=u(!1),l=u("");return j(async()=>{const i=m.query.token;if(!i){a.value=!1,l.value="缺少验证令牌";return}const e=await x(i);a.value=!1,e.success?(d.value=!0,setTimeout(()=>{f.push("/")},1500)):l.value=e.error||"验证链接失败或已过期"}),M({title:"验证登录 - InsightReader"}),(i,e)=>{const _=v,p=k,b=w,g=y;return r(),s("div",R,[o(g,{class:"w-full max-w-md"},{default:n(()=>[o(b,{class:"p-8"},{default:n(()=>[c(a)?(r(),s("div",$,[...e[0]||(e[0]=[t("div",{class:"animate-spin h-12 w-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"},null,-1),t("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"验证中...",-1),t("p",{class:"text-gray-600"},"正在验证你的登录链接",-1)])])):c(d)?(r(),s("div",D,[...e[1]||(e[1]=[t("div",{class:"bg-green-100 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4"},[t("svg",{class:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1),t("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"登录成功！",-1),t("p",{class:"text-gray-600 mb-6"},"正在跳转...",-1)])])):(r(),s("div",S,[e[3]||(e[3]=t("div",{class:"bg-red-100 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4"},[t("svg",{class:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e[4]||(e[4]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"验证失败",-1)),t("p",T,L(c(l)),1),o(p,{to:"/login"},{default:n(()=>[o(_,null,{default:n(()=>[...e[2]||(e[2]=[N("返回登录",-1)])]),_:1})]),_:1})]))]),_:1})]),_:1})])}}});export{F as default};
