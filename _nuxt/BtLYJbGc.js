import{u as Ne,e as fo,_ as po}from"./D9OcSWRS.js";import{i as go,p as vo,e as G,g as Zn,f as es,s as It,r as Z,h as le,j as Ee,k as mo,n as Re,l as S,m as de,q as Je,v as M,x as v,y as ho,z as ts,A as yo,B as bo,C as Ge,D as O,E as Ve,F as Tt,G as rn,H as z,o as _,w as A,I as D,J as ce,K as P,T as xo,L as J,c as k,M as K,N as oe,O as ns,P as et,Q as wo,b as L,a as n,d as X,R as Rt,S as be,U as _o,V as ko,t as T,W as gn,X as zt,Y as Ht,Z as Co,$ as ve,a0 as me,a1 as pt,a2 as j,a3 as Ye,_ as $e,a4 as ne,a5 as fe,a6 as $o,a7 as So,a8 as an,a9 as Et,u as Ao,aa as To}from"#entry";import{r as Eo,P as pe,c as Me,a as Mo,_ as vn}from"./CR-T6FEM.js";import{u as N,a as gt}from"./D0N764uA.js";import{m as dt,u as Bo}from"./BZZabpe4.js";import{_ as Mt,a as Bt}from"./Dh0Zgqt2.js";import"./C3IiFqp8.js";function Lo(e,t=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY){return Math.min(s,Math.max(t,e))}function je(e,t){const s=typeof e=="string"&&!t?`${e}Context`:t,o=Symbol(s);return[l=>{const d=go(o,l);if(d||d===null)return d;throw new Error(`Injection \`${o.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},l=>(vo(o,l),l)]}function ss(e,t,s){const o=s.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&o.addEventListener(e,t,{once:!0}),o.dispatchEvent(r)}const[os]=je("ConfigProvider");function Po(e,t){var s;const o=It();return Ee(()=>{o.value=e()},{...t,flush:(s=void 0)!=null?s:"sync"}),Z(o)}function vt(e){return Zn()?(es(e),!0):!1}function Oo(){const e=new Set,t=a=>{e.delete(a)};return{on:a=>{e.add(a);const l=()=>t(a);return vt(l),{off:l}},off:t,trigger:(...a)=>Promise.all(Array.from(e).map(l=>l(...a))),clear:()=>{e.clear()}}}const mt=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Io=e=>typeof e<"u",Ro=Object.prototype.toString,zo=e=>Ro.call(e)==="[object Object]",En=()=>{};function Ho(e,t){function s(...o){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(a)})}return s}function jo(e,t={}){let s,o,r=En;const a=f=>{clearTimeout(f),r(),r=En};let l;return f=>{const c=le(e),i=le(t.maxWait);return s&&a(s),c<=0||i!==void 0&&i<=0?(o&&(a(o),o=null),Promise.resolve(f())):new Promise((p,u)=>{r=t.rejectOnCancel?u:p,l=f,i&&!o&&(o=setTimeout(()=>{s&&a(s),o=null,p(l())},i)),s=setTimeout(()=>{o&&a(o),o=null,p(f())},c)})}}function tn(e){return Array.isArray(e)?e:[e]}function Do(e,t=1e4){return mo((s,o)=>{let r=le(e),a;const l=()=>setTimeout(()=>{r=le(e),o()},le(t));return vt(()=>{clearTimeout(a)}),{get(){return s(),r},set(d){r=d,o(),clearTimeout(a),a=l()}}})}function rs(e,t=200,s={}){return Ho(jo(t,s),e)}const qo=le;function as(e,t,s={}){const{immediate:o=!0,immediateCallback:r=!1}=s,a=It(!1);let l=null;function d(){l&&(clearTimeout(l),l=null)}function f(){a.value=!1,d()}function c(...i){r&&e(),d(),a.value=!0,l=setTimeout(()=>{a.value=!1,l=null,e(...i)},le(t))}return o&&(a.value=!0,mt&&c()),vt(f),{isPending:Z(a),start:c,stop:f}}function No(e,t,s){return G(e,t,{...s,immediate:!0})}function Vo(e,t,s){const o=G(e,(...r)=>(Re(()=>o()),t(...r)),s);return o}const jt=mt?window:void 0;function Fe(e){var t;const s=le(e);return(t=s?.$el)!=null?t:s}function ln(...e){const t=[],s=()=>{t.forEach(d=>d()),t.length=0},o=(d,f,c,i)=>(d.addEventListener(f,c,i),()=>d.removeEventListener(f,c,i)),r=S(()=>{const d=tn(le(e[0])).filter(f=>f!=null);return d.every(f=>typeof f!="string")?d:void 0}),a=No(()=>{var d,f;return[(f=(d=r.value)==null?void 0:d.map(c=>Fe(c)))!=null?f:[jt].filter(c=>c!=null),tn(le(r.value?e[1]:e[0])),tn(v(r.value?e[2]:e[1])),le(r.value?e[3]:e[2])]},([d,f,c,i])=>{if(s(),!d?.length||!f?.length||!c?.length)return;const p=zo(i)?{...i}:i;t.push(...d.flatMap(u=>f.flatMap(g=>c.map(y=>o(u,g,y,p)))))},{flush:"post"}),l=()=>{a(),s()};return vt(s),l}function ls(){const e=It(!1),t=Je();return t&&de(()=>{e.value=!0},t),e}function Fo(e){const t=ls();return S(()=>(t.value,!!e()))}function Wo(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Uo(...e){let t,s,o={};e.length===3?(t=e[0],s=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,s=e[0],o=e[1]):(t=e[0],s=e[1]):(t=!0,s=e[0]);const{target:r=jt,eventName:a="keydown",passive:l=!1,dedupe:d=!1}=o,f=Wo(t);return ln(r,a,i=>{i.repeat&&le(d)||f(i)&&s(i)},l)}function Go(e){return JSON.parse(JSON.stringify(e))}function st(e,t,s={}){const{window:o=jt,...r}=s;let a;const l=Fo(()=>o&&"ResizeObserver"in o),d=()=>{a&&(a.disconnect(),a=void 0)},f=S(()=>{const p=le(e);return Array.isArray(p)?p.map(u=>Fe(u)):[Fe(p)]}),c=G(f,p=>{if(d(),l.value&&o){a=new ResizeObserver(t);for(const u of p)u&&a.observe(u,r)}},{immediate:!0,flush:"post"}),i=()=>{d(),c()};return vt(i),{isSupported:l,stop:i}}function is(e,t,s,o={}){var r,a,l;const{clone:d=!1,passive:f=!1,eventName:c,deep:i=!1,defaultValue:p,shouldEmit:u}=o,g=Je(),y=s||g?.emit||((r=g?.$emit)==null?void 0:r.bind(g))||((l=(a=g?.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(g?.proxy));let b=c;t||(t="modelValue"),b=b||`update:${t.toString()}`;const h=x=>d?typeof d=="function"?d(x):Go(x):x,m=()=>Io(e[t])?h(e[t]):p,w=x=>{u?u(x)&&y(b,x):y(b,x)};if(f){const x=m(),$=M(x);let C=!1;return G(()=>e[t],R=>{C||(C=!0,$.value=h(R),Re(()=>C=!1))}),G($,R=>{!C&&(R!==e[t]||i)&&w(R)},{deep:i}),$}else return S({get(){return m()},set(x){w(x)}})}function Ko(e){const t=os({dir:M("ltr")});return S(()=>e?.value||t.dir?.value||"ltr")}function Yo(e){const t=Je(),s=t?.type.emits,o={};return s?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),s?.forEach(r=>{o[ho(ts(r))]=(...a)=>e(r,...a)}),o}function Xo(e){return S(()=>qo(e)?!!Fe(e)?.closest("form"):!0)}function ee(){const e=Je(),t=M(),s=S(()=>["#text","#comment"].includes(t.value?.$el.nodeName)?t.value?.$el.nextElementSibling:Fe(t)),o=Object.assign({},e.exposed),r={};for(const l in e.props)Object.defineProperty(r,l,{enumerable:!0,configurable:!0,get:()=>e.props[l]});if(Object.keys(o).length>0)for(const l in o)Object.defineProperty(r,l,{enumerable:!0,configurable:!0,get:()=>o[l]});Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=r;function a(l){t.value=l,l&&(Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>l instanceof Element?l:l.$el}),e.exposed=r)}return{forwardRef:a,currentRef:t,currentElement:s}}function cs(e){const t=Je(),s=Object.keys(t?.type.props??{}).reduce((r,a)=>{const l=(t?.type.props[a]).default;return l!==void 0&&(r[a]=l),r},{}),o=yo(e);return S(()=>{const r={},a=t?.vnode.props??{};return Object.keys(a).forEach(l=>{r[ts(l)]=a[l]}),Object.keys({...s,...r}).reduce((l,d)=>(o.value[d]!==void 0&&(l[d]=o.value[d]),l),{})})}function Dt(e,t){const s=cs(e),o=t?Yo(t):{};return S(()=>({...s.value,...o}))}function Jo(e,t){const s=Do(!1,300),o=M(null),r=Oo();function a(){o.value=null,s.value=!1}function l(d,f){const c=d.currentTarget,i={x:d.clientX,y:d.clientY},p=Qo(i,c.getBoundingClientRect()),u=Zo(i,p),g=er(f.getBoundingClientRect()),y=nr([...u,...g]);o.value=y,s.value=!0}return Ee(d=>{if(e.value&&t.value){const f=i=>l(i,t.value),c=i=>l(i,e.value);e.value.addEventListener("pointerleave",f),t.value.addEventListener("pointerleave",c),d(()=>{e.value?.removeEventListener("pointerleave",f),t.value?.removeEventListener("pointerleave",c)})}}),Ee(d=>{if(o.value){const f=c=>{if(!o.value||!(c.target instanceof HTMLElement))return;const i=c.target,p={x:c.clientX,y:c.clientY},u=e.value?.contains(i)||t.value?.contains(i),g=!tr(p,o.value),y=!!i.closest("[data-grace-area-trigger]");u?a():(g||y)&&(a(),r.trigger())};e.value?.ownerDocument.addEventListener("pointermove",f),d(()=>e.value?.ownerDocument.removeEventListener("pointermove",f))}}),{isPointerInTransit:s,onPointerExit:r.on}}function Qo(e,t){const s=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,o,r,a)){case a:return"left";case r:return"right";case s:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Zo(e,t,s=5){const o=[];switch(t){case"top":o.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":o.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":o.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":o.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return o}function er(e){const{top:t,right:s,bottom:o,left:r}=e;return[{x:r,y:t},{x:s,y:t},{x:s,y:o},{x:r,y:o}]}function tr(e,t){const{x:s,y:o}=e;let r=!1;for(let a=0,l=t.length-1;a<t.length;l=a++){const d=t[a].x,f=t[a].y,c=t[l].x,i=t[l].y;f>o!=i>o&&s<(c-d)*(o-f)/(i-f)+d&&(r=!r)}return r}function nr(e){const t=e.slice();return t.sort((s,o)=>s.x<o.x?-1:s.x>o.x?1:s.y<o.y?-1:s.y>o.y?1:0),sr(t)}function sr(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const r=e[o];for(;t.length>=2;){const a=t[t.length-1],l=t[t.length-2];if((a.x-l.x)*(r.y-l.y)>=(a.y-l.y)*(r.x-l.x))t.pop();else break}t.push(r)}t.pop();const s=[];for(let o=e.length-1;o>=0;o--){const r=e[o];for(;s.length>=2;){const a=s[s.length-1],l=s[s.length-2];if((a.x-l.x)*(r.y-l.y)>=(a.y-l.y)*(r.x-l.x))s.pop();else break}s.push(r)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}function or(e,t="reka"){return`${t}-${bo?.()}`}function rr(e){const t=M(),s=S(()=>t.value?.width??0),o=S(()=>t.value?.height??0);return de(()=>{const r=Fe(e);if(r){t.value={width:r.offsetWidth,height:r.offsetHeight};const a=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const d=l[0];let f,c;if("borderBoxSize"in d){const i=d.borderBoxSize,p=Array.isArray(i)?i[0]:i;f=p.inlineSize,c=p.blockSize}else f=r.offsetWidth,c=r.offsetHeight;t.value={width:f,height:c}});return a.observe(r,{box:"border-box"}),()=>a.unobserve(r)}else t.value=void 0}),{width:s,height:o}}function ds(e,t){const s=M(e);function o(a){return t[s.value][a]??s.value}return{state:s,dispatch:a=>{s.value=o(a)}}}function ar(e,t){const s=M({}),o=M("none"),r=M(e),a=e.value?"mounted":"unmounted";let l;const d=t.value?.ownerDocument.defaultView??jt,{state:f,dispatch:c}=ds(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),i=h=>{if(mt){const m=new CustomEvent(h,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(m)}};G(e,async(h,m)=>{const w=m!==h;if(await Re(),w){const x=o.value,$=xt(t.value);h?(c("MOUNT"),i("enter"),$==="none"&&i("after-enter")):$==="none"||$==="undefined"||s.value?.display==="none"?(c("UNMOUNT"),i("leave"),i("after-leave")):m&&x!==$?(c("ANIMATION_OUT"),i("leave")):(c("UNMOUNT"),i("after-leave"))}},{immediate:!0});const p=h=>{const m=xt(t.value),w=m.includes(CSS.escape(h.animationName)),x=f.value==="mounted"?"enter":"leave";if(h.target===t.value&&w&&(i(`after-${x}`),c("ANIMATION_END"),!r.value)){const $=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",l=d?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=$)})}h.target===t.value&&m==="none"&&c("ANIMATION_END")},u=h=>{h.target===t.value&&(o.value=xt(t.value))},g=G(t,(h,m)=>{h?(s.value=getComputedStyle(h),h.addEventListener("animationstart",u),h.addEventListener("animationcancel",p),h.addEventListener("animationend",p)):(c("ANIMATION_END"),l!==void 0&&d?.clearTimeout(l),m?.removeEventListener("animationstart",u),m?.removeEventListener("animationcancel",p),m?.removeEventListener("animationend",p))},{immediate:!0}),y=G(f,()=>{const h=xt(t.value);o.value=f.value==="mounted"?h:"none"});return Ge(()=>{g(),y()}),{isPresent:S(()=>["mounted","unmountSuspended"].includes(f.value))}}function xt(e){return e&&getComputedStyle(e).animationName||"none"}var qt=O({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:s}){const{present:o,forceMount:r}=Ve(e),a=M(),{isPresent:l}=ar(o,a);s({present:l});let d=t.default({present:l.value});d=Eo(d||[]);const f=Je();if(d&&d?.length>1){const c=f?.parent?.type.name?`<${f.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(i=>`  - ${i}`).join(`
`)].join(`
`))}return()=>r.value||o.value||l.value?Tt(t.default({present:l.value})[0],{ref:c=>{const i=Fe(c);return typeof i?.hasAttribute>"u"||(i?.hasAttribute("data-reka-popper-content-wrapper")?a.value=i.firstElementChild:a.value=i),i}}):null}});function lr(){const e=M(),t=S(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:Fe(e));return{primitiveElement:e,currentElement:t}}const ir="dismissableLayer.pointerDownOutside",cr="dismissableLayer.focusOutside";function us(e,t){const s=t.closest("[data-dismissable-layer]"),o=e.dataset.dismissableLayer===""?e:e.querySelector("[data-dismissable-layer]"),r=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(s&&(o===s||r.indexOf(o)<r.indexOf(s)))}function dr(e,t,s=!0){const o=t?.value?.ownerDocument??globalThis?.document,r=M(!1),a=M(()=>{});return Ee(l=>{if(!mt||!le(s))return;const d=async c=>{const i=c.target;if(!(!t?.value||!i)){if(us(t.value,i)){r.value=!1;return}if(c.target&&!r.value){let u=function(){ss(ir,e,p)};const p={originalEvent:c};c.pointerType==="touch"?(o.removeEventListener("click",a.value),a.value=u,o.addEventListener("click",a.value,{once:!0})):u()}else o.removeEventListener("click",a.value);r.value=!1}},f=window.setTimeout(()=>{o.addEventListener("pointerdown",d)},0);l(()=>{window.clearTimeout(f),o.removeEventListener("pointerdown",d),o.removeEventListener("click",a.value)})}),{onPointerDownCapture:()=>{le(s)&&(r.value=!0)}}}function ur(e,t,s=!0){const o=t?.value?.ownerDocument??globalThis?.document,r=M(!1);return Ee(a=>{if(!mt||!le(s))return;const l=async d=>{if(!t?.value)return;await Re(),await Re();const f=d.target;!t.value||!f||us(t.value,f)||d.target&&!r.value&&ss(cr,e,{originalEvent:d})};o.addEventListener("focusin",l),a(()=>o.removeEventListener("focusin",l))}),{onFocusCapture:()=>{le(s)&&(r.value=!0)},onBlurCapture:()=>{le(s)&&(r.value=!1)}}}const Oe=rn({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var fr=O({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const s=e,o=t,{forwardRef:r,currentElement:a}=ee(),l=S(()=>a.value?.ownerDocument??globalThis.document),d=S(()=>Oe.layersRoot),f=S(()=>a.value?Array.from(d.value).indexOf(a.value):-1),c=S(()=>Oe.layersWithOutsidePointerEventsDisabled.size>0),i=S(()=>{const y=Array.from(d.value),[b]=[...Oe.layersWithOutsidePointerEventsDisabled].slice(-1),h=y.indexOf(b);return f.value>=h}),p=dr(async y=>{const b=[...Oe.branches].some(h=>h?.contains(y.target));!i.value||b||(o("pointerDownOutside",y),o("interactOutside",y),await Re(),y.defaultPrevented||o("dismiss"))},a),u=ur(y=>{[...Oe.branches].some(h=>h?.contains(y.target))||(o("focusOutside",y),o("interactOutside",y),y.defaultPrevented||o("dismiss"))},a);Uo("Escape",y=>{f.value===d.value.size-1&&(o("escapeKeyDown",y),y.defaultPrevented||o("dismiss"))});let g;return Ee(y=>{a.value&&(s.disableOutsidePointerEvents&&(Oe.layersWithOutsidePointerEventsDisabled.size===0&&(g=l.value.body.style.pointerEvents,l.value.body.style.pointerEvents="none"),Oe.layersWithOutsidePointerEventsDisabled.add(a.value)),d.value.add(a.value),y(()=>{s.disableOutsidePointerEvents&&Oe.layersWithOutsidePointerEventsDisabled.size===1&&(l.value.body.style.pointerEvents=g)}))}),Ee(y=>{y(()=>{a.value&&(d.value.delete(a.value),Oe.layersWithOutsidePointerEventsDisabled.delete(a.value))})}),(y,b)=>(_(),z(v(pe),{ref:v(r),"as-child":y.asChild,as:y.as,"data-dismissable-layer":"",style:ce({pointerEvents:c.value?i.value?"auto":"none":void 0}),onFocusCapture:v(u).onFocusCapture,onBlurCapture:v(u).onBlurCapture,onPointerdownCapture:v(p).onPointerDownCapture},{default:A(()=>[D(y.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),pr=fr,gr=O({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=ls();return(s,o)=>v(t)||s.forceMount?(_(),z(xo,{key:0,to:s.to,disabled:s.disabled,defer:s.defer},[D(s.$slots,"default")],8,["to","disabled","defer"])):P("v-if",!0)}}),vr=gr,mr=O({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){return(t,s)=>(_(),z(v(pe),{as:t.as,"as-child":t.asChild,"aria-hidden":t.feature==="focusable"?"true":void 0,"data-hidden":t.feature==="fully-hidden"?"":void 0,tabindex:t.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal",top:"-1px",left:"-1px"}},{default:A(()=>[D(t.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),fs=mr,hr=O({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(e){const t=e,{primitiveElement:s,currentElement:o}=lr(),r=S(()=>t.checked??t.value);return G(r,(a,l)=>{if(!o.value)return;const d=o.value,f=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(f,"value").set;if(i&&a!==l){const p=new Event("input",{bubbles:!0}),u=new Event("change",{bubbles:!0});i.call(d,a),d.dispatchEvent(p),d.dispatchEvent(u)}}),(a,l)=>(_(),z(fs,J({ref_key:"primitiveElement",ref:s},{...t,...a.$attrs},{as:"input"}),null,16))}}),Mn=hr,yr=O({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(e){const t=e,s=S(()=>typeof t.value=="object"&&Array.isArray(t.value)&&t.value.length===0&&t.required),o=S(()=>typeof t.value=="string"||typeof t.value=="number"||typeof t.value=="boolean"||t.value===null||t.value===void 0?[{name:t.name,value:t.value}]:typeof t.value=="object"&&Array.isArray(t.value)?t.value.flatMap((r,a)=>typeof r=="object"?Object.entries(r).map(([l,d])=>({name:`${t.name}[${a}][${l}]`,value:d})):{name:`${t.name}[${a}]`,value:r}):t.value!==null&&typeof t.value=="object"&&!Array.isArray(t.value)?Object.entries(t.value).map(([r,a])=>({name:`${t.name}[${r}]`,value:a})):[]);return(r,a)=>(_(),k(K,null,[P(" We render single input if it's required "),s.value?(_(),z(Mn,J({key:r.name},{...t,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(_(!0),k(K,{key:1},oe(o.value,l=>(_(),z(Mn,J({key:l.name},{ref_for:!0},{...t,...r.$attrs},{name:l.name,value:l.value}),null,16,["name","value"]))),128))],2112))}}),br=yr;const[ps,xr]=je("PopperRoot");var wr=O({inheritAttrs:!1,__name:"PopperRoot",setup(e){const t=M();return xr({anchor:t,onAnchorChange:s=>t.value=s}),(s,o)=>D(s.$slots,"default")}}),_r=wr,kr=O({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e,{forwardRef:s,currentElement:o}=ee(),r=ps();return ns(()=>{r.onAnchorChange(t.reference??o.value)}),(a,l)=>(_(),z(v(pe),{ref:v(s),as:a.as,"as-child":a.asChild},{default:A(()=>[D(a.$slots,"default")]),_:3},8,["as","as-child"]))}}),Cr=kr;function $r(e){return e!==null}function Sr(e){return{name:"transformOrigin",options:e,fn(t){const{placement:s,rects:o,middlewareData:r}=t,l=r.arrow?.centerOffset!==0,d=l?0:e.arrowWidth,f=l?0:e.arrowHeight,[c,i]=cn(s),p={start:"0%",center:"50%",end:"100%"}[i],u=(r.arrow?.x??0)+d/2,g=(r.arrow?.y??0)+f/2;let y="",b="";return c==="bottom"?(y=l?p:`${u}px`,b=`${-f}px`):c==="top"?(y=l?p:`${u}px`,b=`${o.floating.height+f}px`):c==="right"?(y=`${-f}px`,b=l?p:`${g}px`):c==="left"&&(y=`${o.floating.width+f}px`,b=l?p:`${g}px`),{data:{x:y,y:b}}}}}function cn(e){const[t,s="center"]=e.split("-");return[t,s]}const Ar=["top","right","bottom","left"],We=Math.min,ge=Math.max,Lt=Math.round,wt=Math.floor,Te=e=>({x:e,y:e}),Tr={left:"right",right:"left",bottom:"top",top:"bottom"},Er={start:"end",end:"start"};function dn(e,t,s){return ge(e,We(t,s))}function ze(e,t){return typeof e=="function"?e(t):e}function He(e){return e.split("-")[0]}function rt(e){return e.split("-")[1]}function mn(e){return e==="x"?"y":"x"}function hn(e){return e==="y"?"height":"width"}const Mr=new Set(["top","bottom"]);function Ae(e){return Mr.has(He(e))?"y":"x"}function yn(e){return mn(Ae(e))}function Br(e,t,s){s===void 0&&(s=!1);const o=rt(e),r=yn(e),a=hn(r);let l=r==="x"?o===(s?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(l=Pt(l)),[l,Pt(l)]}function Lr(e){const t=Pt(e);return[un(e),t,un(t)]}function un(e){return e.replace(/start|end/g,t=>Er[t])}const Bn=["left","right"],Ln=["right","left"],Pr=["top","bottom"],Or=["bottom","top"];function Ir(e,t,s){switch(e){case"top":case"bottom":return s?t?Ln:Bn:t?Bn:Ln;case"left":case"right":return t?Pr:Or;default:return[]}}function Rr(e,t,s,o){const r=rt(e);let a=Ir(He(e),s==="start",o);return r&&(a=a.map(l=>l+"-"+r),t&&(a=a.concat(a.map(un)))),a}function Pt(e){return e.replace(/left|right|bottom|top/g,t=>Tr[t])}function zr(e){return{top:0,right:0,bottom:0,left:0,...e}}function gs(e){return typeof e!="number"?zr(e):{top:e,right:e,bottom:e,left:e}}function Ot(e){const{x:t,y:s,width:o,height:r}=e;return{width:o,height:r,top:s,left:t,right:t+o,bottom:s+r,x:t,y:s}}function Pn(e,t,s){let{reference:o,floating:r}=e;const a=Ae(t),l=yn(t),d=hn(l),f=He(t),c=a==="y",i=o.x+o.width/2-r.width/2,p=o.y+o.height/2-r.height/2,u=o[d]/2-r[d]/2;let g;switch(f){case"top":g={x:i,y:o.y-r.height};break;case"bottom":g={x:i,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:p};break;case"left":g={x:o.x-r.width,y:p};break;default:g={x:o.x,y:o.y}}switch(rt(t)){case"start":g[l]-=u*(s&&c?-1:1);break;case"end":g[l]+=u*(s&&c?-1:1);break}return g}const Hr=async(e,t,s)=>{const{placement:o="bottom",strategy:r="absolute",middleware:a=[],platform:l}=s,d=a.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(t));let c=await l.getElementRects({reference:e,floating:t,strategy:r}),{x:i,y:p}=Pn(c,o,f),u=o,g={},y=0;for(let b=0;b<d.length;b++){const{name:h,fn:m}=d[b],{x:w,y:x,data:$,reset:C}=await m({x:i,y:p,initialPlacement:o,placement:u,strategy:r,middlewareData:g,rects:c,platform:l,elements:{reference:e,floating:t}});i=w??i,p=x??p,g={...g,[h]:{...g[h],...$}},C&&y<=50&&(y++,typeof C=="object"&&(C.placement&&(u=C.placement),C.rects&&(c=C.rects===!0?await l.getElementRects({reference:e,floating:t,strategy:r}):C.rects),{x:i,y:p}=Pn(c,u,f)),b=-1)}return{x:i,y:p,placement:u,strategy:r,middlewareData:g}};async function ut(e,t){var s;t===void 0&&(t={});const{x:o,y:r,platform:a,rects:l,elements:d,strategy:f}=e,{boundary:c="clippingAncestors",rootBoundary:i="viewport",elementContext:p="floating",altBoundary:u=!1,padding:g=0}=ze(t,e),y=gs(g),h=d[u?p==="floating"?"reference":"floating":p],m=Ot(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(h)))==null||s?h:h.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(d.floating)),boundary:c,rootBoundary:i,strategy:f})),w=p==="floating"?{x:o,y:r,width:l.floating.width,height:l.floating.height}:l.reference,x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d.floating)),$=await(a.isElement==null?void 0:a.isElement(x))?await(a.getScale==null?void 0:a.getScale(x))||{x:1,y:1}:{x:1,y:1},C=Ot(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:w,offsetParent:x,strategy:f}):w);return{top:(m.top-C.top+y.top)/$.y,bottom:(C.bottom-m.bottom+y.bottom)/$.y,left:(m.left-C.left+y.left)/$.x,right:(C.right-m.right+y.right)/$.x}}const jr=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:o,placement:r,rects:a,platform:l,elements:d,middlewareData:f}=t,{element:c,padding:i=0}=ze(e,t)||{};if(c==null)return{};const p=gs(i),u={x:s,y:o},g=yn(r),y=hn(g),b=await l.getDimensions(c),h=g==="y",m=h?"top":"left",w=h?"bottom":"right",x=h?"clientHeight":"clientWidth",$=a.reference[y]+a.reference[g]-u[g]-a.floating[y],C=u[g]-a.reference[g],R=await(l.getOffsetParent==null?void 0:l.getOffsetParent(c));let I=R?R[x]:0;(!I||!await(l.isElement==null?void 0:l.isElement(R)))&&(I=d.floating[x]||a.floating[y]);const E=$/2-C/2,B=I/2-b[y]/2-1,V=We(p[m],B),F=We(p[w],B),W=V,se=I-b[y]-F,U=I/2-b[y]/2+E,ie=dn(W,U,se),ae=!f.arrow&&rt(r)!=null&&U!==ie&&a.reference[y]/2-(U<W?V:F)-b[y]/2<0,Q=ae?U<W?U-W:U-se:0;return{[g]:u[g]+Q,data:{[g]:ie,centerOffset:U-ie-Q,...ae&&{alignmentOffset:Q}},reset:ae}}}),Dr=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,o;const{placement:r,middlewareData:a,rects:l,initialPlacement:d,platform:f,elements:c}=t,{mainAxis:i=!0,crossAxis:p=!0,fallbackPlacements:u,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...h}=ze(e,t);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const m=He(r),w=Ae(d),x=He(d)===d,$=await(f.isRTL==null?void 0:f.isRTL(c.floating)),C=u||(x||!b?[Pt(d)]:Lr(d)),R=y!=="none";!u&&R&&C.push(...Rr(d,b,y,$));const I=[d,...C],E=await ut(t,h),B=[];let V=((o=a.flip)==null?void 0:o.overflows)||[];if(i&&B.push(E[m]),p){const U=Br(r,l,$);B.push(E[U[0]],E[U[1]])}if(V=[...V,{placement:r,overflows:B}],!B.every(U=>U<=0)){var F,W;const U=(((F=a.flip)==null?void 0:F.index)||0)+1,ie=I[U];if(ie&&(!(p==="alignment"?w!==Ae(ie):!1)||V.every(Y=>Ae(Y.placement)===w?Y.overflows[0]>0:!0)))return{data:{index:U,overflows:V},reset:{placement:ie}};let ae=(W=V.filter(Q=>Q.overflows[0]<=0).sort((Q,Y)=>Q.overflows[1]-Y.overflows[1])[0])==null?void 0:W.placement;if(!ae)switch(g){case"bestFit":{var se;const Q=(se=V.filter(Y=>{if(R){const ye=Ae(Y.placement);return ye===w||ye==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(ye=>ye>0).reduce((ye,ue)=>ye+ue,0)]).sort((Y,ye)=>Y[1]-ye[1])[0])==null?void 0:se[0];Q&&(ae=Q);break}case"initialPlacement":ae=d;break}if(r!==ae)return{reset:{placement:ae}}}return{}}}};function On(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function In(e){return Ar.some(t=>e[t]>=0)}const qr=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:o="referenceHidden",...r}=ze(e,t);switch(o){case"referenceHidden":{const a=await ut(t,{...r,elementContext:"reference"}),l=On(a,s.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:In(l)}}}case"escaped":{const a=await ut(t,{...r,altBoundary:!0}),l=On(a,s.floating);return{data:{escapedOffsets:l,escaped:In(l)}}}default:return{}}}}},vs=new Set(["left","top"]);async function Nr(e,t){const{placement:s,platform:o,elements:r}=e,a=await(o.isRTL==null?void 0:o.isRTL(r.floating)),l=He(s),d=rt(s),f=Ae(s)==="y",c=vs.has(l)?-1:1,i=a&&f?-1:1,p=ze(t,e);let{mainAxis:u,crossAxis:g,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return d&&typeof y=="number"&&(g=d==="end"?y*-1:y),f?{x:g*i,y:u*c}:{x:u*c,y:g*i}}const Vr=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,o;const{x:r,y:a,placement:l,middlewareData:d}=t,f=await Nr(t,e);return l===((s=d.offset)==null?void 0:s.placement)&&(o=d.arrow)!=null&&o.alignmentOffset?{}:{x:r+f.x,y:a+f.y,data:{...f,placement:l}}}}},Fr=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:o,placement:r}=t,{mainAxis:a=!0,crossAxis:l=!1,limiter:d={fn:h=>{let{x:m,y:w}=h;return{x:m,y:w}}},...f}=ze(e,t),c={x:s,y:o},i=await ut(t,f),p=Ae(He(r)),u=mn(p);let g=c[u],y=c[p];if(a){const h=u==="y"?"top":"left",m=u==="y"?"bottom":"right",w=g+i[h],x=g-i[m];g=dn(w,g,x)}if(l){const h=p==="y"?"top":"left",m=p==="y"?"bottom":"right",w=y+i[h],x=y-i[m];y=dn(w,y,x)}const b=d.fn({...t,[u]:g,[p]:y});return{...b,data:{x:b.x-s,y:b.y-o,enabled:{[u]:a,[p]:l}}}}}},Wr=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:o,placement:r,rects:a,middlewareData:l}=t,{offset:d=0,mainAxis:f=!0,crossAxis:c=!0}=ze(e,t),i={x:s,y:o},p=Ae(r),u=mn(p);let g=i[u],y=i[p];const b=ze(d,t),h=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(f){const x=u==="y"?"height":"width",$=a.reference[u]-a.floating[x]+h.mainAxis,C=a.reference[u]+a.reference[x]-h.mainAxis;g<$?g=$:g>C&&(g=C)}if(c){var m,w;const x=u==="y"?"width":"height",$=vs.has(He(r)),C=a.reference[p]-a.floating[x]+($&&((m=l.offset)==null?void 0:m[p])||0)+($?0:h.crossAxis),R=a.reference[p]+a.reference[x]+($?0:((w=l.offset)==null?void 0:w[p])||0)-($?h.crossAxis:0);y<C?y=C:y>R&&(y=R)}return{[u]:g,[p]:y}}}},Ur=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,o;const{placement:r,rects:a,platform:l,elements:d}=t,{apply:f=()=>{},...c}=ze(e,t),i=await ut(t,c),p=He(r),u=rt(r),g=Ae(r)==="y",{width:y,height:b}=a.floating;let h,m;p==="top"||p==="bottom"?(h=p,m=u===(await(l.isRTL==null?void 0:l.isRTL(d.floating))?"start":"end")?"left":"right"):(m=p,h=u==="end"?"top":"bottom");const w=b-i.top-i.bottom,x=y-i.left-i.right,$=We(b-i[h],w),C=We(y-i[m],x),R=!t.middlewareData.shift;let I=$,E=C;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(E=x),(o=t.middlewareData.shift)!=null&&o.enabled.y&&(I=w),R&&!u){const V=ge(i.left,0),F=ge(i.right,0),W=ge(i.top,0),se=ge(i.bottom,0);g?E=y-2*(V!==0||F!==0?V+F:ge(i.left,i.right)):I=b-2*(W!==0||se!==0?W+se:ge(i.top,i.bottom))}await f({...t,availableWidth:E,availableHeight:I});const B=await l.getDimensions(d.floating);return y!==B.width||b!==B.height?{reset:{rects:!0}}:{}}}};function Nt(){return typeof window<"u"}function Qe(e){return bn(e)?(e.nodeName||"").toLowerCase():"#document"}function he(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Le(e){var t;return(t=(bn(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bn(e){return Nt()?e instanceof Node||e instanceof he(e).Node:!1}function ke(e){return Nt()?e instanceof Element||e instanceof he(e).Element:!1}function Be(e){return Nt()?e instanceof HTMLElement||e instanceof he(e).HTMLElement:!1}function Rn(e){return!Nt()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof he(e).ShadowRoot}const Gr=new Set(["inline","contents"]);function ht(e){const{overflow:t,overflowX:s,overflowY:o,display:r}=Ce(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+s)&&!Gr.has(r)}const Kr=new Set(["table","td","th"]);function Yr(e){return Kr.has(Qe(e))}const Xr=[":popover-open",":modal"];function Vt(e){return Xr.some(t=>{try{return e.matches(t)}catch{return!1}})}const Jr=["transform","translate","scale","rotate","perspective"],Qr=["transform","translate","scale","rotate","perspective","filter"],Zr=["paint","layout","strict","content"];function xn(e){const t=wn(),s=ke(e)?Ce(e):e;return Jr.some(o=>s[o]?s[o]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||Qr.some(o=>(s.willChange||"").includes(o))||Zr.some(o=>(s.contain||"").includes(o))}function ea(e){let t=Ue(e);for(;Be(t)&&!ot(t);){if(xn(t))return t;if(Vt(t))return null;t=Ue(t)}return null}function wn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ta=new Set(["html","body","#document"]);function ot(e){return ta.has(Qe(e))}function Ce(e){return he(e).getComputedStyle(e)}function Ft(e){return ke(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ue(e){if(Qe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Rn(e)&&e.host||Le(e);return Rn(t)?t.host:t}function ms(e){const t=Ue(e);return ot(t)?e.ownerDocument?e.ownerDocument.body:e.body:Be(t)&&ht(t)?t:ms(t)}function ft(e,t,s){var o;t===void 0&&(t=[]),s===void 0&&(s=!0);const r=ms(e),a=r===((o=e.ownerDocument)==null?void 0:o.body),l=he(r);if(a){const d=fn(l);return t.concat(l,l.visualViewport||[],ht(r)?r:[],d&&s?ft(d):[])}return t.concat(r,ft(r,[],s))}function fn(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function hs(e){const t=Ce(e);let s=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const r=Be(e),a=r?e.offsetWidth:s,l=r?e.offsetHeight:o,d=Lt(s)!==a||Lt(o)!==l;return d&&(s=a,o=l),{width:s,height:o,$:d}}function _n(e){return ke(e)?e:e.contextElement}function nt(e){const t=_n(e);if(!Be(t))return Te(1);const s=t.getBoundingClientRect(),{width:o,height:r,$:a}=hs(t);let l=(a?Lt(s.width):s.width)/o,d=(a?Lt(s.height):s.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!d||!Number.isFinite(d))&&(d=1),{x:l,y:d}}const na=Te(0);function ys(e){const t=he(e);return!wn()||!t.visualViewport?na:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sa(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==he(e)?!1:t}function Xe(e,t,s,o){t===void 0&&(t=!1),s===void 0&&(s=!1);const r=e.getBoundingClientRect(),a=_n(e);let l=Te(1);t&&(o?ke(o)&&(l=nt(o)):l=nt(e));const d=sa(a,s,o)?ys(a):Te(0);let f=(r.left+d.x)/l.x,c=(r.top+d.y)/l.y,i=r.width/l.x,p=r.height/l.y;if(a){const u=he(a),g=o&&ke(o)?he(o):o;let y=u,b=fn(y);for(;b&&o&&g!==y;){const h=nt(b),m=b.getBoundingClientRect(),w=Ce(b),x=m.left+(b.clientLeft+parseFloat(w.paddingLeft))*h.x,$=m.top+(b.clientTop+parseFloat(w.paddingTop))*h.y;f*=h.x,c*=h.y,i*=h.x,p*=h.y,f+=x,c+=$,y=he(b),b=fn(y)}}return Ot({width:i,height:p,x:f,y:c})}function Wt(e,t){const s=Ft(e).scrollLeft;return t?t.left+s:Xe(Le(e)).left+s}function bs(e,t){const s=e.getBoundingClientRect(),o=s.left+t.scrollLeft-Wt(e,s),r=s.top+t.scrollTop;return{x:o,y:r}}function oa(e){let{elements:t,rect:s,offsetParent:o,strategy:r}=e;const a=r==="fixed",l=Le(o),d=t?Vt(t.floating):!1;if(o===l||d&&a)return s;let f={scrollLeft:0,scrollTop:0},c=Te(1);const i=Te(0),p=Be(o);if((p||!p&&!a)&&((Qe(o)!=="body"||ht(l))&&(f=Ft(o)),Be(o))){const g=Xe(o);c=nt(o),i.x=g.x+o.clientLeft,i.y=g.y+o.clientTop}const u=l&&!p&&!a?bs(l,f):Te(0);return{width:s.width*c.x,height:s.height*c.y,x:s.x*c.x-f.scrollLeft*c.x+i.x+u.x,y:s.y*c.y-f.scrollTop*c.y+i.y+u.y}}function ra(e){return Array.from(e.getClientRects())}function aa(e){const t=Le(e),s=Ft(e),o=e.ownerDocument.body,r=ge(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),a=ge(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let l=-s.scrollLeft+Wt(e);const d=-s.scrollTop;return Ce(o).direction==="rtl"&&(l+=ge(t.clientWidth,o.clientWidth)-r),{width:r,height:a,x:l,y:d}}const zn=25;function la(e,t){const s=he(e),o=Le(e),r=s.visualViewport;let a=o.clientWidth,l=o.clientHeight,d=0,f=0;if(r){a=r.width,l=r.height;const i=wn();(!i||i&&t==="fixed")&&(d=r.offsetLeft,f=r.offsetTop)}const c=Wt(o);if(c<=0){const i=o.ownerDocument,p=i.body,u=getComputedStyle(p),g=i.compatMode==="CSS1Compat"&&parseFloat(u.marginLeft)+parseFloat(u.marginRight)||0,y=Math.abs(o.clientWidth-p.clientWidth-g);y<=zn&&(a-=y)}else c<=zn&&(a+=c);return{width:a,height:l,x:d,y:f}}const ia=new Set(["absolute","fixed"]);function ca(e,t){const s=Xe(e,!0,t==="fixed"),o=s.top+e.clientTop,r=s.left+e.clientLeft,a=Be(e)?nt(e):Te(1),l=e.clientWidth*a.x,d=e.clientHeight*a.y,f=r*a.x,c=o*a.y;return{width:l,height:d,x:f,y:c}}function Hn(e,t,s){let o;if(t==="viewport")o=la(e,s);else if(t==="document")o=aa(Le(e));else if(ke(t))o=ca(t,s);else{const r=ys(e);o={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Ot(o)}function xs(e,t){const s=Ue(e);return s===t||!ke(s)||ot(s)?!1:Ce(s).position==="fixed"||xs(s,t)}function da(e,t){const s=t.get(e);if(s)return s;let o=ft(e,[],!1).filter(d=>ke(d)&&Qe(d)!=="body"),r=null;const a=Ce(e).position==="fixed";let l=a?Ue(e):e;for(;ke(l)&&!ot(l);){const d=Ce(l),f=xn(l);!f&&d.position==="fixed"&&(r=null),(a?!f&&!r:!f&&d.position==="static"&&!!r&&ia.has(r.position)||ht(l)&&!f&&xs(e,l))?o=o.filter(i=>i!==l):r=d,l=Ue(l)}return t.set(e,o),o}function ua(e){let{element:t,boundary:s,rootBoundary:o,strategy:r}=e;const l=[...s==="clippingAncestors"?Vt(t)?[]:da(t,this._c):[].concat(s),o],d=l[0],f=l.reduce((c,i)=>{const p=Hn(t,i,r);return c.top=ge(p.top,c.top),c.right=We(p.right,c.right),c.bottom=We(p.bottom,c.bottom),c.left=ge(p.left,c.left),c},Hn(t,d,r));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function fa(e){const{width:t,height:s}=hs(e);return{width:t,height:s}}function pa(e,t,s){const o=Be(t),r=Le(t),a=s==="fixed",l=Xe(e,!0,a,t);let d={scrollLeft:0,scrollTop:0};const f=Te(0);function c(){f.x=Wt(r)}if(o||!o&&!a)if((Qe(t)!=="body"||ht(r))&&(d=Ft(t)),o){const g=Xe(t,!0,a,t);f.x=g.x+t.clientLeft,f.y=g.y+t.clientTop}else r&&c();a&&!o&&r&&c();const i=r&&!o&&!a?bs(r,d):Te(0),p=l.left+d.scrollLeft-f.x-i.x,u=l.top+d.scrollTop-f.y-i.y;return{x:p,y:u,width:l.width,height:l.height}}function nn(e){return Ce(e).position==="static"}function jn(e,t){if(!Be(e)||Ce(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return Le(e)===s&&(s=s.ownerDocument.body),s}function ws(e,t){const s=he(e);if(Vt(e))return s;if(!Be(e)){let r=Ue(e);for(;r&&!ot(r);){if(ke(r)&&!nn(r))return r;r=Ue(r)}return s}let o=jn(e,t);for(;o&&Yr(o)&&nn(o);)o=jn(o,t);return o&&ot(o)&&nn(o)&&!xn(o)?s:o||ea(e)||s}const ga=async function(e){const t=this.getOffsetParent||ws,s=this.getDimensions,o=await s(e.floating);return{reference:pa(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function va(e){return Ce(e).direction==="rtl"}const ma={convertOffsetParentRelativeRectToViewportRelativeRect:oa,getDocumentElement:Le,getClippingRect:ua,getOffsetParent:ws,getElementRects:ga,getClientRects:ra,getDimensions:fa,getScale:nt,isElement:ke,isRTL:va};function _s(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ha(e,t){let s=null,o;const r=Le(e);function a(){var d;clearTimeout(o),(d=s)==null||d.disconnect(),s=null}function l(d,f){d===void 0&&(d=!1),f===void 0&&(f=1),a();const c=e.getBoundingClientRect(),{left:i,top:p,width:u,height:g}=c;if(d||t(),!u||!g)return;const y=wt(p),b=wt(r.clientWidth-(i+u)),h=wt(r.clientHeight-(p+g)),m=wt(i),x={rootMargin:-y+"px "+-b+"px "+-h+"px "+-m+"px",threshold:ge(0,We(1,f))||1};let $=!0;function C(R){const I=R[0].intersectionRatio;if(I!==f){if(!$)return l();I?l(!1,I):o=setTimeout(()=>{l(!1,1e-7)},1e3)}I===1&&!_s(c,e.getBoundingClientRect())&&l(),$=!1}try{s=new IntersectionObserver(C,{...x,root:r.ownerDocument})}catch{s=new IntersectionObserver(C,x)}s.observe(e)}return l(!0),a}function ya(e,t,s,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:f=!1}=o,c=_n(e),i=r||a?[...c?ft(c):[],...ft(t)]:[];i.forEach(m=>{r&&m.addEventListener("scroll",s,{passive:!0}),a&&m.addEventListener("resize",s)});const p=c&&d?ha(c,s):null;let u=-1,g=null;l&&(g=new ResizeObserver(m=>{let[w]=m;w&&w.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var x;(x=g)==null||x.observe(t)})),s()}),c&&!f&&g.observe(c),g.observe(t));let y,b=f?Xe(e):null;f&&h();function h(){const m=Xe(e);b&&!_s(b,m)&&s(),b=m,y=requestAnimationFrame(h)}return s(),()=>{var m;i.forEach(w=>{r&&w.removeEventListener("scroll",s),a&&w.removeEventListener("resize",s)}),p?.(),(m=g)==null||m.disconnect(),g=null,f&&cancelAnimationFrame(y)}}const ba=Vr,xa=Fr,Dn=Dr,wa=Ur,_a=qr,ka=jr,Ca=Wr,$a=(e,t,s)=>{const o=new Map,r={platform:ma,...s},a={...r.platform,_c:o};return Hr(e,t,{...r,platform:a})};function Sa(e){return e!=null&&typeof e=="object"&&"$el"in e}function pn(e){if(Sa(e)){const t=e.$el;return bn(t)&&Qe(t)==="#comment"?null:t}return e}function tt(e){return typeof e=="function"?e():v(e)}function Aa(e){return{name:"arrow",options:e,fn(t){const s=pn(tt(e.element));return s==null?{}:ka({element:s,padding:e.padding}).fn(t)}}}function ks(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qn(e,t){const s=ks(e);return Math.round(t*s)/s}function Ta(e,t,s){s===void 0&&(s={});const o=s.whileElementsMounted,r=S(()=>{var I;return(I=tt(s.open))!=null?I:!0}),a=S(()=>tt(s.middleware)),l=S(()=>{var I;return(I=tt(s.placement))!=null?I:"bottom"}),d=S(()=>{var I;return(I=tt(s.strategy))!=null?I:"absolute"}),f=S(()=>{var I;return(I=tt(s.transform))!=null?I:!0}),c=S(()=>pn(e.value)),i=S(()=>pn(t.value)),p=M(0),u=M(0),g=M(d.value),y=M(l.value),b=It({}),h=M(!1),m=S(()=>{const I={position:g.value,left:"0",top:"0"};if(!i.value)return I;const E=qn(i.value,p.value),B=qn(i.value,u.value);return f.value?{...I,transform:"translate("+E+"px, "+B+"px)",...ks(i.value)>=1.5&&{willChange:"transform"}}:{position:g.value,left:E+"px",top:B+"px"}});let w;function x(){if(c.value==null||i.value==null)return;const I=r.value;$a(c.value,i.value,{middleware:a.value,placement:l.value,strategy:d.value}).then(E=>{p.value=E.x,u.value=E.y,g.value=E.strategy,y.value=E.placement,b.value=E.middlewareData,h.value=I!==!1})}function $(){typeof w=="function"&&(w(),w=void 0)}function C(){if($(),o===void 0){x();return}if(c.value!=null&&i.value!=null){w=o(c.value,i.value,x);return}}function R(){r.value||(h.value=!1)}return G([a,l,d,r],x,{flush:"sync"}),G([c,i],C,{flush:"sync"}),G(r,R,{flush:"sync"}),Zn()&&es($),{x:et(p),y:et(u),strategy:et(g),placement:et(y),middlewareData:et(b),isPositioned:et(h),floatingStyles:m,update:x}}const Ea={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[Xp,Ma]=je("PopperContent");var Ba=O({inheritAttrs:!1,__name:"PopperContent",props:wo({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...Ea}),emits:["placed"],setup(e,{emit:t}){const s=e,o=t,r=ps(),{forwardRef:a,currentElement:l}=ee(),d=M(),f=M(),{width:c,height:i}=rr(f),p=S(()=>s.side+(s.align!=="center"?`-${s.align}`:"")),u=S(()=>typeof s.collisionPadding=="number"?s.collisionPadding:{top:0,right:0,bottom:0,left:0,...s.collisionPadding}),g=S(()=>Array.isArray(s.collisionBoundary)?s.collisionBoundary:[s.collisionBoundary]),y=S(()=>({padding:u.value,boundary:g.value.filter($r),altBoundary:g.value.length>0})),b=S(()=>({mainAxis:s.sideFlip,crossAxis:s.alignFlip})),h=Po(()=>[ba({mainAxis:s.sideOffset+i.value,alignmentAxis:s.alignOffset}),s.prioritizePosition&&s.avoidCollisions&&Dn({...y.value,...b.value}),s.avoidCollisions&&xa({mainAxis:!0,crossAxis:!!s.prioritizePosition,limiter:s.sticky==="partial"?Ca():void 0,...y.value}),!s.prioritizePosition&&s.avoidCollisions&&Dn({...y.value,...b.value}),wa({...y.value,apply:({elements:W,rects:se,availableWidth:U,availableHeight:ie})=>{const{width:ae,height:Q}=se.reference,Y=W.floating.style;Y.setProperty("--reka-popper-available-width",`${U}px`),Y.setProperty("--reka-popper-available-height",`${ie}px`),Y.setProperty("--reka-popper-anchor-width",`${ae}px`),Y.setProperty("--reka-popper-anchor-height",`${Q}px`)}}),f.value&&Aa({element:f.value,padding:s.arrowPadding}),Sr({arrowWidth:c.value,arrowHeight:i.value}),s.hideWhenDetached&&_a({strategy:"referenceHidden",...y.value})]),m=S(()=>s.reference??r.anchor.value),{floatingStyles:w,placement:x,isPositioned:$,middlewareData:C}=Ta(m,d,{strategy:s.positionStrategy,placement:p,whileElementsMounted:(...W)=>ya(...W,{layoutShift:!s.disableUpdateOnLayoutShift,animationFrame:s.updatePositionStrategy==="always"}),middleware:h}),R=S(()=>cn(x.value)[0]),I=S(()=>cn(x.value)[1]);ns(()=>{$.value&&o("placed")});const E=S(()=>C.value.arrow?.centerOffset!==0),B=M("");Ee(()=>{l.value&&(B.value=window.getComputedStyle(l.value).zIndex)});const V=S(()=>C.value.arrow?.x??0),F=S(()=>C.value.arrow?.y??0);return Ma({placedSide:R,onArrowChange:W=>f.value=W,arrowX:V,arrowY:F,shouldHideArrow:E}),(W,se)=>(_(),k("div",{ref_key:"floatingRef",ref:d,"data-reka-popper-content-wrapper":"",style:ce({...v(w),transform:v($)?v(w).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B.value,"--reka-popper-transform-origin":[v(C).transformOrigin?.x,v(C).transformOrigin?.y].join(" "),...v(C).hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}})},[L(v(pe),J({ref:v(a)},W.$attrs,{"as-child":s.asChild,as:W.as,"data-side":R.value,"data-align":I.value,style:{animation:v($)?void 0:"none"}}),{default:A(()=>[D(W.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4))}}),La=Ba;function Pa(e){const t=os({nonce:M()});return S(()=>e?.value||t.nonce?.value)}const[xe,Oa]=je("ScrollAreaRoot");var Ia=O({__name:"ScrollAreaRoot",props:{type:{type:String,required:!1,default:"hover"},dir:{type:String,required:!1},scrollHideDelay:{type:Number,required:!1,default:600},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e,{expose:t}){const s=e,o=M(0),r=M(0),a=M(),l=M(),d=M(),f=M(),c=M(!1),i=M(!1),{type:p,dir:u,scrollHideDelay:g}=Ve(s),y=Ko(u);function b(){a.value?.scrollTo({top:0})}function h(){a.value?.scrollTo({top:0,left:0})}t({viewport:a,scrollTop:b,scrollTopLeft:h});const{forwardRef:m,currentElement:w}=ee();return Oa({type:p,dir:y,scrollHideDelay:g,scrollArea:w,viewport:a,onViewportChange:x=>{a.value=x||void 0},content:l,onContentChange:x=>{l.value=x},scrollbarX:d,scrollbarXEnabled:c,scrollbarY:f,scrollbarYEnabled:i,onScrollbarXChange:x=>{d.value=x||void 0},onScrollbarYChange:x=>{f.value=x||void 0},onScrollbarXEnabledChange:x=>{c.value=x},onScrollbarYEnabledChange:x=>{i.value=x},onCornerWidthChange:x=>{o.value=x},onCornerHeightChange:x=>{r.value=x}}),(x,$)=>(_(),z(v(pe),{ref:v(m),"as-child":s.asChild,as:x.as,dir:v(y),style:ce({position:"relative","--reka-scroll-area-corner-width":`${o.value}px`,"--reka-scroll-area-corner-height":`${r.value}px`})},{default:A(()=>[D(x.$slots,"default")]),_:3},8,["as-child","as","dir","style"]))}}),Ra=Ia,za=O({__name:"ScrollAreaCornerImpl",setup(e){const t=xe(),s=M(0),o=M(0),r=S(()=>!!s.value&&!!o.value);function a(){const d=t.scrollbarX.value?.offsetHeight||0;t.onCornerHeightChange(d),o.value=d}function l(){const d=t.scrollbarY.value?.offsetWidth||0;t.onCornerWidthChange(d),s.value=d}return st(t.scrollbarX.value,a),st(t.scrollbarY.value,l),G(()=>t.scrollbarX.value,a),G(()=>t.scrollbarY.value,l),(d,f)=>r.value?(_(),z(v(pe),J({key:0,style:{width:`${s.value}px`,height:`${o.value}px`,position:"absolute",right:v(t).dir.value==="ltr"?0:void 0,left:v(t).dir.value==="rtl"?0:void 0,bottom:0}},d.$parent?.$props),{default:A(()=>[D(d.$slots,"default")]),_:3},16,["style"])):P("v-if",!0)}}),Ha=za,ja=O({__name:"ScrollAreaCorner",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e,{forwardRef:s}=ee(),o=xe(),r=S(()=>!!o.scrollbarX.value&&!!o.scrollbarY.value),a=S(()=>o.type.value!=="scroll"&&r.value);return(l,d)=>a.value?(_(),z(Ha,J({key:0},t,{ref:v(s)}),{default:A(()=>[D(l.$slots,"default")]),_:3},16)):P("v-if",!0)}}),Da=ja;function Cs(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(s-e[0])}}function Ut(e){const t=$s(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=(e.scrollbar.size-s)*t;return Math.max(o,18)}function $s(e,t){const s=e/t;return Number.isNaN(s)?0:s}function qa(e,t=()=>{}){let s={left:e.scrollLeft,top:e.scrollTop},o=0;return(function r(){const a={left:e.scrollLeft,top:e.scrollTop},l=s.left!==a.left,d=s.top!==a.top;(l||d)&&t(),s=a,o=window.requestAnimationFrame(r)})(),()=>window.cancelAnimationFrame(o)}function Nn(e,t,s="ltr"){const o=Ut(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-r,l=t.content-t.viewport,d=a-o,f=s==="ltr"?[0,l]:[l*-1,0],c=Lo(e,f[0],f[1]);return Cs([0,l],[0,d])(c)}function _t(e){return e?Number.parseInt(e,10):0}function Na(e,t,s,o="ltr"){const r=Ut(s),a=r/2,l=t||a,d=r-l,f=s.scrollbar.paddingStart+l,c=s.scrollbar.size-s.scrollbar.paddingEnd-d,i=s.content-s.viewport,p=o==="ltr"?[0,i]:[i*-1,0];return Cs([f,c],p)(e)}function Vn(e,t){return e>0&&e<t}var Va=O({__name:"ScrollAreaScrollbarX",setup(e){const t=xe(),s=Kt(),{forwardRef:o,currentElement:r}=ee();de(()=>{r.value&&t.onScrollbarXChange(r.value)});const a=S(()=>s.sizes.value);return(l,d)=>(_(),z(As,{ref:v(o),"is-horizontal":!0,"data-orientation":"horizontal",style:ce({bottom:0,left:v(t).dir.value==="rtl"?"var(--reka-scroll-area-corner-width)":0,right:v(t).dir.value==="ltr"?"var(--reka-scroll-area-corner-width)":0,"--reka-scroll-area-thumb-width":a.value?`${v(Ut)(a.value)}px`:void 0}),onOnDragScroll:d[0]||(d[0]=f=>v(s).onDragScroll(f.x))},{default:A(()=>[D(l.$slots,"default")]),_:3},8,["style"]))}}),Fa=Va,Wa=O({__name:"ScrollAreaScrollbarY",setup(e){const t=xe(),s=Kt(),{forwardRef:o,currentElement:r}=ee();de(()=>{r.value&&t.onScrollbarYChange(r.value)});const a=S(()=>s.sizes.value);return(l,d)=>(_(),z(As,{ref:v(o),"is-horizontal":!1,"data-orientation":"vertical",style:ce({top:0,right:v(t).dir.value==="ltr"?0:void 0,left:v(t).dir.value==="rtl"?0:void 0,bottom:"var(--reka-scroll-area-corner-height)","--reka-scroll-area-thumb-height":a.value?`${v(Ut)(a.value)}px`:void 0}),onOnDragScroll:d[0]||(d[0]=f=>v(s).onDragScroll(f.y))},{default:A(()=>[D(l.$slots,"default")]),_:3},8,["style"]))}}),Ua=Wa,Ga=O({__name:"ScrollAreaScrollbarAuto",props:{forceMount:{type:Boolean,required:!1}},setup(e){const t=xe(),s=Gt(),{forwardRef:o}=ee(),r=M(!1),a=rs(()=>{if(t.viewport.value){const l=t.viewport.value.offsetWidth<t.viewport.value.scrollWidth,d=t.viewport.value.offsetHeight<t.viewport.value.scrollHeight;r.value=s.isHorizontal.value?l:d}},10);return de(()=>a()),st(t.viewport,a),st(t.content,a),(l,d)=>(_(),z(v(qt),{present:l.forceMount||r.value},{default:A(()=>[L(kn,J(l.$attrs,{ref:v(o),"data-state":r.value?"visible":"hidden"}),{default:A(()=>[D(l.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Ss=Ga,Ka=O({inheritAttrs:!1,__name:"ScrollAreaScrollbarHover",props:{forceMount:{type:Boolean,required:!1}},setup(e){const t=xe(),{forwardRef:s}=ee();let o;const r=M(!1);function a(){window.clearTimeout(o),r.value=!0}function l(){o=window.setTimeout(()=>{r.value=!1},t.scrollHideDelay.value)}return de(()=>{const d=t.scrollArea.value;d&&(d.addEventListener("pointerenter",a),d.addEventListener("pointerleave",l))}),Ge(()=>{const d=t.scrollArea.value;d&&(window.clearTimeout(o),d.removeEventListener("pointerenter",a),d.removeEventListener("pointerleave",l))}),(d,f)=>(_(),z(v(qt),{present:d.forceMount||r.value},{default:A(()=>[L(Ss,J(d.$attrs,{ref:v(s),"data-state":r.value?"visible":"hidden"}),{default:A(()=>[D(d.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Ya=Ka,Xa=O({__name:"ScrollAreaScrollbarScroll",props:{forceMount:{type:Boolean,required:!1}},setup(e){const t=xe(),s=Gt(),{forwardRef:o}=ee(),{state:r,dispatch:a}=ds("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}}),l=S(()=>r.value!=="hidden");Ee(f=>{if(r.value==="idle"){const c=window.setTimeout(()=>a("HIDE"),t.scrollHideDelay.value);f(()=>{window.clearTimeout(c)})}});const d=rs(()=>a("SCROLL_END"),100);return Ee(f=>{const c=t.viewport.value,i=s.isHorizontal.value?"scrollLeft":"scrollTop";if(c){let p=c[i];const u=()=>{const g=c[i];p!==g&&(a("SCROLL"),d()),p=g};c.addEventListener("scroll",u),f(()=>{c.removeEventListener("scroll",u)})}}),(f,c)=>(_(),z(v(qt),{present:f.forceMount||l.value},{default:A(()=>[L(kn,J(f.$attrs,{ref:v(o),"data-state":l.value?"visible":"hidden"}),{default:A(()=>[D(f.$slots,"default")]),_:3},16,["data-state"])]),_:3},8,["present"]))}}),Ja=Xa;const[Gt,Qa]=je("ScrollAreaScrollbar");var Za=O({inheritAttrs:!1,__name:"ScrollAreaScrollbar",props:{orientation:{type:String,required:!1,default:"vertical"},forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(e){const t=e,{forwardRef:s}=ee(),o=xe(),r=S(()=>t.orientation==="horizontal");G(r,()=>{r.value?o.onScrollbarXEnabledChange(!0):o.onScrollbarYEnabledChange(!0)},{immediate:!0}),Ge(()=>{o.onScrollbarXEnabledChange(!1),o.onScrollbarYEnabledChange(!1)});const{orientation:a,forceMount:l,asChild:d,as:f}=Ve(t);return Qa({orientation:a,forceMount:l,isHorizontal:r,as:f,asChild:d}),(c,i)=>v(o).type.value==="hover"?(_(),z(Ya,J({key:0},c.$attrs,{ref:v(s),"force-mount":v(l)}),{default:A(()=>[D(c.$slots,"default")]),_:3},16,["force-mount"])):v(o).type.value==="scroll"?(_(),z(Ja,J({key:1},c.$attrs,{ref:v(s),"force-mount":v(l)}),{default:A(()=>[D(c.$slots,"default")]),_:3},16,["force-mount"])):v(o).type.value==="auto"?(_(),z(Ss,J({key:2},c.$attrs,{ref:v(s),"force-mount":v(l)}),{default:A(()=>[D(c.$slots,"default")]),_:3},16,["force-mount"])):v(o).type.value==="always"?(_(),z(kn,J({key:3},c.$attrs,{ref:v(s),"data-state":"visible"}),{default:A(()=>[D(c.$slots,"default")]),_:3},16)):P("v-if",!0)}}),el=Za;const[Kt,tl]=je("ScrollAreaScrollbarVisible");var nl=O({__name:"ScrollAreaScrollbarVisible",setup(e){const t=xe(),s=Gt(),{forwardRef:o}=ee(),r=M({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),a=S(()=>{const m=$s(r.value.viewport,r.value.content);return m>0&&m<1}),l=M(),d=M(0);function f(m,w){if(g.value){const x=t.viewport.value.scrollLeft+m.deltaY;t.viewport.value.scrollLeft=x,Vn(x,w)&&m.preventDefault()}else{const x=t.viewport.value.scrollTop+m.deltaY;t.viewport.value.scrollTop=x,Vn(x,w)&&m.preventDefault()}}function c(m,w){g.value?d.value=w.x:d.value=w.y}function i(m){d.value=0}function p(m){r.value=m}function u(m,w){return Na(m,d.value,r.value,w)}const g=S(()=>s.isHorizontal.value);function y(m){g.value?t.viewport.value.scrollLeft=u(m,t.dir.value):t.viewport.value.scrollTop=u(m)}function b(){if(g.value){if(t.viewport.value&&l.value){const m=t.viewport.value.scrollLeft,w=Nn(m,r.value,t.dir.value);l.value.style.transform=`translate3d(${w}px, 0, 0)`}}else if(t.viewport.value&&l.value){const m=t.viewport.value.scrollTop,w=Nn(m,r.value);l.value.style.transform=`translate3d(0, ${w}px, 0)`}}function h(m){l.value=m}return tl({sizes:r,hasThumb:a,handleWheelScroll:f,handleThumbDown:c,handleThumbUp:i,handleSizeChange:p,onThumbPositionChange:b,onThumbChange:h,onDragScroll:y}),(m,w)=>g.value?(_(),z(Fa,J({key:0},m.$attrs,{ref:v(o)}),{default:A(()=>[D(m.$slots,"default")]),_:3},16)):(_(),z(Ua,J({key:1},m.$attrs,{ref:v(o)}),{default:A(()=>[D(m.$slots,"default")]),_:3},16))}}),kn=nl,sl=O({__name:"ScrollAreaScrollbarImpl",props:{isHorizontal:{type:Boolean,required:!0}},emits:["onDragScroll","onWheelScroll","onThumbPointerDown"],setup(e,{emit:t}){const s=e,o=t,r=xe(),a=Kt(),l=Gt(),{forwardRef:d,currentElement:f}=ee(),c=M(""),i=M();function p(m){if(i.value){const w=m.clientX-i.value?.left,x=m.clientY-i.value?.top;o("onDragScroll",{x:w,y:x})}}function u(m){m.button===0&&(m.target.setPointerCapture(m.pointerId),i.value=f.value.getBoundingClientRect(),c.value=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",r.viewport&&(r.viewport.value.style.scrollBehavior="auto"),p(m))}function g(m){p(m)}function y(m){const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),document.body.style.webkitUserSelect=c.value,r.viewport&&(r.viewport.value.style.scrollBehavior=""),i.value=void 0}function b(m){const w=m.target,x=f.value?.contains(w),$=a.sizes.value.content-a.sizes.value.viewport;x&&a.handleWheelScroll(m,$)}de(()=>{document.addEventListener("wheel",b,{passive:!1})}),Ge(()=>{document.removeEventListener("wheel",b)});function h(){f.value&&(s.isHorizontal?a.handleSizeChange({content:r.viewport.value?.scrollWidth??0,viewport:r.viewport.value?.offsetWidth??0,scrollbar:{size:f.value.clientWidth??0,paddingStart:_t(getComputedStyle(f.value).paddingLeft),paddingEnd:_t(getComputedStyle(f.value).paddingRight)}}):a.handleSizeChange({content:r.viewport.value?.scrollHeight??0,viewport:r.viewport.value?.offsetHeight??0,scrollbar:{size:f.value?.clientHeight??0,paddingStart:_t(getComputedStyle(f.value).paddingLeft),paddingEnd:_t(getComputedStyle(f.value).paddingRight)}}))}return st(f,h),st(r.content,h),(m,w)=>(_(),z(v(pe),{ref:v(d),style:{position:"absolute"},"data-scrollbarimpl":"",as:v(l).as.value,"as-child":v(l).asChild.value,onPointerdown:u,onPointermove:g,onPointerup:y},{default:A(()=>[D(m.$slots,"default")]),_:3},8,["as","as-child"]))}}),As=sl,ol=O({__name:"ScrollAreaThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e,s=xe(),o=Kt();function r(u){const y=u.target.getBoundingClientRect(),b=u.clientX-y.left,h=u.clientY-y.top;o.handleThumbDown(u,{x:b,y:h})}function a(u){o.handleThumbUp(u)}const{forwardRef:l,currentElement:d}=ee(),f=M(),c=S(()=>s.viewport.value);function i(){if(!f.value){const u=qa(c.value,o.onThumbPositionChange);f.value=u,o.onThumbPositionChange()}}const p=S(()=>o.sizes.value);return Vo(p,()=>{o.onThumbChange(d.value),c.value&&(o.onThumbPositionChange(),c.value.addEventListener("scroll",i))}),Ge(()=>{c.value.removeEventListener("scroll",i),s.viewport.value?.removeEventListener("scroll",i)}),(u,g)=>(_(),z(v(pe),{ref:v(l),"data-state":v(o).hasThumb?"visible":"hidden",style:{width:"var(--reka-scroll-area-thumb-width)",height:"var(--reka-scroll-area-thumb-height)"},"as-child":t.asChild,as:u.as,onPointerdown:r,onPointerup:a},{default:A(()=>[D(u.$slots,"default")]),_:3},8,["data-state","as-child","as"]))}}),rl=ol,al=O({inheritAttrs:!1,__name:"ScrollAreaViewport",props:{nonce:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e,{expose:t}){const s=e,{nonce:o}=Ve(s),r=Pa(o),a=xe(),l=M();de(()=>{a.onViewportChange(l.value),a.onContentChange(f.value)}),t({viewportElement:l});const{forwardRef:d,currentElement:f}=ee();return(c,i)=>(_(),k(K,null,[n("div",J({ref_key:"viewportElement",ref:l,"data-reka-scroll-area-viewport":"",style:{overflowX:v(a).scrollbarXEnabled.value?"scroll":"hidden",overflowY:v(a).scrollbarYEnabled.value?"scroll":"hidden"}},c.$attrs,{tabindex:0}),[L(v(pe),{ref:v(d),style:ce({minWidth:v(a).scrollbarXEnabled.value?"fit-content":void 0}),"as-child":s.asChild,as:c.as},{default:A(()=>[D(c.$slots,"default")]),_:3},8,["style","as-child","as"])],16),L(v(pe),{as:"style",nonce:v(r)},{default:A(()=>i[0]||(i[0]=[X(" /* Hide scrollbars cross-browser and enable momentum scroll for touch devices */ [data-reka-scroll-area-viewport] { scrollbar-width:none; -ms-overflow-style:none; -webkit-overflow-scrolling:touch; } [data-reka-scroll-area-viewport]::-webkit-scrollbar { display:none; } ")])),_:1,__:[0]},8,["nonce"])],64))}}),ll=al;const[il,cl]=je("SwitchRoot");var dl=O({__name:"SwitchRoot",props:{defaultValue:{type:Boolean,required:!1},modelValue:{type:[Boolean,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},value:{type:String,required:!1,default:"on"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=t,{disabled:r}=Ve(s),a=is(s,"modelValue",o,{defaultValue:s.defaultValue,passive:s.modelValue===void 0});function l(){r.value||(a.value=!a.value)}const{forwardRef:d,currentElement:f}=ee(),c=Xo(f),i=S(()=>s.id&&f.value?document.querySelector(`[for="${s.id}"]`)?.innerText:void 0);return cl({modelValue:a,toggleCheck:l,disabled:r}),(p,u)=>(_(),z(v(pe),J(p.$attrs,{id:p.id,ref:v(d),role:"switch",type:p.as==="button"?"button":void 0,value:p.value,"aria-label":p.$attrs["aria-label"]||i.value,"aria-checked":v(a),"aria-required":p.required,"data-state":v(a)?"checked":"unchecked","data-disabled":v(r)?"":void 0,"as-child":p.asChild,as:p.as,disabled:v(r),onClick:l,onKeydown:Rt(be(l,["prevent"]),["enter"])}),{default:A(()=>[D(p.$slots,"default",{modelValue:v(a)}),v(c)&&p.name?(_(),z(v(br),{key:0,type:"checkbox",name:p.name,disabled:v(r),required:p.required,value:p.value,checked:!!v(a)},null,8,["name","disabled","required","value","checked"])):P("v-if",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),ul=dl,fl=O({__name:"SwitchThumb",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(e){const t=il();return ee(),(s,o)=>(_(),z(v(pe),{"data-state":v(t).modelValue?.value?"checked":"unchecked","data-disabled":v(t).disabled.value?"":void 0,"as-child":s.asChild,as:s.as},{default:A(()=>[D(s.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"]))}}),pl=fl;const[Cn,gl]=je("TooltipProvider");var vl=O({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{type:Number,required:!1,default:700},skipDelayDuration:{type:Number,required:!1,default:300},disableHoverableContent:{type:Boolean,required:!1,default:!1},disableClosingTrigger:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:!1}},setup(e){const t=e,{delayDuration:s,skipDelayDuration:o,disableHoverableContent:r,disableClosingTrigger:a,ignoreNonKeyboardFocus:l,disabled:d}=Ve(t);ee();const f=M(!0),c=M(!1),{start:i,stop:p}=as(()=>{f.value=!0},o,{immediate:!1});return gl({isOpenDelayed:f,delayDuration:s,onOpen(){p(),f.value=!1},onClose(){i()},isPointerInTransitRef:c,disableHoverableContent:r,disableClosingTrigger:a,disabled:d,ignoreNonKeyboardFocus:l}),(u,g)=>D(u.$slots,"default")}}),ml=vl;const Ts="tooltip.open",[Yt,hl]=je("TooltipRoot");var yl=O({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},delayDuration:{type:Number,required:!1,default:void 0},disableHoverableContent:{type:Boolean,required:!1,default:void 0},disableClosingTrigger:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(e,{emit:t}){const s=e,o=t;ee();const r=Cn(),a=S(()=>s.disableHoverableContent??r.disableHoverableContent.value),l=S(()=>s.disableClosingTrigger??r.disableClosingTrigger.value),d=S(()=>s.disabled??r.disabled.value),f=S(()=>s.delayDuration??r.delayDuration.value),c=S(()=>s.ignoreNonKeyboardFocus??r.ignoreNonKeyboardFocus.value),i=is(s,"open",o,{defaultValue:s.defaultOpen,passive:s.open===void 0});G(i,x=>{r.onClose&&(x?(r.onOpen(),document.dispatchEvent(new CustomEvent(Ts))):r.onClose())});const p=M(!1),u=M(),g=S(()=>i.value?p.value?"delayed-open":"instant-open":"closed"),{start:y,stop:b}=as(()=>{p.value=!0,i.value=!0},f,{immediate:!1});function h(){b(),p.value=!1,i.value=!0}function m(){b(),i.value=!1}function w(){y()}return hl({contentId:"",open:i,stateAttribute:g,trigger:u,onTriggerChange(x){u.value=x},onTriggerEnter(){r.isOpenDelayed.value?w():h()},onTriggerLeave(){a.value?m():b()},onOpen:h,onClose:m,disableHoverableContent:a,disableClosingTrigger:l,disabled:d,ignoreNonKeyboardFocus:c}),(x,$)=>(_(),z(v(_r),null,{default:A(()=>[D(x.$slots,"default",{open:v(i)})]),_:3}))}}),bl=yl,xl=O({__name:"TooltipContentImpl",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1,default:0},align:{type:null,required:!1,default:"center"},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},arrowPadding:{type:Number,required:!1,default:0},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:t}){const s=e,o=t,r=Yt(),{forwardRef:a}=ee(),l=_o(),d=S(()=>l.default?.({})),f=S(()=>{if(s.ariaLabel)return s.ariaLabel;let i="";function p(u){typeof u.children=="string"&&u.type!==ko?i+=u.children:Array.isArray(u.children)&&u.children.forEach(g=>p(g))}return d.value?.forEach(u=>p(u)),i}),c=S(()=>{const{ariaLabel:i,...p}=s;return p});return de(()=>{ln(window,"scroll",i=>{i.target?.contains(r.trigger.value)&&r.onClose()}),ln(window,Ts,r.onClose)}),(i,p)=>(_(),z(v(pr),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:p[0]||(p[0]=u=>o("escapeKeyDown",u)),onPointerDownOutside:p[1]||(p[1]=u=>{v(r).disableClosingTrigger.value&&v(r).trigger.value?.contains(u.target)&&u.preventDefault(),o("pointerDownOutside",u)}),onFocusOutside:p[2]||(p[2]=be(()=>{},["prevent"])),onDismiss:p[3]||(p[3]=u=>v(r).onClose())},{default:A(()=>[L(v(La),J({ref:v(a),"data-state":v(r).stateAttribute.value},{...i.$attrs,...c.value},{style:{"--reka-tooltip-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-tooltip-content-available-width":"var(--reka-popper-available-width)","--reka-tooltip-content-available-height":"var(--reka-popper-available-height)","--reka-tooltip-trigger-width":"var(--reka-popper-anchor-width)","--reka-tooltip-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:A(()=>[D(i.$slots,"default"),L(v(fs),{id:v(r).contentId,role:"tooltip"},{default:A(()=>[X(T(f.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),Es=xl,wl=O({__name:"TooltipContentHoverable",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},setup(e){const s=cs(e),{forwardRef:o,currentElement:r}=ee(),{trigger:a,onClose:l}=Yt(),d=Cn(),{isPointerInTransit:f,onPointerExit:c}=Jo(a,r);return d.isPointerInTransitRef=f,c(()=>{l()}),(i,p)=>(_(),z(Es,J({ref:v(o)},v(s)),{default:A(()=>[D(i.$slots,"default")]),_:3},16))}}),_l=wl,kl=O({__name:"TooltipContent",props:{forceMount:{type:Boolean,required:!1},ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:t}){const s=e,o=t,r=Yt(),a=Dt(s,o),{forwardRef:l}=ee();return(d,f)=>(_(),z(v(qt),{present:d.forceMount||v(r).open.value},{default:A(()=>[(_(),z(gn(v(r).disableHoverableContent.value?Es:_l),J({ref:v(l)},v(a)),{default:A(()=>[D(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Cl=kl,$l=O({__name:"TooltipPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=e;return(s,o)=>(_(),z(v(vr),zt(Ht(t)),{default:A(()=>[D(s.$slots,"default")]),_:3},16))}}),Sl=$l,Al=O({__name:"TooltipTrigger",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e,s=Yt(),o=Cn();s.contentId||=or(void 0,"reka-tooltip-content");const{forwardRef:r,currentElement:a}=ee(),l=M(!1),d=M(!1),f=S(()=>s.disabled.value?{}:{click:b,focus:g,pointermove:p,pointerleave:u,pointerdown:i,blur:y});de(()=>{s.onTriggerChange(a.value)});function c(){setTimeout(()=>{l.value=!1},1)}function i(){s.open&&!s.disableClosingTrigger.value&&s.onClose(),l.value=!0,document.addEventListener("pointerup",c,{once:!0})}function p(h){h.pointerType!=="touch"&&!d.value&&!o.isPointerInTransitRef.value&&(s.onTriggerEnter(),d.value=!0)}function u(){s.onTriggerLeave(),d.value=!1}function g(h){l.value||s.ignoreNonKeyboardFocus.value&&!h.target.matches?.(":focus-visible")||s.onOpen()}function y(){s.onClose()}function b(){s.disableClosingTrigger.value||s.onClose()}return(h,m)=>(_(),z(v(Cr),{"as-child":"",reference:h.reference},{default:A(()=>[L(v(pe),J({ref:v(r),"aria-describedby":v(s).open.value?v(s).contentId:void 0,"data-state":v(s).stateAttribute.value,as:h.as,"as-child":t.asChild,"data-grace-area-trigger":""},Co(f.value)),{default:A(()=>[D(h.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3},8,["reference"]))}}),Tl=Al;function El(e){if(!ve(e))return rn(e);const t=new Proxy({},{get(s,o,r){return v(Reflect.get(e.value,o,r))},set(s,o,r){return ve(e.value[o])&&!ve(r)?e.value[o].value=r:e.value[o]=r,!0},deleteProperty(s,o){return Reflect.deleteProperty(e.value,o)},has(s,o){return Reflect.has(e.value,o)},ownKeys(){return Object.keys(e.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return rn(t)}function Ml(e){return El(S(e))}function yt(e,...t){const s=t.flat(),o=s[0];return Ml(()=>Object.fromEntries(typeof o=="function"?Object.entries(Ve(e)).filter(([r,a])=>!o(le(a),r)):Object.entries(Ve(e)).filter(r=>!s.includes(r[0]))))}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Bl=e=>typeof e<"u";function Ll(e){return JSON.parse(JSON.stringify(e))}function Pl(e,t,s,o={}){var r,a,l;const{clone:d=!1,passive:f=!1,eventName:c,deep:i=!1,defaultValue:p,shouldEmit:u}=o,g=Je(),y=s||g?.emit||((r=g?.$emit)==null?void 0:r.bind(g))||((l=(a=g?.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(g?.proxy));let b=c;b=b||`update:${t.toString()}`;const h=x=>d?typeof d=="function"?d(x):Ll(x):x,m=()=>Bl(e[t])?h(e[t]):p,w=x=>{u?u(x)&&y(b,x):y(b,x)};if(f){const x=m(),$=M(x);let C=!1;return G(()=>e[t],R=>{C||(C=!0,$.value=h(R),Re(()=>C=!1))}),G($,R=>{!C&&(R!==e[t]||i)&&w(R)},{deep:i}),$}else return S({get(){return m()},set(x){w(x)}})}const Ol=O({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=Pl(s,"modelValue",t,{passive:!0,defaultValue:s.defaultValue});return(a,l)=>me((_(),k("textarea",{"onUpdate:modelValue":l[0]||(l[0]=d=>ve(r)?r.value=d:null),class:j(v(Me)("flex min-h-20 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s.class))},null,2)),[[pt,v(r)]])}}),Il={class:"min-h-screen relative flex items-center justify-center overflow-hidden"},Rl={class:"relative z-10 w-full max-w-5xl mx-auto px-6 py-20"},zl={class:"relative group"},Hl={class:"relative bg-white/80 backdrop-blur-xl rounded-2xl border border-gray-200/50 shadow-2xl shadow-gray-200/50 overflow-hidden"},jl={class:"px-8 pt-8 pb-4"},Dl={class:"flex flex-wrap gap-2"},ql=["onClick"],Nl={class:"p-8"},Vl={class:"relative"},Fl={class:"absolute bottom-4 left-4 flex items-center gap-4"},Wl={class:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-white/90 backdrop-blur-sm border border-gray-200/50 shadow-sm"},Ul={class:"text-xs font-medium text-gray-600"},Gl={key:0,class:"px-3 py-1.5 rounded-lg bg-white/90 backdrop-blur-sm border border-gray-200/50 shadow-sm"},Kl={class:"flex items-center gap-2"},Yl={class:"w-24 h-1 bg-gray-100 rounded-full overflow-hidden"},Xl={class:"text-xs font-medium text-gray-600"},Jl={class:"px-8 pb-8"},Ql={class:"flex items-center justify-between"},Zl=["disabled"],ei=O({__name:"ArticleInput",emits:["submit"],setup(e,{emit:t}){const s=t,o=M(""),r=[{label:" AI ",content:"AI  AI  AI  AI  AI "},{label:" ",content:"AI "},{label:" ",content:""}],a=S(()=>o.value.length),l=S(()=>a.value>=50),d=c=>{o.value=c},f=()=>{l.value&&s("submit",o.value)};return(c,i)=>{const p=Ol;return _(),k("div",Il,[i[11]||(i[11]=n("div",{class:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px] opacity-50"},null,-1)),i[12]||(i[12]=n("div",{class:"absolute top-0 left-1/4 w-96 h-96 bg-emerald-500/20 rounded-full blur-[128px] animate-pulse"},null,-1)),i[13]||(i[13]=n("div",{class:"absolute bottom-0 right-1/4 w-96 h-96 bg-teal-500/20 rounded-full blur-[128px] animate-pulse",style:{"animation-delay":"1s"}},null,-1)),n("div",Rl,[i[9]||(i[9]=Ye('<div class="text-center mb-16 space-y-8" data-v-50140fe6><div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/80 backdrop-blur-sm border border-gray-200/50 shadow-sm animate-fade-in" data-v-50140fe6><div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse" data-v-50140fe6></div><span class="text-sm font-medium text-gray-700" data-v-50140fe6>AI-Powered Reading Assistant</span></div><div class="space-y-4" data-v-50140fe6><h1 class="text-6xl md:text-7xl font-bold tracking-tight" data-v-50140fe6><span class="bg-clip-text text-transparent bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900" data-v-50140fe6>  </span><br data-v-50140fe6><span class="bg-clip-text text-transparent bg-gradient-to-r from-emerald-600 via-teal-600 to-emerald-600" data-v-50140fe6>  </span></h1><p class="text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed" data-v-50140fe6> AI  </p></div><div class="flex items-center justify-center gap-8 text-sm" data-v-50140fe6><div class="flex items-center gap-2" data-v-50140fe6><svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20" data-v-50140fe6><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" data-v-50140fe6></path></svg><span class="text-gray-600" data-v-50140fe6></span></div><div class="flex items-center gap-2" data-v-50140fe6><svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20" data-v-50140fe6><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" data-v-50140fe6></path></svg><span class="text-gray-600" data-v-50140fe6></span></div><div class="flex items-center gap-2" data-v-50140fe6><svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20" data-v-50140fe6><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" data-v-50140fe6></path></svg><span class="text-gray-600" data-v-50140fe6></span></div></div></div>',1)),n("div",zl,[i[8]||(i[8]=n("div",{class:"absolute -inset-0.5 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl opacity-0 group-hover:opacity-20 blur transition duration-500"},null,-1)),n("div",Hl,[n("div",jl,[i[2]||(i[2]=n("div",{class:"flex items-center gap-2 mb-4"},[n("span",{class:"text-sm font-medium text-gray-500"},""),n("div",{class:"flex-1 h-px bg-gradient-to-r from-gray-200 to-transparent"})],-1)),n("div",Dl,[(_(),k(K,null,oe(r,u=>n("button",{key:u.label,onClick:g=>d(u.content),class:"group/btn inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-50 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 border border-gray-200/50 hover:border-emerald-200 transition-all text-sm font-medium text-gray-700 hover:text-emerald-700"},[n("span",null,T(u.label),1),i[1]||(i[1]=n("svg",{class:"w-4 h-4 opacity-0 group-hover/btn:opacity-100 -translate-x-2 group-hover/btn:translate-x-0 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,ql)),64))])]),i[7]||(i[7]=n("div",{class:"px-8"},[n("div",{class:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"})],-1)),n("div",Nl,[n("div",Vl,[L(p,{modelValue:v(o),"onUpdate:modelValue":i[0]||(i[0]=u=>ve(o)?o.value=u:null),placeholder:`...

`,class:"min-h-[320px] text-base leading-relaxed resize-none border-0 bg-transparent focus:ring-0 focus:outline-none placeholder:text-gray-400 text-gray-700",onKeydown:Rt(be(f,["ctrl"]),["enter"])},null,8,["modelValue","onKeydown"]),n("div",Fl,[n("div",Wl,[n("div",{class:j(["w-1.5 h-1.5 rounded-full transition-colors",v(l)?"bg-emerald-500 shadow-sm shadow-emerald-500/50":"bg-gray-300"])},null,2),n("span",Ul,T(v(a))+"  ",1)]),v(a)>0?(_(),k("div",Gl,[n("div",Kl,[n("div",Yl,[n("div",{class:"h-full bg-gradient-to-r from-emerald-500 to-teal-500 transition-all duration-300",style:ce({width:`${Math.min(v(a)/50*100,100)}%`})},null,4)]),n("span",Xl,T(Math.min(Math.floor(v(a)/50*100),100))+"% ",1)])])):P("",!0)]),i[3]||(i[3]=n("div",{class:"absolute bottom-4 right-4 flex items-center gap-1.5 text-xs text-gray-400"},[n("kbd",{class:"px-2 py-1 bg-white/90 border border-gray-200/50 rounded shadow-sm font-medium text-gray-600"},""),n("span",null,"+"),n("kbd",{class:"px-2 py-1 bg-white/90 border border-gray-200/50 rounded shadow-sm font-medium text-gray-600"},"Enter")],-1))])]),n("div",Jl,[i[6]||(i[6]=n("div",{class:"h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent mb-6"},null,-1)),n("div",Ql,[i[5]||(i[5]=n("div",{class:"flex items-center gap-2 text-sm text-gray-500"},[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),n("span",null,"")],-1)),n("button",{onClick:f,disabled:!v(l),class:"group relative inline-flex items-center gap-2 px-8 py-3.5 rounded-xl font-semibold text-white bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 disabled:from-gray-300 disabled:to-gray-300 shadow-lg shadow-emerald-500/25 hover:shadow-xl hover:shadow-emerald-500/30 disabled:shadow-none transition-all duration-300 hover:scale-105 disabled:scale-100 disabled:cursor-not-allowed"},[...i[4]||(i[4]=[n("span",null,"",-1),n("svg",{class:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1),n("div",{class:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-200%] group-hover:translate-x-[200%] transition-transform duration-1000"},null,-1)])],8,Zl)])])])]),i[10]||(i[10]=Ye('<div class="mt-20 grid grid-cols-1 md:grid-cols-3 gap-6" data-v-50140fe6><div class="group relative p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-gray-200/50 hover:bg-white/80 hover:shadow-lg hover:shadow-gray-200/50 transition-all duration-300" data-v-50140fe6><div class="flex items-start gap-4" data-v-50140fe6><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform" data-v-50140fe6><svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-50140fe6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-50140fe6></path></svg></div><div data-v-50140fe6><h3 class="font-semibold text-gray-900 mb-2" data-v-50140fe6></h3><p class="text-sm text-gray-600 leading-relaxed" data-v-50140fe6>AI </p></div></div></div><div class="group relative p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-gray-200/50 hover:bg-white/80 hover:shadow-lg hover:shadow-gray-200/50 transition-all duration-300" data-v-50140fe6><div class="flex items-start gap-4" data-v-50140fe6><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform" data-v-50140fe6><svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-50140fe6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" data-v-50140fe6></path></svg></div><div data-v-50140fe6><h3 class="font-semibold text-gray-900 mb-2" data-v-50140fe6></h3><p class="text-sm text-gray-600 leading-relaxed" data-v-50140fe6></p></div></div></div><div class="group relative p-6 rounded-xl bg-white/50 backdrop-blur-sm border border-gray-200/50 hover:bg-white/80 hover:shadow-lg hover:shadow-gray-200/50 transition-all duration-300" data-v-50140fe6><div class="flex items-start gap-4" data-v-50140fe6><div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform" data-v-50140fe6><svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-50140fe6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" data-v-50140fe6></path></svg></div><div data-v-50140fe6><h3 class="font-semibold text-gray-900 mb-2" data-v-50140fe6></h3><p class="text-sm text-gray-600 leading-relaxed" data-v-50140fe6></p></div></div></div></div>',1))])])}}}),ti=Object.assign($e(ei,[["__scopeId","data-v-50140fe6"]]),{__name:"ArticleInput"}),Xt=()=>{const e=N("selected-text",()=>""),t=N("selection-context",()=>""),s=N("selection-position",()=>({x:0,y:0})),o=N("show-intent-buttons",()=>!1),r=N("selected-start",()=>null),a=N("selected-end",()=>null),l=S(()=>{const i=e.value.length;return i<5?"explain":i>50||/|||/.test(e.value)?"analyze":"explain"}),d=i=>{const{content:p}=Ne(),u=p.value;if(!u||!i)return null;const g=u.indexOf(i);return g===-1?(console.warn(" "),null):{start:g,end:g+i.length}};return{selectedText:e,context:t,position:s,showIntentButtons:o,suggestedIntent:l,selectedStart:r,selectedEnd:a,handleSelection:()=>{const i=window.getSelection(),p=i?.toString().trim();if(p&&p.length>0){e.value=p;const{content:u}=Ne();t.value=fo(u.value,p);const g=d(p);g&&(r.value=g.start,a.value=g.end,console.log(" :",g.start,"-",g.end));const b=i?.getRangeAt(0)?.getBoundingClientRect();b&&(s.value={x:b.left+b.width/2,y:b.bottom+10})}},clear:()=>{e.value="",t.value="",r.value=null,a.value=null,o.value=!1,window.getSelection()?.removeAllRanges()}}},Ms=()=>{const e=u=>{u=u.replace(/\r\n/g,`
`).replace(/\r/g,`
`);const g=/([!?.]+[\s\n]|[\n])/g,y=u.split(g),b=[];let h="";for(let w=0;w<y.length;w++){const x=y[w];if(x)if(g.test(x)){if(h+=x,t(h,y[w+1])){const $=h.trim();$.length>0&&(b.push($),h="")}}else h+=x}const m=h.trim();return m.length>0&&b.push(m),b.filter(w=>w.length>0)},t=(u,g)=>{if(u.endsWith(`
`))return!0;const y=["Mr.","Mrs.","Ms.","Dr.","Prof.","Sr.","Jr.","etc.","vs.","e.g.","i.e.","U.S.","U.K.","Inc.","Ltd.","Co.","Corp."];for(const b of y)if(u.trim().endsWith(b)&&g&&/^[a-z]/.test(g.trim()))return!1;return!0},s=u=>{const g=u.split(/\n\n+/).filter(h=>h.trim().length>0),y=[];let b=0;return g.forEach((h,m)=>{const x=e(h).map($=>({index:b++,text:$,paragraphIndex:m}));y.push({index:m,sentences:x})}),y},o=u=>{const g=dt(u,{breaks:!0,gfm:!0}),y=document.createElement("div");y.innerHTML=g;const b=y.textContent||"",h=s(b);let m="";return h.forEach(w=>{m+=`<p data-paragraph-index="${w.index}" class="article-paragraph">`,w.sentences.forEach(x=>{m+=`<span id="sentence-${x.index}" data-sentence-index="${x.index}" class="article-sentence">${d(x.text)}</span>`}),m+="</p>"}),m},r=u=>{const g=s(u);let y="";return g.forEach(b=>{y+=`<p data-paragraph-index="${b.index}" class="article-paragraph">`,b.sentences.forEach(h=>{y+=`<span id="sentence-${h.index}" data-sentence-index="${h.index}" class="article-sentence">${d(h.text)}</span>`}),y+="</p>"}),y},a=u=>[/^#{1,6}\s/m,/\*\*.*\*\*/,/\*.*\*/,/\[.*\]\(.*\)/,/```[\s\S]*```/,/^[-*+]\s/m,/^\d+\.\s/m,/^>\s/m,/!\[.*\]\(.*\)/].some(y=>y.test(u)),l=u=>u?a(u)?(console.log("  Markdown  Markdown "),o(u)):(console.log(" "),r(u)):"",d=u=>{const g=document.createElement("div");return g.textContent=u,g.innerHTML};return{renderArticleWithSentenceIds:l,extractSentenceData:u=>{let g=u;if(a(u)){const y=dt(u,{breaks:!0,gfm:!0}),b=document.createElement("div");b.innerHTML=y,g=b.textContent||""}return s(g)},renderWithBackendSentences:u=>{if(!u||u.length===0)return"";console.log(`  ${u.length} `);let g="",y=[],b=0;const h=()=>{y.length>0&&(g+=`<p data-paragraph-index="${b}" class="article-paragraph">`,g+=y.join(""),g+="</p>",y=[],b++)};return u.forEach((m,w)=>{const x=`<span id="sentence-${w}" data-sentence-index="${w}" class="article-sentence">${d(m)} </span>`;y.push(x),(w+1)%10===0&&h()}),h(),g},splitIntoSentences:e,splitIntoParagraphs:s,getSentenceElement:u=>document.getElementById(`sentence-${u}`),cleanContent:u=>{const g=document.createElement("div");return g.innerHTML=u,g.querySelectorAll('[id^="sentence-"]').forEach(b=>{const h=b.textContent||"";b.replaceWith(document.createTextNode(h))}),g.textContent||""},isMarkdown:a,escapeHtml:d}},Ie={serif:'ui-serif, Georgia, Cambria, "Times New Roman", Times, serif',sansSerif:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',songti:'"Songti SC", "SimSun", "", serif',heiti:'"Heiti SC", "SimHei", "", sans-serif',kaiti:'"Kaiti SC", "KaiTi", "", serif',cangErJinKai:'"TsangerJinKai03", "KaiTi", "", serif'},Ke={small:"16px",medium:"22px",large:"28px",xlarge:"36px"},Fn={small:"1.8",medium:"2.0",large:"2.1",xlarge:"2.0"},Wn="reading-settings",ni=()=>{const e={fontFamily:Ie.cangErJinKai,fontSize:Ke.medium,lineHeight:Fn.medium,singleSentencePerLine:!1},t=()=>{try{const u=localStorage.getItem(Wn);if(u)return{...e,...JSON.parse(u)}}catch(u){console.error(":",u)}return e},s=u=>{try{localStorage.setItem(Wn,JSON.stringify(u))}catch(g){console.error(":",g)}},o=N("reading-settings",()=>t()),r=u=>{o.value.fontFamily=Ie[u],s(o.value)},a=u=>{o.value.fontSize=Ke[u],o.value.lineHeight=Fn[u],s(o.value)},l=()=>{o.value={...e},s(o.value)},d=()=>[{key:"cangErJinKai",label:"",family:Ie.cangErJinKai},{key:"songti",label:"",family:Ie.songti},{key:"heiti",label:"",family:Ie.heiti},{key:"kaiti",label:"",family:Ie.kaiti},{key:"serif",label:"",family:Ie.serif},{key:"sansSerif",label:"",family:Ie.sansSerif}],f=()=>[{key:"small",label:"",size:Ke.small},{key:"medium",label:"",size:Ke.medium},{key:"large",label:"",size:Ke.large},{key:"xlarge",label:"",size:Ke.xlarge}],c=()=>{const u=Object.entries(Ie).find(([g,y])=>y===o.value.fontFamily);return u?u[0]:"cangErJinKai"},i=()=>{const u=Object.entries(Ke).find(([g,y])=>y===o.value.fontSize);return u?u[0]:"medium"},p=()=>{o.value={...o.value,singleSentencePerLine:!o.value.singleSentencePerLine},s(o.value)};return{settings:Z(o),setFontFamily:r,setFontSize:a,resetSettings:l,getFontOptions:d,getFontSizeOptions:f,getCurrentFontKey:c,getCurrentSizeKey:i,toggleSingleSentencePerLine:p}},si={class:"max-w-3xl mx-auto px-12 py-16"},oi={key:0,class:"mb-16 animate-fade-in"},ri={class:"flex items-center justify-between"},ai={class:"flex items-center gap-6 text-sm text-gray-500"},li={class:"flex items-center gap-2"},ii={class:"flex items-center gap-2"},ci={key:0,class:"mt-6 bg-white rounded-xl border border-gray-200 shadow-lg p-6"},di={class:"space-y-5"},ui={class:"grid grid-cols-3 gap-2"},fi=["onClick"],pi={class:"grid grid-cols-4 gap-2"},gi=["onClick"],vi={class:"flex items-center justify-between cursor-pointer group"},mi={class:"relative"},hi=["checked"],yi={class:"flex items-center justify-between pt-2"},bi={class:"max-w-none animate-fade-in",style:{"animation-delay":"0.1s"}},xi=["innerHTML"],wi=O({__name:"ArticlePane",props:{content:{},title:{}},setup(e){const t=e,{handleSelection:s}=Xt(),{renderArticleWithSentenceIds:o}=Ms(),{settings:r,setFontFamily:a,setFontSize:l,resetSettings:d,getFontOptions:f,getFontSizeOptions:c,getCurrentFontKey:i,getCurrentSizeKey:p,toggleSingleSentencePerLine:u}=ni(),g=M(null),y=M(!1),b=f(),h=c(),m=S(()=>i()),w=S(()=>p()),x=S(()=>t.content?o(t.content):""),$=S(()=>t.content),C=S(()=>$.value.replace(/\s/g,"").length),R=()=>{setTimeout(()=>{s()},10)};return(I,E)=>(_(),k("div",si,[e.title?(_(),k("div",oi,[E[14]||(E[14]=n("div",{class:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-50 border border-emerald-100 mb-6"},[n("div",{class:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),n("span",{class:"text-xs font-medium text-emerald-700"},"")],-1)),n("h1",{class:"text-5xl font-bold text-gray-900 leading-tight mb-6 tracking-tight",style:ce({fontFamily:v(r).fontFamily})},T(e.title),5),n("div",ri,[n("div",ai,[E[6]||(E[6]=Ye('<div class="flex items-center gap-2" data-v-94674f16><div class="w-8 h-8 rounded-full bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center" data-v-94674f16><svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-94674f16><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" data-v-94674f16></path></svg></div><span class="font-medium" data-v-94674f16></span></div><div class="flex items-center gap-2" data-v-94674f16><div class="w-px h-4 bg-gray-300" data-v-94674f16></div></div>',2)),n("div",li,[E[4]||(E[4]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),n("span",null,T(v(C))+" ",1)]),n("div",ii,[E[5]||(E[5]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n("span",null," "+T(Math.ceil(v(C)/400))+" ",1)])]),n("button",{onClick:E[0]||(E[0]=B=>y.value=!v(y)),class:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-gray-100 transition-colors group text-sm text-gray-600",title:""},[...E[7]||(E[7]=[n("svg",{class:"w-4 h-4 group-hover:text-emerald-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})],-1),n("span",{class:"group-hover:text-emerald-600 transition-colors"},"",-1)])])]),E[15]||(E[15]=n("div",{class:"mt-6 h-px bg-gradient-to-r from-transparent via-gray-200 to-transparent"},null,-1)),L(ne,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:A(()=>[v(y)?(_(),k("div",ci,[n("div",di,[n("div",null,[E[8]||(E[8]=n("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"  ",-1)),n("div",ui,[(_(!0),k(K,null,oe(v(b),B=>(_(),k("button",{key:B.key,onClick:V=>v(a)(B.key),class:j(["px-3 py-2 text-sm rounded-lg border-2 transition-all",v(m)===B.key?"border-emerald-500 bg-emerald-50 text-emerald-700 font-semibold":"border-gray-200 hover:border-gray-300 text-gray-700"]),style:ce({fontFamily:B.family})},T(B.label),15,fi))),128))])]),n("div",null,[E[9]||(E[9]=n("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"  ",-1)),n("div",pi,[(_(!0),k(K,null,oe(v(h),B=>(_(),k("button",{key:B.key,onClick:V=>v(l)(B.key),class:j(["px-3 py-2 text-sm rounded-lg border-2 transition-all",v(w)===B.key?"border-emerald-500 bg-emerald-50 text-emerald-700 font-semibold":"border-gray-200 hover:border-gray-300 text-gray-700"])},T(B.label),11,gi))),128))])]),n("div",null,[n("label",vi,[E[12]||(E[12]=n("div",{class:"flex items-center gap-3"},[n("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})]),n("div",null,[n("span",{class:"text-sm font-medium text-gray-700"},""),n("p",{class:"text-xs text-gray-500"},"")])],-1)),n("div",mi,[n("input",{type:"checkbox",checked:v(r).singleSentencePerLine,onChange:E[1]||(E[1]=(...B)=>v(u)&&v(u)(...B)),class:"sr-only peer"},null,40,hi),E[10]||(E[10]=n("div",{class:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:bg-emerald-600 transition-colors"},null,-1)),E[11]||(E[11]=n("div",{class:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform peer-checked:translate-x-5"},null,-1))])])]),n("div",yi,[n("button",{onClick:E[2]||(E[2]=(...B)=>v(d)&&v(d)(...B)),class:"text-sm text-gray-600 hover:text-gray-900 flex items-center gap-1"},[...E[13]||(E[13]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),X("  ",-1)])]),n("button",{onClick:E[3]||(E[3]=B=>y.value=!1),class:"px-4 py-2 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 transition-colors"},"  ")])])])):P("",!0)]),_:1})])):P("",!0),n("article",bi,[n("div",{id:"article-content-container",ref_key:"articleContentRef",ref:g,class:j(["article-content select-text",{"single-sentence-per-line":v(r).singleSentencePerLine}]),style:ce({fontFamily:v(r).fontFamily,fontSize:v(r).fontSize,lineHeight:v(r).lineHeight,textRendering:"optimizeLegibility",WebkitFontSmoothing:"antialiased"}),onMouseup:R,innerHTML:v(x)},null,46,xi)]),E[16]||(E[16]=Ye('<div class="mt-20 pt-8 animate-fade-in" style="animation-delay:0.2s;" data-v-94674f16><div class="relative group" data-v-94674f16><div class="absolute -inset-4 bg-gradient-to-r from-emerald-50 via-teal-50 to-emerald-50 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-xl" data-v-94674f16></div><div class="relative flex flex-col items-center gap-4 p-8 rounded-2xl bg-gradient-to-br from-white to-gray-50 border border-gray-100 shadow-sm" data-v-94674f16><div class="w-12 h-12 rounded-full bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center" data-v-94674f16><svg class="w-6 h-6 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-94674f16><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-94674f16></path></svg></div><div class="text-center" data-v-94674f16><p class="text-sm font-semibold text-gray-900 mb-1" data-v-94674f16></p><p class="text-sm text-gray-600" data-v-94674f16> AI </p></div><div class="flex items-center gap-2 text-xs text-gray-500" data-v-94674f16><kbd class="px-2 py-1 bg-white border border-gray-200 rounded shadow-sm font-medium text-gray-600" data-v-94674f16>Shift</kbd><span data-v-94674f16>+</span><span data-v-94674f16></span></div></div></div></div>',1))]))}}),_i=Object.assign($e(wi,[["__scopeId","data-v-94674f16"]]),{__name:"ArticlePane"}),ki={class:"mb-4 bg-white/80 backdrop-blur-md border border-gray-200/50 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all"},Ci={class:"flex items-center justify-between mb-3"},$i={class:"flex items-center gap-2"},Si={class:"text-sm font-semibold text-gray-800"},Ai={key:0,class:"flex items-center gap-1"},Ti={class:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden"},Ei={class:"text-xs text-gray-500"},Mi={class:"space-y-2"},Bi={class:"mt-3 flex items-center justify-end gap-2"},Li=O({__name:"MetaInfoCard",props:{title:{},icon:{},iconBgClass:{},confidence:{}},emits:["feedback"],setup(e,{emit:t}){const s=e,o=M(null),r=S(()=>s.confidence===void 0||s.confidence===null?"":s.confidence>=.8?"bg-emerald-500":s.confidence>=.6?"bg-yellow-500":"bg-orange-500");return(a,l)=>(_(),k("div",ki,[n("div",Ci,[n("div",$i,[n("div",{class:j(["w-8 h-8 rounded-lg flex items-center justify-center",e.iconBgClass])},[(_(),z(gn(e.icon),{class:"w-5 h-5 text-white"}))],2),n("h4",Si,T(e.title),1)]),e.confidence!==void 0&&e.confidence!==null?(_(),k("div",Ai,[n("div",Ti,[n("div",{class:j(["h-full rounded-full transition-all",r.value]),style:ce({width:`${e.confidence*100}%`})},null,6)]),n("span",Ei,T(Math.round(e.confidence*100))+"%",1)])):P("",!0)]),n("div",Mi,[D(a.$slots,"default")]),n("div",Bi,[n("button",{onClick:l[0]||(l[0]=d=>a.$emit("feedback","helpful")),class:j(["p-1.5 rounded-lg transition-colors",o.value==="helpful"?"bg-emerald-100":"hover:bg-gray-100"]),title:""},[(_(),k("svg",{class:j(["w-4 h-4 transition-colors",o.value==="helpful"?"text-emerald-600":"text-gray-400 hover:text-emerald-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[2]||(l[2]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"},null,-1)])],2))],2),n("button",{onClick:l[1]||(l[1]=d=>a.$emit("feedback","not-helpful")),class:j(["p-1.5 rounded-lg transition-colors",o.value==="not-helpful"?"bg-red-100":"hover:bg-gray-100"]),title:""},[(_(),k("svg",{class:j(["w-4 h-4 transition-colors",o.value==="not-helpful"?"text-red-600":"text-gray-400 hover:text-red-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[3]||(l[3]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"},null,-1)])],2))],2)])]))}}),Jt=Object.assign(Li,{__name:"MetaInfoCard"}),Pi={class:"flex items-center gap-2 mb-3"},Oi={class:"flex items-center gap-1 text-sm text-gray-500"},Ii={class:"text-base text-gray-700 leading-relaxed mb-3"},Ri={key:0,class:"mt-3"},zi={class:"space-y-1.5"},Hi={class:"mt-4 p-3 bg-violet-50/50 rounded-lg border border-violet-200/50"},ji={class:"text-sm text-violet-800"},Di=O({__name:"AuthorIntentCard",props:{authorIntent:{}},emits:["feedback"],setup(e,{emit:t}){const s={template:`
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
  `},o=e,r={inform:"",persuade:"",entertain:"",provoke:""},a={inform:"",persuade:"",entertain:"",provoke:""},l={inform:"bg-blue-100 text-blue-700",persuade:"bg-orange-100 text-orange-700",entertain:"bg-pink-100 text-pink-700",provoke:"bg-purple-100 text-purple-700"},d=S(()=>r[o.authorIntent.primary]||o.authorIntent.primary),f=S(()=>a[o.authorIntent.primary]||""),c=S(()=>l[o.authorIntent.primary]||"bg-gray-100 text-gray-700");return(i,p)=>{const u=Jt;return _(),z(u,{title:"",icon:s,confidence:e.authorIntent.confidence,"icon-bg-class":"bg-gradient-to-br from-violet-500 to-purple-600",onFeedback:p[0]||(p[0]=g=>i.$emit("feedback",g))},{default:A(()=>[n("div",Pi,[n("span",{class:j(["px-3 py-1.5 text-sm font-medium rounded-full",c.value])},T(d.value),3),n("div",Oi,[p[1]||(p[1]=n("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),n("span",null,T(Math.round(e.authorIntent.confidence*100))+"% ",1)])]),n("p",Ii,T(e.authorIntent.description),1),e.authorIntent.indicators&&e.authorIntent.indicators.length>0?(_(),k("div",Ri,[p[3]||(p[3]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-4 h-4 text-violet-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("ul",zi,[(_(!0),k(K,null,oe(e.authorIntent.indicators,(g,y)=>(_(),k("li",{key:y,class:"text-sm text-gray-600 flex items-start gap-2"},[p[2]||(p[2]=n("svg",{class:"w-2 h-2 text-violet-500 mt-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 8 8"},[n("circle",{cx:"4",cy:"4",r:"3"})],-1)),n("span",null,T(g),1)]))),128))])])):P("",!0),n("div",Hi,[n("p",ji,[n("strong",null,T(d.value),1),X(": "+T(f.value),1)])])]),_:1},8,["confidence"])}}}),qi=Object.assign(Di,{__name:"AuthorIntentCard"}),Ni={class:"flex items-center gap-2 mb-3"},Vi={class:"mb-3"},Fi={class:"flex items-center justify-between text-sm text-gray-600 mb-1"},Wi={class:"font-medium"},Ui={class:"relative h-2 bg-gray-200 rounded-full overflow-hidden"},Gi={class:"space-y-2 text-base"},Ki={class:"flex items-center justify-between"},Yi={class:"font-medium text-gray-800"},Xi={class:"flex items-center justify-between"},Ji={key:0,class:"flex items-center justify-between"},Qi={class:"font-medium text-gray-800"},Zi={key:0,class:"mt-4 p-3 bg-amber-50/50 rounded-lg border border-amber-200/50"},ec={class:"space-y-1"},tc={class:"mt-4 p-3 bg-gradient-to-r from-amber-50/50 to-orange-50/50 rounded-lg border border-amber-200/50"},nc={class:"flex items-start gap-2"},sc={class:"text-sm text-amber-800"},oc=O({__name:"TimelinessCard",props:{timelinessAnalysis:{},timelinessScore:{}},emits:["feedback"],setup(e,{emit:t}){const s={template:`
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
  `},o=e,r={timeless:"",evergreen:"","time-sensitive":"",breaking:""},a={low:"",medium:"",high:""},l={timeless:"bg-emerald-100 text-emerald-700",evergreen:"bg-green-100 text-green-700","time-sensitive":"bg-orange-100 text-orange-700",breaking:"bg-red-100 text-red-700"},d={low:"text-emerald-600",medium:"text-orange-600",high:"text-red-600"},f=S(()=>r[o.timelinessAnalysis.category]||o.timelinessAnalysis.category),c=S(()=>a[o.timelinessAnalysis.decay_rate]||o.timelinessAnalysis.decay_rate),i=S(()=>l[o.timelinessAnalysis.category]||"bg-gray-100 text-gray-700"),p=S(()=>d[o.timelinessAnalysis.decay_rate]||"text-gray-600"),u=S(()=>o.timelinessScore>=.7?"bg-gradient-to-r from-orange-500 to-red-500":o.timelinessScore>=.4?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-emerald-500 to-green-500"),g=b=>{try{return new Date(b).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}catch{return b}},y=S(()=>{const b=o.timelinessAnalysis.category;return b==="timeless"?"":b==="evergreen"?"":b==="time-sensitive"?"":b==="breaking"?"":""});return(b,h)=>{const m=Jt;return _(),z(m,{title:"",icon:s,confidence:e.timelinessScore,"icon-bg-class":"bg-gradient-to-br from-amber-500 to-orange-600",onFeedback:h[0]||(h[0]=w=>b.$emit("feedback",w))},{default:A(()=>[n("div",Ni,[n("span",{class:j(["px-3 py-1.5 text-sm font-medium rounded-full",i.value])},T(f.value),3),n("span",{class:j(["text-sm font-medium",p.value])},T(c.value),3)]),n("div",Vi,[n("div",Fi,[h[1]||(h[1]=n("span",null,"",-1)),n("span",Wi,T(Math.round(e.timelinessScore*100))+"%",1)]),n("div",Ui,[n("div",{class:j(["h-full rounded-full transition-all",u.value]),style:ce({width:`${e.timelinessScore*100}%`})},null,6)]),h[2]||(h[2]=n("div",{class:"flex items-center justify-between text-xs text-gray-500 mt-1"},[n("span",null,""),n("span",null,"")],-1))]),n("div",Gi,[n("div",Ki,[h[3]||(h[3]=n("span",{class:"text-gray-600"},":",-1)),n("span",Yi,T(f.value),1)]),n("div",Xi,[h[4]||(h[4]=n("span",{class:"text-gray-600"},":",-1)),n("span",{class:j(["font-medium",p.value])},T(c.value),3)]),e.timelinessAnalysis.best_before?(_(),k("div",Ji,[h[5]||(h[5]=n("span",{class:"text-gray-600"},":",-1)),n("span",Qi,T(g(e.timelinessAnalysis.best_before)),1)])):P("",!0)]),e.timelinessAnalysis.context_dependencies&&e.timelinessAnalysis.context_dependencies.length>0?(_(),k("div",Zi,[h[7]||(h[7]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-4 h-4 text-amber-700",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-amber-800"},"")],-1)),n("ul",ec,[(_(!0),k(K,null,oe(e.timelinessAnalysis.context_dependencies,(w,x)=>(_(),k("li",{key:x,class:"text-sm text-amber-700 flex items-start gap-1.5"},[h[6]||(h[6]=n("svg",{class:"w-2 h-2 text-amber-700 mt-1.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 8 8"},[n("circle",{cx:"4",cy:"4",r:"3"})],-1)),n("span",null,T(w),1)]))),128))])])):P("",!0),n("div",tc,[n("div",nc,[h[9]||(h[9]=n("svg",{class:"w-4 h-4 text-amber-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),n("p",sc,[h[8]||(h[8]=n("strong",null,":",-1)),X(" "+T(y.value),1)])])])]),_:1},8,["confidence"])}}}),rc=Object.assign(oc,{__name:"TimelinessCard"}),ac={class:"mb-3"},lc={key:0,class:"flex items-center gap-2 p-3 bg-emerald-50 rounded-lg border border-emerald-200"},ic={key:1,class:"flex items-center gap-2 p-3 bg-rose-50 rounded-lg border border-rose-200"},cc={key:0,class:"mb-3"},dc={class:"flex flex-wrap gap-2"},uc={key:1,class:"mb-3"},fc={class:"flex items-center justify-between text-sm text-gray-600 mb-1"},pc={class:"relative h-2 bg-gray-200 rounded-full overflow-hidden"},gc={class:"flex items-center justify-between text-sm mb-3"},vc={key:2,class:"mt-4"},mc={class:"space-y-2"},hc={class:"flex items-start gap-2 mb-1.5"},yc={class:"px-2 py-0.5 bg-rose-200 text-rose-800 text-xs font-medium rounded"},bc={class:"text-sm text-gray-700 italic mb-1.5"},xc={class:"text-sm text-rose-700"},wc={class:"mt-4 p-3 bg-gradient-to-r from-rose-50/50 to-pink-50/50 rounded-lg border border-rose-200/50"},_c={class:"flex items-start gap-2"},kc={class:"text-sm text-rose-800"},Cc=O({__name:"BiasCard",props:{biasAnalysis:{}},emits:["feedback"],setup(e,{emit:t}){const s={template:`
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
    </svg>
  `},o=e,r={confirmation_bias:"",political_bias:"",cultural_bias:"",selection_bias:"",anchoring_bias:"",availability_bias:""},a={low:"",medium:"",high:""},l={balanced:"",slightly_biased:"",heavily_biased:""},d=S(()=>a[o.biasAnalysis.severity]||o.biasAnalysis.severity),f=S(()=>l[o.biasAnalysis.overall_balance]||o.biasAnalysis.overall_balance),c=S(()=>{switch(o.biasAnalysis.severity){case"low":return"text-yellow-600";case"medium":return"text-orange-600";case"high":return"text-red-600";default:return"text-gray-600"}}),i=S(()=>{switch(o.biasAnalysis.severity){case"low":return"bg-yellow-500";case"medium":return"bg-orange-500";case"high":return"bg-red-500";default:return"bg-gray-500"}}),p=S(()=>{switch(o.biasAnalysis.severity){case"low":return"33%";case"medium":return"66%";case"high":return"100%";default:return"0%"}}),u=S(()=>{switch(o.biasAnalysis.overall_balance){case"balanced":return"text-emerald-600";case"slightly_biased":return"text-orange-600";case"heavily_biased":return"text-red-600";default:return"text-gray-600"}}),g=S(()=>o.biasAnalysis.detected?o.biasAnalysis.severity==="high"?"":o.biasAnalysis.severity==="medium"?"":"":"");return(y,b)=>{const h=Jt;return _(),z(h,{title:"",icon:s,confidence:e.biasAnalysis.detected?.8:.9,"icon-bg-class":"bg-gradient-to-br from-rose-500 to-pink-600",onFeedback:b[0]||(b[0]=m=>y.$emit("feedback",m))},{default:A(()=>[n("div",ac,[e.biasAnalysis.detected?(_(),k("div",ic,[...b[2]||(b[2]=[n("svg",{class:"w-5 h-5 text-rose-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),n("div",null,[n("p",{class:"text-base font-medium text-rose-800"},""),n("p",{class:"text-sm text-rose-700 mt-0.5"},"")],-1)])])):(_(),k("div",lc,[...b[1]||(b[1]=[n("svg",{class:"w-5 h-5 text-emerald-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),n("div",null,[n("p",{class:"text-base font-medium text-emerald-800"},""),n("p",{class:"text-sm text-emerald-700 mt-0.5"},"")],-1)])]))]),e.biasAnalysis.detected&&e.biasAnalysis.types.length>0?(_(),k("div",cc,[b[3]||(b[3]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-rose-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",dc,[(_(!0),k(K,null,oe(e.biasAnalysis.types,(m,w)=>(_(),k("span",{key:w,class:"px-2 py-1 bg-rose-100 text-rose-700 text-sm rounded-lg"},T(r[m]||m),1))),128))])])):P("",!0),e.biasAnalysis.detected?(_(),k("div",uc,[n("div",fc,[b[4]||(b[4]=n("span",null,"",-1)),n("span",{class:j(["font-medium",c.value])},T(d.value),3)]),n("div",pc,[n("div",{class:j(["h-full rounded-full transition-all",i.value]),style:ce({width:p.value})},null,6)])])):P("",!0),n("div",gc,[b[5]||(b[5]=n("span",{class:"text-gray-600"},":",-1)),n("span",{class:j(["font-medium",u.value])},T(f.value),3)]),e.biasAnalysis.detected&&e.biasAnalysis.examples&&e.biasAnalysis.examples.length>0?(_(),k("div",vc,[b[6]||(b[6]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-rose-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),n("path",{"fill-rule":"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",mc,[(_(!0),k(K,null,oe(e.biasAnalysis.examples.slice(0,3),(m,w)=>(_(),k("div",{key:w,class:"p-3 bg-rose-50/50 rounded-lg border border-rose-200/50"},[n("div",hc,[n("span",yc,T(r[m.type]||m.type),1)]),n("p",bc,'"'+T(m.text)+'"',1),n("p",xc,T(m.explanation),1)]))),128))])])):P("",!0),n("div",wc,[n("div",_c,[b[8]||(b[8]=n("svg",{class:"w-4 h-4 text-rose-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),n("p",kc,[b[7]||(b[7]=n("strong",null,":",-1)),X(" "+T(g.value),1)])])])]),_:1},8,["confidence"])}}}),$c=Object.assign(Cc,{__name:"BiasCard"}),Sc={key:0,class:"mb-4"},Ac={class:"flex flex-wrap gap-2"},Tc={key:1,class:"mb-4"},Ec={class:"space-y-1.5"},Mc={key:2,class:"mb-4"},Bc={class:"space-y-1.5"},Lc={key:3,class:"mb-4"},Pc={class:"flex flex-wrap gap-2"},Oc={class:"mt-4 p-3 bg-gradient-to-r from-indigo-50/50 to-blue-50/50 rounded-lg border border-indigo-200/50"},Ic={class:"flex items-start gap-2"},Rc={class:"text-sm text-indigo-800"},zc={key:4,class:"mt-4 p-3 bg-gradient-to-r from-emerald-50/50 to-green-50/50 rounded-lg border border-emerald-200/50"},Hc=O({__name:"KnowledgeGapsCard",props:{knowledgeGaps:{}},emits:["feedback"],setup(e,{emit:t}){const s={template:`
    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
    </svg>
  `},o=e,r=S(()=>(!o.knowledgeGaps.prerequisites||o.knowledgeGaps.prerequisites.length===0)&&(!o.knowledgeGaps.assumptions||o.knowledgeGaps.assumptions.length===0)&&(!o.knowledgeGaps.missing_context||o.knowledgeGaps.missing_context.length===0)),a=S(()=>{if(r.value)return"";const l=o.knowledgeGaps.prerequisites&&o.knowledgeGaps.prerequisites.length>0,d=o.knowledgeGaps.assumptions&&o.knowledgeGaps.assumptions.length>0;return l&&d?"":l?"":d?"":""});return(l,d)=>{const f=Jt;return _(),z(f,{title:"",icon:s,"icon-bg-class":"bg-gradient-to-br from-indigo-500 to-blue-600",onFeedback:d[0]||(d[0]=c=>l.$emit("feedback",c))},{default:A(()=>[e.knowledgeGaps.prerequisites&&e.knowledgeGaps.prerequisites.length>0?(_(),k("div",Sc,[d[1]||(d[1]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-indigo-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",Ac,[(_(!0),k(K,null,oe(e.knowledgeGaps.prerequisites,(c,i)=>(_(),k("span",{key:i,class:"px-3 py-1.5 bg-indigo-50 border border-indigo-200 text-indigo-700 text-sm rounded-lg hover:bg-indigo-100 transition-colors cursor-pointer"},T(c),1))),128))]),d[2]||(d[2]=n("p",{class:"text-sm text-gray-600 mt-2"},"",-1))])):P("",!0),e.knowledgeGaps.assumptions&&e.knowledgeGaps.assumptions.length>0?(_(),k("div",Tc,[d[4]||(d[4]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("ul",Ec,[(_(!0),k(K,null,oe(e.knowledgeGaps.assumptions,(c,i)=>(_(),k("li",{key:i,class:"text-sm text-gray-700 flex items-start gap-2 p-2 bg-blue-50/50 rounded-lg border border-blue-200/50"},[d[3]||(d[3]=n("svg",{class:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)),n("span",null,T(c),1)]))),128))]),d[5]||(d[5]=n("p",{class:"text-sm text-gray-600 mt-2"},"",-1))])):P("",!0),e.knowledgeGaps.missing_context&&e.knowledgeGaps.missing_context.length>0?(_(),k("div",Mc,[d[7]||(d[7]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("ul",Bc,[(_(!0),k(K,null,oe(e.knowledgeGaps.missing_context,(c,i)=>(_(),k("li",{key:i,class:"text-sm text-gray-700 flex items-start gap-2"},[d[6]||(d[6]=n("svg",{class:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),n("span",null,T(c),1)]))),128))]),d[8]||(d[8]=n("p",{class:"text-sm text-gray-600 mt-2"},"",-1))])):P("",!0),e.knowledgeGaps.related_concepts&&e.knowledgeGaps.related_concepts.length>0?(_(),k("div",Lc,[d[9]||(d[9]=n("div",{class:"flex items-center gap-1 mb-2"},[n("svg",{class:"w-3 h-3 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),n("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",Pc,[(_(!0),k(K,null,oe(e.knowledgeGaps.related_concepts,(c,i)=>(_(),k("span",{key:i,class:"px-3 py-1.5 bg-emerald-50 border border-emerald-200 text-emerald-700 text-sm rounded-lg hover:bg-emerald-100 transition-colors cursor-pointer"},T(c),1))),128))]),d[10]||(d[10]=n("p",{class:"text-sm text-gray-600 mt-2"},"",-1))])):P("",!0),n("div",Oc,[n("div",Ic,[d[12]||(d[12]=n("svg",{class:"w-4 h-4 text-indigo-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})],-1)),n("p",Rc,[d[11]||(d[11]=n("strong",null,":",-1)),X(" "+T(a.value),1)])])]),r.value?(_(),k("div",zc,[...d[13]||(d[13]=[n("div",{class:"flex items-center gap-2"},[n("svg",{class:"w-5 h-5 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),n("p",{class:"text-sm font-medium text-emerald-800"},"")],-1)])])):P("",!0)]),_:1})}}}),jc=Object.assign(Hc,{__name:"KnowledgeGapsCard"}),Dc=O({__name:"CardDescription",props:{class:{}},setup(e){const t=e;return(s,o)=>(_(),k("p",{"data-slot":"card-description",class:j(v(Me)("text-muted-foreground text-sm",t.class))},[D(s.$slots,"default")],2))}}),Un=O({__name:"CardHeader",props:{class:{}},setup(e){const t=e;return(s,o)=>(_(),k("div",{"data-slot":"card-header",class:j(v(Me)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t.class))},[D(s.$slots,"default")],2))}}),Gn=O({__name:"CardTitle",props:{class:{}},setup(e){const t=e;return(s,o)=>(_(),k("h3",{"data-slot":"card-title",class:j(v(Me)("leading-none font-semibold",t.class))},[D(s.$slots,"default")],2))}}),Kn=O({__name:"Badge",props:{asChild:{type:Boolean},as:{},variant:{},class:{}},setup(e){const t=e,s=yt(t,"class");return(o,r)=>(_(),z(v(pe),J({"data-slot":"badge",class:v(Me)(v(qc)({variant:e.variant}),t.class)},v(s)),{default:A(()=>[D(o.$slots,"default")]),_:3},16,["class"]))}}),qc=Mo("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),Nc=O({__name:"ScrollBar",props:{orientation:{default:"vertical"},forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,s=yt(t,"class");return(o,r)=>(_(),z(v(el),J(v(s),{class:v(Me)("flex touch-none select-none transition-colors",e.orientation==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",e.orientation==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-px",t.class)}),{default:A(()=>[L(v(rl),{class:"relative flex-1 rounded-full bg-border"})]),_:1},16,["class"]))}}),Vc=O({__name:"ScrollArea",props:{type:{},dir:{},scrollHideDelay:{},asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,s=yt(t,"class");return(o,r)=>(_(),z(v(Ra),J(v(s),{class:v(Me)("relative overflow-hidden",t.class)}),{default:A(()=>[L(v(ll),{class:"h-full w-full rounded-[inherit]"},{default:A(()=>[D(o.$slots,"default")]),_:3}),L(Nc),L(v(Da))]),_:3},16,["class"]))}});/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fc=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,o)=>o?o.toUpperCase():s.toLowerCase()),Wc=e=>{const t=Fc(e);return t.charAt(0).toUpperCase()+t.slice(1)},Uc=(...e)=>e.filter((t,s,o)=>!!t&&t.trim()!==""&&o.indexOf(t)===s).join(" ").trim(),Xn=e=>e==="";/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=({name:e,iconNode:t,absoluteStrokeWidth:s,"absolute-stroke-width":o,strokeWidth:r,"stroke-width":a,size:l=lt.width,color:d=lt.stroke,...f},{slots:c})=>Tt("svg",{...lt,...f,width:l,height:l,stroke:d,"stroke-width":Xn(s)||Xn(o)||s===!0||o===!0?Number(r||a||lt["stroke-width"])*24/Number(l):r||a||lt["stroke-width"],class:Uc("lucide",f.class,...e?[`lucide-${Yn(Wc(e))}-icon`,`lucide-${Yn(e)}`]:["lucide-icon"])},[...t.map(i=>Tt(...i)),...c.default?[c.default()]:[]]);/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=(e,t)=>(s,{slots:o,attrs:r})=>Tt(Gc,{...r,...s,iconNode:t,name:e},o);/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=$n("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=$n("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=$n("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Jc={class:"space-y-4"},Qc={class:"text-sm text-gray-700 leading-relaxed"},Zc={key:0,class:"mt-4 space-y-2"},ed={class:"space-y-1"},td={key:1,class:"mt-4 grid grid-cols-3 gap-3"},nd={class:"text-center p-3 bg-blue-50 rounded-lg"},sd={class:"text-xl font-bold text-blue-700"},od={class:"text-center p-3 bg-green-50 rounded-lg"},rd={class:"text-xl font-bold text-green-700"},ad={class:"text-center p-3 bg-amber-50 rounded-lg"},ld={class:"text-xl font-bold text-amber-700"},id={class:"space-y-4"},cd={key:0,class:"relative pl-6 pb-4"},dd=["onClick"],ud={class:"flex items-start gap-2 mb-2"},fd={class:"text-sm text-gray-800 leading-relaxed"},pd={class:"text-xs text-gray-500 mt-2"},gd={key:1,class:"relative pl-6 pb-4"},vd=["onClick"],md={class:"flex items-start gap-2 mb-2"},hd={class:"text-sm text-gray-800 leading-relaxed"},yd={class:"text-xs text-gray-500 mt-2"},bd=O({__name:"ArgumentStructureView",props:{highlights:{},annotations:{}},setup(e){const t=e,s=S(()=>[...t.highlights].sort((l,d)=>(l.sentence_index||0)-(d.sentence_index||0))),o=l=>l?l.toFixed(1):"0",r=l=>{let d=0;for(let f=0;f<=l;f++)s.value[f]?.category==="claim"&&d++;return d},a=l=>{const d=document.getElementById("article-content-container");if(!d)return;const f=d.querySelectorAll(".meta-view-highlight");for(const c of f)if(c.textContent?.trim()===l.text.trim()){c.scrollIntoView({behavior:"smooth",block:"center"}),c.classList.add("highlight-flash"),setTimeout(()=>{c.classList.remove("highlight-flash")},2e3);break}};return(l,d)=>(_(),k("div",Jc,[L(v(Bt),null,{default:A(()=>[L(v(Un),{class:"pb-3"},{default:A(()=>[L(v(Gn),{class:"text-sm flex items-center gap-2"},{default:A(()=>[L(v(Yc),{class:"w-4 h-4"}),d[0]||(d[0]=X("  ",-1))]),_:1})]),_:1}),L(v(Mt),null,{default:A(()=>[n("p",Qc,T(e.annotations.summary),1),e.annotations.key_insights&&e.annotations.key_insights.length>0?(_(),k("div",Zc,[d[1]||(d[1]=n("h4",{class:"text-xs font-semibold text-gray-600"},"",-1)),n("ul",ed,[(_(!0),k(K,null,oe(e.annotations.key_insights,(f,c)=>(_(),k("li",{key:c,class:"text-xs text-gray-600 flex items-start gap-2"},[L(v(Kc),{class:"w-3 h-3 text-emerald-600 mt-0.5 flex-shrink-0"}),n("span",null,T(f),1)]))),128))])])):P("",!0),e.annotations.statistics?(_(),k("div",td,[n("div",nd,[n("div",sd,T(e.annotations.statistics.claim_count||0),1),d[2]||(d[2]=n("div",{class:"text-xs text-gray-600"},"",-1))]),n("div",od,[n("div",rd,T(e.annotations.statistics.evidence_count||0),1),d[3]||(d[3]=n("div",{class:"text-xs text-gray-600"},"",-1))]),n("div",ad,[n("div",ld,T(o(e.annotations.statistics.claim_to_evidence_ratio)),1),d[4]||(d[4]=n("div",{class:"text-xs text-gray-600"},"",-1))])])):P("",!0)]),_:1})]),_:1}),L(v(Bt),null,{default:A(()=>[L(v(Un),{class:"pb-3"},{default:A(()=>[L(v(Gn),{class:"text-sm flex items-center gap-2"},{default:A(()=>[L(v(Xc),{class:"w-4 h-4"}),d[5]||(d[5]=X("  ",-1))]),_:1}),L(v(Dc),{class:"text-xs"},{default:A(()=>[...d[6]||(d[6]=[X("",-1)])]),_:1})]),_:1}),L(v(Mt),null,{default:A(()=>[L(v(Vc),{class:"h-[400px] pr-4"},{default:A(()=>[n("div",id,[(_(!0),k(K,null,oe(s.value,(f,c)=>(_(),k("div",{key:c,class:"group"},[f.category==="claim"?(_(),k("div",cd,[d[7]||(d[7]=n("div",{class:"absolute left-3 top-0 bottom-0 w-px bg-blue-200"},null,-1)),d[8]||(d[8]=n("div",{class:"absolute left-[0.6875rem] top-3 w-2.5 h-2.5 rounded-full bg-blue-500 border-2 border-white"},null,-1)),n("div",{onClick:i=>a(f),class:"ml-4 p-3 bg-blue-50 border border-blue-200 rounded-lg cursor-pointer hover:bg-blue-100 hover:shadow-md transition-all"},[n("div",ud,[L(v(Kn),{variant:"default",class:"bg-blue-600 text-xs"},{default:A(()=>[X(" "+T(r(c)),1)]),_:2},1024)]),n("p",fd,T(f.text),1),n("p",pd,T(f.tooltip),1)],8,dd)])):f.category==="evidence"?(_(),k("div",gd,[d[10]||(d[10]=n("div",{class:"absolute left-3 top-0 bottom-0 w-px bg-green-200"},null,-1)),d[11]||(d[11]=n("div",{class:"absolute left-[0.6875rem] top-3 w-2.5 h-2.5 rounded-full bg-green-500 border-2 border-white"},null,-1)),n("div",{onClick:i=>a(f),class:"ml-4 p-3 bg-green-50 border border-green-200 rounded-lg cursor-pointer hover:bg-green-100 hover:shadow-md transition-all"},[n("div",md,[L(v(Kn),{variant:"default",class:"bg-green-600 text-xs"},{default:A(()=>[...d[9]||(d[9]=[X("",-1)])]),_:1})]),n("p",hd,T(f.text),1),n("p",yd,T(f.tooltip),1)],8,vd)])):P("",!0)]))),128))])]),_:1})]),_:1})]),_:1})]))}}),xd=Object.assign($e(bd,[["__scopeId","data-v-8da86f09"]]),{__name:"ArgumentStructureView"}),wd=()=>{const e=fe(),t=N("enabled-lenses",()=>new Set),s=N("lens-results",()=>new Map),o=N("loading-lenses",()=>new Set),r=N("lens-error",()=>null),a=async(h,m,w=!1)=>{o.value.add(m),r.value=null;try{const x=await $fetch(`${e.public.apiBase}/api/v1/articles/${h}/thinking-lens/${m}`,{params:{force_reanalyze:w}});if(x.status==="success")return s.value.set(m,x.lens_result),console.log(` ${m} :`,x.lens_result.highlights.length,""),x.lens_result}catch(x){throw console.error(" :",x),r.value=x.data?.detail||x.message||"",x}finally{o.value.delete(m)}},l=async(h,m,w)=>{if(t.value.has(m))i(w,m),t.value.delete(m),console.log(` ${m} `);else{s.value.has(m)||await a(h,m);const x=s.value.get(m);x&&(c(w,x.highlights,m),t.value.add(m),console.log(` ${m} `))}},d=h=>{g(h),t.value.clear()},f=(h,m)=>{if(!h||m.length===0){console.warn(" ");return}try{g(h),console.log(" ",m.length,"");for(const w of m)try{p(h,w)}catch(x){console.error(" :",w.text.substring(0,30),x)}console.log(" ")}catch(w){console.error(" :",w)}},c=(h,m,w)=>{if(!h||m.length===0){console.warn(" ");return}try{console.log(`  ${w}:`,m.length,"");for(const x of m)try{p(h,x,w)}catch($){console.error(" :",x.text.substring(0,30),$)}console.log(` ${w} `)}catch(x){console.error(" :",x)}},i=(h,m)=>{const w=h.querySelectorAll(`.meta-view-highlight[data-lens-type="${m}"]`);w.forEach(x=>{const $=x.parentNode;if($){const C=document.createTextNode(x.textContent||"");$.replaceChild(C,x)}}),h.normalize(),console.log(`  ${w.length}  ${m} `)},p=(h,m,w)=>{const x=m.text.trim();if(!x)return;const $=document.createTreeWalker(h,NodeFilter.SHOW_TEXT,{acceptNode:E=>E.parentElement?.classList.contains("meta-view-highlight")?NodeFilter.FILTER_REJECT:E.textContent?.trim()?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),C=[];let R;for(;R=$.nextNode();)C.push(R);let I=!1;for(const E of C){const B=E.textContent||"",V=B.indexOf(x);if(V!==-1){const F=B.substring(0,V),W=B.substring(V,V+x.length),se=B.substring(V+x.length),U=E.parentNode;if(!U)continue;const ie=u(W,m,w);F&&U.insertBefore(document.createTextNode(F),E),U.insertBefore(ie,E),se&&U.insertBefore(document.createTextNode(se),E),U.removeChild(E),I=!0;break}}I||console.warn(" :",x.substring(0,30)+"...")},u=(h,m,w)=>{const x=document.createElement("span");return x.className="meta-view-highlight",x.dataset.category=m.category,x.dataset.tooltip=m.tooltip,w&&(x.dataset.lensType=w),x.style.backgroundColor=m.color,x.style.borderBottom=`2px solid ${m.color.replace("0.4","0.6")}`,x.style.cursor="help",x.style.padding="0.1em 0.2em",x.style.borderRadius="0.25em",x.style.transition="all 0.2s ease",x.textContent=h,x.addEventListener("mouseenter",()=>{x.style.backgroundColor=m.color.replace("0.4","0.6"),x.style.boxShadow="0 0 0 2px rgba(0, 0, 0, 0.1)"}),x.addEventListener("mouseleave",()=>{x.style.backgroundColor=m.color,x.style.boxShadow="none"}),x},g=h=>{h.querySelectorAll(".meta-view-highlight").forEach(w=>{const x=w.parentNode;if(x){const $=document.createTextNode(w.textContent||"");x.replaceChild($,w)}}),h.normalize()},y=h=>{g(h)},b=()=>{s.value.clear(),activeLens.value=null,r.value=null};return{enabledLenses:Z(t),lensResults:Z(s),loadingLenses:Z(o),error:Z(r),isArgumentLensEnabled:S(()=>t.value.has("argument_structure")),isStanceLensEnabled:S(()=>t.value.has("author_stance")),isLoadingArgumentLens:S(()=>o.value.has("argument_structure")),isLoadingStanceLens:S(()=>o.value.has("author_stance")),loadLens:a,toggleLens:l,clearLens:d,renderHighlights:f,renderHighlightsByType:c,removeHighlights:g,removeHighlightsByType:i,clearHighlights:y,clearLensResults:b}},_d={class:"mb-4 bg-white/80 backdrop-blur-md border border-gray-200/50 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all"},kd={class:"flex items-center justify-between mb-4"},Cd={key:0,class:"mb-4 p-3 bg-gradient-to-r from-teal-50/50 to-cyan-50/50 rounded-lg border border-teal-200/50"},$d={class:"space-y-3"},Sd={key:0,class:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-xl flex items-center justify-center z-10"},Ad={class:"flex items-start gap-3"},Td={class:"flex-1"},Ed={class:"flex items-center gap-2 mb-1"},Md={key:0,class:"px-2 py-0.5 bg-teal-500 text-white text-[10px] font-medium rounded-full"},Bd={key:0,class:"mt-3"},Ld={class:"flex items-center justify-between text-xs text-gray-600 pt-2 border-t border-teal-200/50"},Pd={key:0,class:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-xl flex items-center justify-center z-10"},Od={class:"flex items-start gap-3"},Id={class:"flex-1"},Rd={class:"flex items-center gap-2 mb-1"},zd={key:0,class:"px-2 py-0.5 bg-purple-500 text-white text-[10px] font-medium rounded-full"},Hd={key:0,class:"mt-3 space-y-2"},jd={class:"flex flex-wrap gap-2"},Dd={class:"flex items-center gap-1.5"},qd={class:"text-xs text-gray-600"},Nd={class:"flex items-center gap-1.5"},Vd={class:"text-xs text-gray-600"},Fd={class:"pt-2 border-t border-purple-200/50"},Wd={class:"flex items-center justify-between text-xs text-gray-600 mb-1"},Ud={class:"font-medium"},Gd={class:"relative h-2 bg-gray-200 rounded-full overflow-hidden"},Kd={class:"flex items-center justify-between text-xs text-gray-600 pt-2 border-t border-purple-200/50"},Yd={key:0,class:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg"},Xd={class:"flex items-start gap-2"},Jd={class:"flex-1"},Qd={class:"text-xs text-red-700 mt-1"},Zd={key:0,class:"mt-4 pt-3 border-t border-gray-200"},eu=O({__name:"ThinkingLensSwitcher",props:{articleId:{},containerElementId:{}},emits:["lensApplied","lensRemoved"],setup(e,{emit:t}){const s=e,o=t,{enabledLenses:r,lensResults:a,loadingLenses:l,error:d,toggleLens:f}=wd(),c=M(!1),i=M(null),p=$=>r.value.has($),u=$=>a.value.get($)||null,g=$=>l.value.has($),y=async $=>{i.value=$;try{const C=s.containerElementId?document.getElementById(s.containerElementId):null;if(!C){console.error(" ");return}await f(s.articleId,$,C),r.value.has($)?o("lensApplied",$):o("lensRemoved")}catch(C){console.error("Failed to toggle lens:",C)}finally{i.value=null}},b=$=>{const C=s.containerElementId?document.getElementById(s.containerElementId):null;C&&f(s.articleId,$,C),o("lensRemoved")},h=()=>{i.value&&y(i.value)},m=($,C)=>{const R=u($);return R?R.highlights.filter(I=>I.category===C).length:0},w=$=>{const C=u($);return C?C.highlights.length:0},x=()=>{const $=u("author_stance");if(!$)return 0;const C=$.highlights.length;if(C===0)return 0;const R=m("author_stance","subjective");return Math.round(R/C*100)};return G(()=>s.articleId,()=>{r.value.clear()}),($,C)=>{const R=xd;return _(),k("div",_d,[n("div",kd,[C[6]||(C[6]=Ye('<div class="flex items-center gap-2"><div class="w-8 h-8 rounded-lg bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg></div><h4 class="text-sm font-semibold text-gray-800"></h4></div>',1)),n("button",{onClick:C[0]||(C[0]=I=>c.value=!c.value),class:"p-1 rounded-lg hover:bg-gray-100 transition-colors",title:""},[...C[5]||(C[5]=[n("svg",{class:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)])])]),L(ne,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","leave-active-class":"transition-all duration-200 ease-in","leave-to-class":"opacity-0 -translate-y-2"},{default:A(()=>[c.value?(_(),k("div",Cd,[...C[7]||(C[7]=[n("p",{class:"text-xs text-teal-800 leading-relaxed"},"  ",-1)])])):P("",!0)]),_:1}),n("div",$d,[n("div",{onClick:C[2]||(C[2]=I=>y("argument_structure")),class:j(["relative p-4 rounded-xl border-2 cursor-pointer transition-all",p("argument_structure")?"border-teal-500 bg-gradient-to-r from-teal-50 to-cyan-50 shadow-md":"border-gray-200 bg-white/50 hover:border-teal-300 hover:shadow-sm"])},[g("argument_structure")?(_(),k("div",Sd,[...C[8]||(C[8]=[n("svg",{class:"w-6 h-6 text-teal-600 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])):P("",!0),n("div",Ad,[n("div",{class:j(["w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors",p("argument_structure")?"bg-teal-500":"bg-gray-200"])},[(_(),k("svg",{class:j(["w-5 h-5 transition-colors",p("argument_structure")?"text-white":"text-gray-500"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...C[9]||(C[9]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"},null,-1)])],2))],2),n("div",Td,[n("div",Ed,[n("h5",{class:j(["text-sm font-semibold transition-colors",p("argument_structure")?"text-teal-700":"text-gray-700"])},"",2),p("argument_structure")?(_(),k("span",Md,"  ")):P("",!0)]),C[10]||(C[10]=n("p",{class:"text-xs text-gray-600 mb-2"},"",-1)),p("argument_structure")&&u("argument_structure")?(_(),k("div",Bd,[n("div",Ld,[n("span",null," "+T(w("argument_structure"))+" ",1),n("button",{onClick:C[1]||(C[1]=be(I=>b("argument_structure"),["stop"])),class:"px-2 py-1 text-teal-600 hover:bg-teal-100 rounded transition-colors"},"  ")])])):P("",!0)])])],2),n("div",{onClick:C[4]||(C[4]=I=>y("author_stance")),class:j(["relative p-4 rounded-xl border-2 cursor-pointer transition-all",p("author_stance")?"border-purple-500 bg-gradient-to-r from-purple-50 to-pink-50 shadow-md":"border-gray-200 bg-white/50 hover:border-purple-300 hover:shadow-sm"])},[g("author_stance")?(_(),k("div",Pd,[...C[11]||(C[11]=[n("svg",{class:"w-6 h-6 text-purple-600 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])])):P("",!0),n("div",Od,[n("div",{class:j(["w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 transition-colors",p("author_stance")?"bg-purple-500":"bg-gray-200"])},[(_(),k("svg",{class:j(["w-5 h-5 transition-colors",p("author_stance")?"text-white":"text-gray-500"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...C[12]||(C[12]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"},null,-1)])],2))],2),n("div",Id,[n("div",Rd,[n("h5",{class:j(["text-sm font-semibold transition-colors",p("author_stance")?"text-purple-700":"text-gray-700"])},"",2),p("author_stance")?(_(),k("span",zd,"  ")):P("",!0)]),C[16]||(C[16]=n("p",{class:"text-xs text-gray-600 mb-2"},"",-1)),p("author_stance")&&u("author_stance")?(_(),k("div",Hd,[n("div",jd,[n("div",Dd,[C[13]||(C[13]=n("span",{class:"w-3 h-3 rounded bg-indigo-200 border border-indigo-400"},null,-1)),n("span",qd," ("+T(m("author_stance","objective"))+")",1)]),n("div",Nd,[C[14]||(C[14]=n("span",{class:"w-3 h-3 rounded bg-rose-200 border border-rose-400"},null,-1)),n("span",Vd," ("+T(m("author_stance","subjective"))+")",1)])]),n("div",Fd,[n("div",Wd,[C[15]||(C[15]=n("span",null,"",-1)),n("span",Ud,T(x())+"%",1)]),n("div",Gd,[n("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-rose-500 rounded-full transition-all",style:ce({width:`${x()}%`})},null,4)])]),n("div",Kd,[n("span",null," "+T(w("author_stance"))+" ",1),n("button",{onClick:C[3]||(C[3]=be(I=>b("author_stance"),["stop"])),class:"px-2 py-1 text-purple-600 hover:bg-purple-100 rounded transition-colors"},"  ")])])):P("",!0)])])],2)]),L(ne,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 -translate-y-4","leave-active-class":"transition-all duration-200 ease-in","leave-to-class":"opacity-0 -translate-y-4"},{default:A(()=>[p("argument_structure")&&u("argument_structure")?(_(),z(R,{key:0,highlights:u("argument_structure").highlights,annotations:u("argument_structure").annotations,class:"mt-4"},null,8,["highlights","annotations"])):P("",!0)]),_:1}),L(ne,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","leave-active-class":"transition-all duration-200 ease-in","leave-to-class":"opacity-0 -translate-y-2"},{default:A(()=>[v(d)?(_(),k("div",Yd,[n("div",Xd,[C[18]||(C[18]=n("svg",{class:"w-4 h-4 text-red-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),n("div",Jd,[C[17]||(C[17]=n("p",{class:"text-xs text-red-800 font-medium"},"",-1)),n("p",Qd,T(v(d)),1),n("button",{onClick:h,class:"mt-2 px-3 py-1 bg-red-600 text-white text-xs rounded-lg hover:bg-red-700 transition-colors"},"  ")])])])):P("",!0)]),_:1}),!p("argument_structure")&&!p("author_stance")?(_(),k("div",Zd,[...C[19]||(C[19]=[n("p",{class:"text-xs text-gray-500 text-center"},"  ",-1)])])):P("",!0)])}}}),tu=Object.assign(eu,{__name:"ThinkingLensSwitcher"}),Bs=()=>{const e=fe(),t=N("meta-view-active",()=>!1),s=N("meta-analysis-data",()=>null),o=N("meta-view-analyzing",()=>!1),r=N("meta-view-error",()=>null),a=async(u,g,y,b,h,m,w="zh",x=!1)=>{o.value=!0,r.value=null;try{const $=await $fetch(`${e.public.apiBase}/api/v1/meta-analysis/analyze`,{method:"POST",body:{title:u,author:g,publish_date:y,full_text:b,user_id:h,source_url:m,language:w,force_reanalyze:x}});if(s.value=$.meta_analysis,console.log(" :",$.meta_analysis.id),$.meta_analysis.generated_title){const{title:C}=Ne();C.value=$.meta_analysis.generated_title,console.log(" AI:",$.meta_analysis.generated_title)}return $.meta_analysis}catch($){throw console.error(" :",$),r.value=$.data?.detail||$.message||"",$}finally{o.value=!1}},l=async u=>{try{const g=await $fetch(`${e.public.apiBase}/api/v1/meta-analysis/${u}`);if(g.exists&&g.meta_analysis){if(s.value=g.meta_analysis,console.log(" :",g.meta_analysis.id),g.meta_analysis.generated_title){const{title:y}=Ne();y.value=g.meta_analysis.generated_title,console.log(" AI:",g.meta_analysis.generated_title)}return!0}return!1}catch(g){return console.error(" :",g),!1}},d=()=>{t.value=!t.value},f=()=>{t.value=!1},c=()=>{t.value=!0},i=()=>{s.value=null,r.value=null},p=async(u,g,y,b,h,m,w)=>{try{await $fetch(`${e.public.apiBase}/api/v1/meta-analysis/feedback`,{method:"POST",body:{user_id:u,meta_analysis_id:y,lens_result_id:b,feedback_type:g,rating:h,comment:m,feedback_data:w}}),console.log(" ")}catch(x){throw console.error(" :",x),x}};return{isMetaViewActive:Z(t),metaAnalysisData:Z(s),isAnalyzing:Z(o),analysisError:Z(r),analyzeArticle:a,fetchMetaAnalysis:l,toggleMetaView:d,closeMetaView:f,openMetaView:c,clearMetaAnalysis:i,submitFeedback:p}},nu={key:0,class:"fixed top-0 right-0 h-full w-full md:w-[420px] bg-white/70 backdrop-blur-xl border-l border-gray-200/50 shadow-2xl overflow-y-auto z-40"},su={class:"sticky top-0 z-10 bg-white/90 backdrop-blur-xl border-b border-gray-200/50 p-6"},ou={class:"flex items-center justify-between"},ru={class:"p-6 space-y-6"},au={key:0,class:"py-12 flex flex-col items-center justify-center"},lu={key:1,class:"py-12 flex flex-col items-center justify-center"},iu={class:"text-xs text-gray-500 mb-4 text-center"},cu={class:"mt-6 p-4 bg-gray-50/50 rounded-xl border border-gray-200/50"},du={class:"space-y-1 text-sm text-gray-500"},uu={key:3,class:"py-12 flex flex-col items-center justify-center"},fu=O({__name:"MetaInfoPanel",props:{articleContent:{}},emits:["retry"],setup(e,{emit:t}){const{isMetaViewActive:s,metaAnalysisData:o,isAnalyzing:r,analysisError:a,closeMetaView:l,submitFeedback:d}=Bs(),{user:f}=gt(),c=async(u,g)=>{if(!(!f.value?.id||!o.value?.id))try{await d(f.value.id,"meta_info_card",o.value.id,void 0,g==="helpful"?5:1,void 0,{card_type:u,helpful:g==="helpful"}),console.log(" :",u,g)}catch(y){console.error(" :",y)}},i=u=>{console.log(" :",u)},p=()=>{console.log(" ")};return(u,g)=>{const y=qi,b=rc,h=$c,m=jc,w=tu;return _(),k(K,null,[L(ne,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"translate-x-0","leave-to-class":"translate-x-full"},{default:A(()=>[v(s)?(_(),k("aside",nu,[n("div",su,[n("div",ou,[g[8]||(g[8]=n("div",{class:"flex items-center gap-3"},[n("div",{class:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md"},[n("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])]),n("div",null,[n("h2",{class:"text-lg font-bold bg-gradient-to-r from-violet-600 to-purple-600 bg-clip-text text-transparent"},"  "),n("p",{class:"text-xs text-gray-500"},"Meta-View Mode")])],-1)),n("button",{onClick:g[0]||(g[0]=(...x)=>v(l)&&v(l)(...x)),class:"p-2 rounded-lg hover:bg-gray-100 transition-colors"},[...g[7]||(g[7]=[n("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),n("div",ru,[v(r)?(_(),k("div",au,[...g[9]||(g[9]=[n("div",{class:"w-16 h-16 border-4 border-violet-600 border-t-transparent rounded-full animate-spin mb-4"},null,-1),n("p",{class:"text-sm text-gray-600"},"...",-1),n("p",{class:"text-xs text-gray-500 mt-1"},"",-1)])])):v(a)?(_(),k("div",lu,[g[10]||(g[10]=n("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4"},[n("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),g[11]||(g[11]=n("p",{class:"text-sm text-gray-700 mb-2"},"",-1)),n("p",iu,T(v(a)),1),n("button",{onClick:g[1]||(g[1]=x=>u.$emit("retry")),class:"px-4 py-2 bg-violet-600 hover:bg-violet-700 text-white text-sm rounded-lg transition-colors"},"  ")])):v(o)?(_(),k(K,{key:2},[L(y,{"author-intent":v(o).author_intent,onFeedback:g[2]||(g[2]=x=>c("author_intent",x))},null,8,["author-intent"]),L(b,{"timeliness-analysis":v(o).timeliness_analysis,"timeliness-score":v(o).timeliness_score,onFeedback:g[3]||(g[3]=x=>c("timeliness",x))},null,8,["timeliness-analysis","timeliness-score"]),L(h,{"bias-analysis":v(o).bias_analysis,onFeedback:g[4]||(g[4]=x=>c("bias",x))},null,8,["bias-analysis"]),L(m,{"knowledge-gaps":v(o).knowledge_gaps,onFeedback:g[5]||(g[5]=x=>c("knowledge_gaps",x))},null,8,["knowledge-gaps"]),L(w,{"article-id":v(o).article_id,"container-element-id":"article-content-container",onLensApplied:i,onLensRemoved:p},null,8,["article-id"]),n("div",cu,[g[12]||(g[12]=n("div",{class:"flex items-center gap-2 mb-2"},[n("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),n("span",{class:"text-sm font-medium text-gray-600"},"")],-1)),n("div",du,[n("p",null,": "+T(v(o).analysis_quality.llm_model),1),n("p",null,": "+T(v(o).analysis_quality.processing_time_ms)+"ms",1),n("p",null,": "+T(Math.round(v(o).analysis_quality.confidence_score*100))+"%",1),n("p",null,": "+T(v(o).analysis_quality.prompt_version),1)])])],64)):(_(),k("div",uu,[...g[13]||(g[13]=[n("div",{class:"w-20 h-20 bg-gradient-to-br from-violet-100 to-purple-100 rounded-2xl flex items-center justify-center mb-4"},[n("svg",{class:"w-10 h-10 text-violet-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])],-1),n("p",{class:"text-sm text-gray-700 mb-1"},"",-1),n("p",{class:"text-xs text-gray-500 text-center"},"",-1)])]))])])):P("",!0)]),_:1}),L(ne,{"enter-active-class":"transition-opacity duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-300","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[v(s)?(_(),k("div",{key:0,class:"fixed inset-0 bg-black/20 backdrop-blur-sm z-30 md:hidden",onClick:g[6]||(g[6]=(...x)=>v(l)&&v(l)(...x))})):P("",!0)]),_:1})],64)}}}),pu=Object.assign(fu,{__name:"MetaInfoPanel"}),gu={key:0,class:"conversation-thread"},vu={class:"px-2 py-0.5 rounded text-xs bg-emerald-100 text-emerald-700"},mu={key:0,class:"space-y-4 overflow-hidden"},hu={class:"flex items-center gap-2 mb-1.5"},yu={class:"text-xs font-medium"},bu={key:0,class:"text-xs text-gray-400"},xu=["innerHTML"],wu={key:1,class:"text-sm text-gray-700 py-2"},_u={key:0,class:"message-item assistant"},ku={class:"message-content pl-4 border-l-2 border-emerald-300 bg-emerald-50/30"},Cu=["innerHTML"],$u=O({__name:"ConversationThread",props:{messages:{},isGenerating:{type:Boolean},currentAnswer:{}},setup(e){const t=e,s=M(!1),o=a=>{const l=new Date(a),f=new Date().getTime()-l.getTime();return f<6e4?"":f<36e5?`${Math.floor(f/6e4)} `:f<864e5?`${Math.floor(f/36e5)} `:l.toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},r=a=>a?dt(a,{breaks:!0}):"";return G(()=>t.messages.length,(a,l)=>{a>l&&(s.value=!1)}),(a,l)=>e.messages.length>0?(_(),k("div",gu,[n("button",{onClick:l[0]||(l[0]=d=>s.value=!v(s)),class:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-emerald-700 transition-colors mb-3"},[(_(),k("svg",{class:j(["w-4 h-4 transition-transform",!v(s)&&"rotate-90"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...l[1]||(l[1]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)),l[2]||(l[2]=n("span",null," ",-1)),n("span",vu,T(Math.floor(e.messages.length/2))+"  ",1)]),L(ne,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 max-h-0","enter-to-class":"opacity-100 max-h-screen","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 max-h-screen","leave-to-class":"opacity-0 max-h-0"},{default:A(()=>[v(s)?P("",!0):(_(),k("div",mu,[(_(!0),k(K,null,oe(e.messages,(d,f)=>(_(),k("div",{key:f,class:j(["message-item",d.role])},[n("div",hu,[n("span",yu,T(d.role==="user"?" ":" AI "),1),d.timestamp?(_(),k("span",bu,T(o(d.timestamp)),1)):P("",!0)]),n("div",{class:j(["message-content pl-4 border-l-2 transition-colors",[d.role==="user"?"border-blue-300 bg-blue-50/30":"border-emerald-300 bg-emerald-50/30"]])},[d.role==="assistant"?(_(),k("div",{key:0,class:"prose prose-sm max-w-none",innerHTML:r(d.content)},null,8,xu)):(_(),k("p",wu,T(d.content),1))],2)],2))),128)),e.isGenerating&&e.currentAnswer?(_(),k("div",_u,[l[4]||(l[4]=n("div",{class:"flex items-center gap-2 mb-1.5"},[n("span",{class:"text-xs font-medium"}," AI "),n("div",{class:"flex items-center gap-1 text-xs text-emerald-600"},[n("div",{class:"animate-spin h-3 w-3 border-2 border-emerald-600 border-t-transparent rounded-full"}),n("span",null,"...")])],-1)),n("div",ku,[n("div",{class:"prose prose-sm max-w-none",innerHTML:r(e.currentAnswer)},null,8,Cu),l[3]||(l[3]=n("span",{class:"inline-block w-0.5 h-4 bg-emerald-600 animate-blink ml-1 align-middle"},null,-1))])])):P("",!0)]))]),_:1})])):P("",!0)}}),Su=Object.assign($e($u,[["__scopeId","data-v-28b9a8c7"]]),{__name:"ConversationThread"}),Au={class:"follow-up-section"},Tu={class:"flex flex-wrap gap-2 mb-3"},Eu=["onClick","disabled"],Mu={class:"mr-1"},Bu={key:0,class:"flex gap-2"},Lu={class:"flex gap-2"},Pu=["disabled"],Ou=["disabled"],Iu={key:0,class:"text-xs text-gray-400 mt-2"},Ru=O({__name:"FollowUpButtons",props:{buttons:{},loading:{type:Boolean},disabled:{type:Boolean}},emits:["select"],setup(e,{emit:t}){const s=e,o=t,r=M(""),a=d=>{s.disabled||s.loading||(o("select",d.label),r.value="")},l=()=>{const d=r.value.trim();!d||s.disabled||s.loading||(o("select",d),r.value="")};return(d,f)=>(_(),k("div",Au,[f[1]||(f[1]=n("p",{class:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2"},[n("span",null,""),n("span",null,"")],-1)),n("div",Tu,[(_(!0),k(K,null,oe(e.buttons,c=>(_(),k("button",{key:c.id,onClick:i=>a(c),disabled:e.disabled||e.loading,class:j(["px-3 py-2 text-sm rounded-lg border transition-all",[e.disabled||e.loading?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-emerald-300 bg-emerald-50 hover:bg-emerald-100 hover:border-emerald-400 text-emerald-700 hover:shadow-sm active:scale-95"]])},[n("span",Mu,T(c.icon),1),n("span",null,T(c.label),1)],10,Eu))),128)),e.loading&&e.buttons.length===0?(_(),k("div",Bu,[(_(),k(K,null,oe(3,c=>n("div",{key:c,class:"px-3 py-2 rounded-lg bg-gray-100 animate-pulse",style:{width:"120px",height:"36px"}})),64))])):P("",!0)]),n("div",Lu,[me(n("input",{"onUpdate:modelValue":f[0]||(f[0]=c=>ve(r)?r.value=c:null),onKeydown:Rt(l,["enter"]),disabled:e.disabled||e.loading,placeholder:" ...",class:j(["flex-1 min-w-0 px-3 py-2 text-sm rounded-lg border border-gray-300 focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none transition-all",[e.disabled||e.loading?"bg-gray-50 text-gray-400 cursor-not-allowed":"bg-white"]])},null,42,Pu),[[pt,v(r)]]),v(r).trim()?(_(),k("button",{key:0,onClick:l,disabled:e.disabled||e.loading,class:j(["px-4 py-2 text-sm font-medium rounded-lg transition-all",[e.disabled||e.loading?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700 active:scale-95"]])},"  ",10,Ou)):P("",!0)]),e.disabled?P("",!0):(_(),k("p",Iu,"  Enter  "))]))}}),zu=Object.assign($e(Ru,[["__scopeId","data-v-1ab677ff"]]),{__name:"FollowUpButtons"}),sn="insightreader_stash",Jn=50,Sn=()=>{const e=N("stash-items",()=>[]),{title:t,content:s}=Ne(),o=p=>{const u={id:`stash_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),articleTitle:t.value,articleContent:s.value,selectedText:p.selectedText,context:p.context,intent:p.intent,customQuestion:p.customQuestion,insight:p.insight,reasoning:p.reasoning,conversationHistory:p.conversationHistory?[...p.conversationHistory]:void 0,modelUsed:p.modelUsed,tokens:p.tokens};return e.value.unshift(u),e.value.length>Jn&&(e.value=e.value.slice(0,Jn)),c(),console.log(" :",u.selectedText.substring(0,20),"..."),u},r=p=>{const u=e.value.findIndex(g=>g.id===p);if(u>-1){const g=e.value.splice(u,1)[0];c(),console.log(" :",g.selectedText.substring(0,20),"...")}},a=()=>{const p=e.value.length;e.value=[],localStorage.removeItem(sn),console.log(" :",p,"")},l=(p,u)=>{const g=e.value.splice(p,1)[0];e.value.splice(u,0,g),c()},d=(p,u)=>e.value.some(g=>g.selectedText===p&&g.insight===u),f=()=>{try{const p=localStorage.getItem(sn);p&&(e.value=JSON.parse(p),console.log(" :",e.value.length,""))}catch(p){console.error(":",p)}},c=()=>{try{localStorage.setItem(sn,JSON.stringify(e.value))}catch(p){console.error(":",p)}},i=()=>{const p=e.value.reduce((g,y)=>g+y.insight.length+(y.reasoning?.length||0),0),u=e.value.reduce((g,y)=>g+(y.conversationHistory?.length||0),0);return{count:e.value.length,totalWords:p,totalConversations:u,hasConversations:u>0,hasReasoning:e.value.some(g=>g.reasoning)}};return de(()=>{f()}),$o(()=>{e.value.length>0&&window.addEventListener("beforeunload",p=>{p.preventDefault(),p.returnValue=""})}),{stashItems:Z(e),addToStash:o,removeFromStash:r,clearStash:a,reorderStash:l,isStashed:d,getStats:i}},Ls=()=>{const e=fe();return{connect:async(s,o,r)=>{const a=`${e.public.apiBase}${s}`;try{const l=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!l.ok)throw new Error(`HTTP ${l.status}: ${l.statusText}`);const d=l.body?.getReader(),f=new TextDecoder;if(!d)throw new Error("");try{for(;;){const{done:c,value:i}=await d.read();if(c)break;const u=f.decode(i).split(`
`);for(const g of u)if(g.startsWith("data: ")){const y=g.substring(6);try{const b=JSON.parse(y);switch(b.type){case"start":r.onStart?.();break;case"delta":b.content&&r.onDelta?.(b.content);break;case"reasoning":b.content&&r.onReasoning?.(b.content);break;case"complete":r.onComplete?.(b.metadata);break;case"error":r.onError?.(b);break}}catch(b){console.error(" SSE ",b)}}}}finally{d.releaseLock()}}catch(l){throw r.onError?.({message:l instanceof Error?l.message:""}),l}}}},Hu=()=>{const e=fe(),t=N("followup-conversation",()=>[]),s=N("followup-buttons",()=>[]),o=N("followup-generating-buttons",()=>!1),r=N("followup-generating-answer",()=>!1),a=N("followup-current-answer",()=>""),l=N("followup-current-reasoning",()=>""),d=N("followup-error",()=>null),f=async(u,g,y)=>{o.value=!0,d.value=null;try{const b={selected_text:u,insight:g,intent:y,conversation_history:t.value},h=await $fetch(`${e.public.apiBase}/api/v1/insights/generate-buttons`,{method:"POST",body:b});s.value=h.buttons,console.log(" :",h.buttons.length,"")}catch(b){console.error(":",b),d.value=b instanceof Error?b.message:"",s.value=[{id:"example_default",label:"",icon:"",category:"example"},{id:"simplify_default",label:"",icon:"",category:"simplify"}]}finally{o.value=!1}},c=async(u,g,y,b=!1)=>{r.value=!0,a.value="",l.value="",d.value=null;const h={role:"user",content:y,timestamp:Date.now()};t.value.push(h);try{const{connect:m}=Ls(),w={selected_text:u,initial_insight:g,conversation_history:t.value.slice(0,-1),follow_up_question:y,use_reasoning:b};await m("/api/v1/insights/follow-up",w,{onStart:()=>{console.log(" ")},onDelta:x=>{a.value+=x},onReasoning:x=>{l.value+=x},onComplete:x=>{const $={role:"assistant",content:a.value,timestamp:Date.now()};t.value.push($),console.log(" ",{metadata:x,conversationLength:t.value.length}),r.value=!1},onError:x=>{d.value=x.message||"",r.value=!1,t.value.pop()}})}catch(m){d.value=m instanceof Error?m.message:"",r.value=!1,t.value.pop()}},i=()=>{t.value=[],s.value=[],a.value="",l.value="",d.value=null},p=()=>{t.value.length>=2&&t.value.splice(-2,2)};return{conversationHistory:Z(t),followUpButtons:Z(s),isGeneratingButtons:Z(o),isGeneratingAnswer:Z(r),currentAnswer:Z(a),currentReasoning:Z(l),error:Z(d),generateButtons:f,askFollowUp:c,clearConversation:i,undoLastQuestion:p}},ju={class:"p-6 h-full flex flex-col"},Du={class:"flex-1 overflow-auto"},qu={key:0,class:"bg-red-50 border-l-4 border-red-500 rounded-r-lg p-4 mb-4"},Nu={class:"flex items-start gap-3"},Vu={class:"text-red-700 text-sm"},Fu={key:"content"},Wu={key:0,class:"flex items-center gap-3 text-gray-700 mb-6 p-4 bg-emerald-50 rounded-xl border border-emerald-100"},Uu={key:1,class:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden"},Gu={key:0,class:"px-6 py-4 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100 flex justify-end gap-2"},Ku=["disabled"],Yu={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xu={key:1,class:"animate-spin h-4 w-4 border-2 border-amber-600 border-t-transparent rounded-full"},Ju={key:1,class:"flex items-center gap-2 text-amber-700 text-sm px-3 py-1.5 bg-amber-50 rounded-lg border border-amber-200"},Qu={key:0,class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Zu={key:1,class:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full mr-2"},e0={key:3,class:"flex items-center gap-2 text-green-700 text-sm px-3 py-1.5 bg-green-50 rounded-lg border border-green-200"},t0={class:"px-6 py-6"},n0={key:0,class:"mb-6"},s0={key:0,class:"p-4 bg-gray-50 rounded-xl border border-gray-200 mb-6 overflow-hidden"},o0={key:0,class:"flex items-center gap-2 text-gray-500 text-sm"},r0=["innerHTML"],a0={key:2,class:"inline-block w-0.5 h-5 bg-emerald-600 animate-blink ml-1 align-middle"},l0=["innerHTML"],i0={key:1,class:"inline-block w-0.5 h-5 bg-emerald-600 animate-blink ml-1 align-middle"},c0={key:2,class:"mt-6 pt-6 border-t border-gray-100"},d0={key:"empty",class:"text-center py-20 animate-fade-in"},u0=O({__name:"InsightPane",props:{insight:{},reasoning:{},isLoading:{type:Boolean},error:{},currentRequest:{},useReasoning:{type:Boolean}},setup(e){const t=e,{isAuthenticated:s}=gt(),{saveInsight:o}=Bo(),{addToStash:r,isStashed:a}=Sn(),{conversationHistory:l,followUpButtons:d,isGeneratingButtons:f,isGeneratingAnswer:c,currentAnswer:i,generateButtons:p,askFollowUp:u,clearConversation:g}=Hu(),y=M(!1),b=M(!1),h=M(!1),m=S(()=>!t.insight||!t.currentRequest?!1:a(t.currentRequest.selected_text,t.insight)),w=M(!0),x=S(()=>t.insight?dt(t.insight,{breaks:!0}):""),$=S(()=>t.reasoning?dt(t.reasoning,{breaks:!0}):"");G(()=>t.reasoning,E=>{E&&E.length>0&&(w.value=!0)}),G(()=>[t.insight,t.isLoading],([E,B],[V,F])=>{!B&&F&&E&&t.currentRequest&&p(t.currentRequest.selected_text,E,t.currentRequest.intent)}),G(()=>t.insight,(E,B)=>{E!==B&&E&&(b.value=!1,g())});const C=async()=>{if(!t.currentRequest){alert("");return}y.value=!0;const E=await o({selected_text:t.currentRequest.selected_text,context:t.currentRequest.context,intent:t.currentRequest.intent,custom_question:t.currentRequest.custom_question,insight:t.insight});y.value=!1,E.success?(b.value=!0,setTimeout(()=>{b.value=!1},3e3)):alert(E.error||"")},R=async()=>{if(!t.currentRequest||!t.insight){alert("");return}h.value=!0;try{r({selectedText:t.currentRequest.selected_text,context:t.currentRequest.context,intent:t.currentRequest.intent,customQuestion:t.currentRequest.custom_question,insight:t.insight,reasoning:t.reasoning||void 0,conversationHistory:l.value.length>0?[...l.value]:void 0}),console.log(" "),setTimeout(()=>{h.value=!1},500)}catch(E){console.error(":",E),alert(""),h.value=!1}},I=async E=>{if(!t.currentRequest||!t.insight)return;const B=N("use-reasoning",()=>!1);await u(t.currentRequest.selected_text,t.insight,E,B.value),i.value&&p(t.currentRequest.selected_text,t.insight,t.currentRequest.intent)};return(E,B)=>{const V=vn,F=Su,W=zu;return _(),k("div",ju,[B[13]||(B[13]=Ye('<div class="mb-6" data-v-0ab1ceff><div class="flex items-center gap-2 mb-2" data-v-0ab1ceff><div class="w-8 h-8 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center" data-v-0ab1ceff><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0ab1ceff><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" data-v-0ab1ceff></path></svg></div><h2 class="text-lg font-semibold text-gray-900" data-v-0ab1ceff>AI </h2></div><p class="text-sm text-gray-500" data-v-0ab1ceff></p></div>',1)),n("div",Du,[L(ne,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0"},{default:A(()=>[e.error?(_(),k("div",qu,[n("div",Nu,[B[2]||(B[2]=n("svg",{class:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),n("div",null,[B[1]||(B[1]=n("p",{class:"text-red-800 text-sm font-medium mb-1"},"",-1)),n("p",Vu,T(e.error),1)])])])):P("",!0)]),_:1}),L(ne,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 translate-y-4","enter-to-class":"opacity-100 translate-y-0",mode:"out-in"},{default:A(()=>[e.insight||e.reasoning||e.isLoading?(_(),k("div",Fu,[e.isLoading&&!e.insight&&!e.reasoning?(_(),k("div",Wu,[...B[3]||(B[3]=[n("div",{class:"relative"},[n("div",{class:"animate-spin h-5 w-5 border-2 border-emerald-600 border-t-transparent rounded-full"}),n("div",{class:"absolute inset-0 animate-ping h-5 w-5 border-2 border-emerald-400 border-t-transparent rounded-full opacity-20"})],-1),n("div",null,[n("p",{class:"text-sm font-semibold"},"AI ..."),n("p",{class:"text-xs text-gray-600 mt-0.5"},"")],-1)])])):P("",!0),e.insight||e.reasoning||e.isLoading&&e.useReasoning?(_(),k("div",Uu,[e.isLoading?P("",!0):(_(),k("div",Gu,[v(m)?(_(),k("div",Ju,[...B[5]||(B[5]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),n("span",{class:"font-medium"},"",-1)])])):(_(),k("button",{key:0,onClick:R,disabled:v(h),class:j(["px-3 py-1.5 text-sm font-medium rounded-lg transition-all flex items-center gap-1.5",[v(h)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-amber-50 text-amber-700 border border-amber-200 hover:bg-amber-100 hover:border-amber-300"]])},[v(h)?(_(),k("div",Xu)):(_(),k("svg",Yu,[...B[4]||(B[4]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"},null,-1)])])),n("span",null,T(v(h)?"...":" "),1)],10,Ku)),v(s)&&!v(b)?(_(),z(V,{key:2,variant:"outline",size:"sm",onClick:C,disabled:v(y),class:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all"},{default:A(()=>[v(y)?(_(),k("div",Zu)):(_(),k("svg",Qu,[...B[6]||(B[6]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"},null,-1)])])),X(" "+T(v(y)?"...":""),1)]),_:1},8,["disabled"])):v(s)&&v(b)?(_(),k("div",e0,[...B[7]||(B[7]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),n("span",{class:"font-medium"},"",-1)])])):P("",!0)])),n("div",t0,[e.useReasoning||e.reasoning?(_(),k("div",n0,[n("button",{onClick:B[0]||(B[0]=se=>w.value=!v(w)),class:"flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-emerald-700 transition-colors mb-3"},[(_(),k("svg",{class:j(["w-4 h-4 transition-transform",v(w)&&"rotate-90"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...B[8]||(B[8]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2)),B[9]||(B[9]=n("span",null,"",-1)),B[10]||(B[10]=n("span",{class:"px-2 py-0.5 rounded text-xs bg-emerald-100 text-emerald-700"},"",-1))]),v(w)?(_(),k("div",s0,[!e.reasoning&&e.isLoading?(_(),k("div",o0,[...B[11]||(B[11]=[n("div",{class:"animate-spin h-4 w-4 border-2 border-emerald-600 border-t-transparent rounded-full"},null,-1),n("span",null,"AI ...",-1)])])):(_(),k("div",{key:1,class:"prose prose-sm max-w-none text-gray-700",innerHTML:v($)},null,8,r0)),e.isLoading&&e.reasoning?(_(),k("span",a0)):P("",!0)])):P("",!0)])):P("",!0),n("div",{class:"prose prose-sm max-w-none",innerHTML:v(x)},null,8,l0),e.isLoading?(_(),k("span",i0)):P("",!0),!e.isLoading&&e.insight?(_(),k("div",c0,[v(l).length>0||v(c)&&v(i)?(_(),z(F,{key:0,messages:v(l),"is-generating":v(c),"current-answer":v(i),class:"mb-6"},null,8,["messages","is-generating","current-answer"])):P("",!0),L(W,{buttons:v(d),loading:v(f)||v(c),disabled:v(c),onSelect:I},null,8,["buttons","loading","disabled"])])):P("",!0)])])):P("",!0)])):(_(),k("div",d0,[...B[12]||(B[12]=[n("div",{class:"mb-6 relative"},[n("div",{class:"absolute inset-0 flex items-center justify-center"},[n("div",{class:"w-24 h-24 bg-emerald-100 rounded-full animate-pulse opacity-20"})]),n("svg",{class:"w-20 h-20 mx-auto text-emerald-500 relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})])],-1),n("h3",{class:"text-xl font-semibold text-gray-700 mb-3"},"",-1),n("p",{class:"text-gray-500 mb-2"},"",-1),n("p",{class:"text-sm text-gray-400"},"AI ",-1)])]))]),_:1})])])}}}),f0=Object.assign($e(u0,[["__scopeId","data-v-0ab1ceff"]]),{__name:"InsightPane"}),Ps=()=>{const e=[{type:"md",label:"Markdown (.md)",mimeType:"text/markdown;charset=utf-8",extension:"md"},{type:"txt",label:" (.txt)",mimeType:"text/plain;charset=utf-8",extension:"txt"}],t=f=>({explain:"",analyze:"",counter:""})[f]||f,s=f=>new Date(f).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),o=f=>{if(f.length===0)return"";const c=f[0],i=c.articleTitle||"",p=c.articleContent;let u=`# ${i}

`;return u+=` ${new Date().toLocaleString("zh-CN")}
`,u+=`  ${f.length} 

`,u+=`---

`,p&&p.trim()&&(u+=`##  

`,u+=`${p}

`,u+=`---

`),u+=`##  

`,f.forEach((g,y)=>{u+=`### ${y+1}. "${g.selectedText}"

`,u+=`- ****${t(g.intent)}
`,u+=`- ****${s(g.timestamp)}
`,g.modelUsed&&(u+=`- ****${g.modelUsed}
`),g.customQuestion&&(u+=`- ****${g.customQuestion}
`),u+=`
`,g.context&&g.context.trim()&&(u+=`****

`,u+=`> ${g.context.replace(/\n/g,`
> `)}

`),g.reasoning&&g.reasoning.trim()&&(u+=`####  

`,u+=`${g.reasoning}

`),u+=`####  

`,u+=`${g.insight}

`,g.conversationHistory&&g.conversationHistory.length>0&&(u+=`####  ${g.conversationHistory.length/2} 

`,g.conversationHistory.forEach(b=>{const h=b.role==="user"?"****":"**AI**";u+=`${h}${b.content}

`})),u+=`---

`}),u+=`
>   InsightReader  | [https://insightreader.ai](https://insightreader.ai)
`,u},r=f=>{if(f.length===0)return"";const c=f[0],i=c.articleTitle||"",p=c.articleContent;let u=`${i}
`;return u+=`${"=".repeat(i.length)}

`,u+=`${new Date().toLocaleString("zh-CN")}
`,u+=` ${f.length} 

`,u+=`${"-".repeat(60)}

`,p&&p.trim()&&(u+=`

`,u+=`${p}

`,u+=`${"-".repeat(60)}

`),u+=`

`,f.forEach((g,y)=>{u+=`${y+1}. "${g.selectedText}"

`,u+=`${t(g.intent)}
`,u+=`${s(g.timestamp)}
`,g.customQuestion&&(u+=`${g.customQuestion}
`),u+=`
`,g.context&&g.context.trim()&&(u+=`
${g.context}

`),g.reasoning&&g.reasoning.trim()&&(u+=`
${g.reasoning}

`),u+=`
${g.insight}

`,g.conversationHistory&&g.conversationHistory.length>0&&(u+=`${g.conversationHistory.length/2} 
`,g.conversationHistory.forEach(b=>{const h=b.role==="user"?"":"AI";u+=`${h}${b.content}
`}),u+=`
`),u+=`${"-".repeat(60)}

`}),u+=`
 InsightReader 
`,u},a=(f,c,i)=>{try{const u=new Blob(["\uFEFF"+f],{type:i}),g=URL.createObjectURL(u),y=document.createElement("a");y.href=g,y.download=c,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(g),console.log(" :",c)}catch(p){throw console.error(":",p),p}};return{exportFormats:e,exportInsights:(f,c="md",i)=>{if(f.length===0)throw new Error("");const p=new Date().toISOString().split("T")[0],y=`${(f[0].articleTitle||"").replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g,"_").substring(0,30)}_${p}`;let b,h,m;switch(c){case"md":b=o(f),h="text/markdown;charset=utf-8",m="md";break;case"txt":b=r(f),h="text/plain;charset=utf-8",m="txt";break;default:throw new Error("")}const w=i?`${i}.${m}`:`${y}.${m}`;a(b,w,h)},exportAsMarkdown:o,exportAsText:r,copyToClipboard:async(f,c="md")=>{try{const i=c==="md"?o(f):r(f);return await navigator.clipboard.writeText(i),console.log(" "),!0}catch(i){return console.error(":",i),!1}},getIntentLabel:t,formatTime:s}},p0={class:"px-6 py-5 space-y-5"},g0={class:"flex items-center gap-2 text-sm text-gray-600 bg-gray-50 rounded-lg p-3"},v0={class:"text-emerald-700"},m0={class:"space-y-2"},h0=["value"],y0={class:"flex-1"},b0={class:"font-medium text-gray-900"},x0={class:"text-xs text-gray-500"},w0={class:"flex items-center gap-2"},_0={class:"text-sm text-gray-500"},k0={class:"text-xs text-gray-500 mt-1"},C0={class:"space-y-2"},$0={class:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer"},S0={class:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer"},A0={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end gap-3"},T0=["disabled"],E0={key:0,class:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"},M0=O({__name:"ExportDialog",props:{show:{type:Boolean},items:{}},emits:["close","exported"],setup(e,{emit:t}){const s=e,o=t,{exportInsights:r,exportFormats:a}=Ps(),l=M("md"),d=M(""),f=M(!0),c=M(!0),i=M(!1),p=S(()=>s.items.length),u=S(()=>{const m=new Date().toISOString().split("T")[0];return`${(s.items[0]?.articleTitle||"").replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g,"_").substring(0,30)}_${m}`}),g=m=>m==="md"?"md":"txt",y=m=>({md:" NotionObsidian ",txt:""})[m],b=()=>{i.value||o("close")},h=async()=>{if(!(i.value||s.items.length===0)){i.value=!0;try{const m=s.items.map(w=>({...w,conversationHistory:f.value?w.conversationHistory:void 0,reasoning:c.value?w.reasoning:void 0}));r(m,l.value,d.value.trim()||void 0),console.log(" "),setTimeout(()=>{o("exported"),o("close"),i.value=!1},500)}catch(m){console.error(":",m),alert(""+(m instanceof Error?m.message:"")),i.value=!1}}};return G(()=>s.show,m=>{m&&(l.value="md",d.value="",f.value=!0,c.value=!0)}),(m,w)=>(_(),z(ne,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.show?(_(),k("div",{key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:be(b,["self"])},[L(ne,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:A(()=>[e.show?(_(),k("div",{key:0,class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",onClick:w[4]||(w[4]=be(()=>{},["stop"]))},[n("div",{class:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-emerald-50 to-white"},[n("div",{class:"flex items-center justify-between"},[w[6]||(w[6]=n("div",{class:"flex items-center gap-3"},[n("div",{class:"w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center"},[n("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])]),n("div",null,[n("h3",{class:"text-lg font-semibold text-gray-900"},""),n("p",{class:"text-sm text-gray-500"},"")])],-1)),n("button",{onClick:b,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...w[5]||(w[5]=[n("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),n("div",p0,[n("div",g0,[w[9]||(w[9]=n("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),n("span",null,[w[7]||(w[7]=X(" ",-1)),n("strong",v0,T(v(p)),1),w[8]||(w[8]=X(" ",-1))])]),n("div",null,[w[10]||(w[10]=n("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),n("div",m0,[(_(!0),k(K,null,oe(v(a),x=>(_(),k("label",{key:x.type,class:j(["flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-all",[v(l)===x.type?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-emerald-300 hover:bg-gray-50"]])},[me(n("input",{type:"radio",value:x.type,"onUpdate:modelValue":w[0]||(w[0]=$=>ve(l)?l.value=$:null),class:"w-4 h-4 text-emerald-600 focus:ring-emerald-500"},null,8,h0),[[So,v(l)]]),n("div",y0,[n("div",b0,T(x.label),1),n("div",x0,T(y(x.type)),1)])],2))),128))])]),n("div",null,[w[11]||(w[11]=n("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),n("div",w0,[me(n("input",{"onUpdate:modelValue":w[1]||(w[1]=x=>ve(d)?d.value=x:null),type:"text",placeholder:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none text-sm"},null,512),[[pt,v(d)]]),n("span",_0,"."+T(g(v(l))),1)]),n("p",k0," "+T(v(u))+"."+T(g(v(l))),1)]),n("div",C0,[n("label",$0,[me(n("input",{type:"checkbox","onUpdate:modelValue":w[2]||(w[2]=x=>ve(f)?f.value=x:null),class:"w-4 h-4 text-emerald-600 focus:ring-emerald-500 rounded"},null,512),[[an,v(f)]]),w[12]||(w[12]=n("span",null,"",-1))]),n("label",S0,[me(n("input",{type:"checkbox","onUpdate:modelValue":w[3]||(w[3]=x=>ve(c)?c.value=x:null),class:"w-4 h-4 text-emerald-600 focus:ring-emerald-500 rounded"},null,512),[[an,v(c)]]),w[13]||(w[13]=n("span",null,"",-1))])])]),n("div",A0,[n("button",{onClick:b,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},"  "),n("button",{onClick:h,disabled:v(i),class:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-lg hover:bg-emerald-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2"},[v(i)?(_(),k("div",E0)):P("",!0),n("span",null,T(v(i)?"...":""),1)],8,T0)])])):P("",!0)]),_:1})])):P("",!0)]),_:1}))}}),B0=Object.assign(M0,{__name:"ExportDialog"}),L0={class:"stash-panel h-full flex flex-col"},P0={class:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white"},O0={class:"flex items-center justify-between mb-3"},I0={class:"flex items-center gap-2"},R0={class:"text-lg font-semibold text-gray-900"},z0={key:0,class:"text-emerald-600"},H0={class:"flex items-center gap-2"},j0={key:0,class:"flex items-center gap-4 text-xs text-gray-600"},D0={key:0},q0={key:1},N0={class:"flex-1 overflow-auto"},V0={key:0,class:"flex flex-col items-center justify-center h-full text-center py-20 px-6"},F0={key:1,class:"p-4 space-y-3"},W0={class:"px-4 py-3 bg-gradient-to-r from-gray-50 to-white border-b border-gray-100"},U0={class:"flex items-start justify-between gap-3"},G0={class:"flex-1 min-w-0"},K0={class:"text-sm font-medium text-gray-900 truncate mb-1"},Y0={class:"flex items-center gap-3 text-xs text-gray-500"},X0={class:"flex items-center gap-1"},J0={class:"flex items-center gap-1"},Q0=["onClick"],Z0=["onClick"],ef={class:"px-4 py-3"},tf={class:"text-sm text-gray-600 line-clamp-2"},nf={key:0,class:"mt-2 flex items-center gap-1 text-xs text-emerald-600"},sf=O({__name:"StashPanel",emits:["viewItem"],setup(e,{emit:t}){const s=t,{stashItems:o,removeFromStash:r,clearStash:a,getStats:l}=Sn(),{formatTime:d,getIntentLabel:f}=Ps(),c=M(!1),i=S(()=>l()),p=(h,m)=>h.length<=m?h:h.substring(0,m)+"...",u=h=>{confirm("")&&r(h)},g=()=>{confirm(` ${i.value.count} `)&&a()},y=h=>{s("viewItem",h)},b=()=>{console.log(" ")};return(h,m)=>{const w=B0;return _(),k("div",L0,[n("div",P0,[n("div",O0,[n("div",I0,[m[3]||(m[3]=n("svg",{class:"w-5 h-5 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)),n("h3",R0,[m[2]||(m[2]=X("  ",-1)),v(i).count>0?(_(),k("span",z0,"("+T(v(i).count)+")",1)):P("",!0)])]),n("div",H0,[v(i).count>0?(_(),k("button",{key:0,onClick:m[0]||(m[0]=x=>c.value=!0),class:"px-3 py-1.5 text-sm font-medium text-emerald-700 bg-emerald-100 hover:bg-emerald-200 rounded-lg transition-colors flex items-center gap-1"},[...m[4]||(m[4]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),n("span",null,"",-1)])])):P("",!0),v(i).count>0?(_(),k("button",{key:1,onClick:g,class:"px-3 py-1.5 text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100 rounded-lg transition-colors flex items-center gap-1"},[...m[5]||(m[5]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),n("span",null,"",-1)])])):P("",!0)])]),v(i).count>0?(_(),k("div",j0,[n("span",null," "+T(v(i).totalWords)+" ",1),v(i).hasConversations?(_(),k("span",D0," "+T(v(i).totalConversations)+" ",1)):P("",!0),v(i).hasReasoning?(_(),k("span",q0," ")):P("",!0)])):P("",!0)]),n("div",N0,[v(o).length===0?(_(),k("div",V0,[...m[6]||(m[6]=[Ye('<div class="mb-6 relative" data-v-2f30ae25><div class="absolute inset-0 flex items-center justify-center" data-v-2f30ae25><div class="w-24 h-24 bg-gray-100 rounded-full animate-pulse opacity-20" data-v-2f30ae25></div></div><svg class="w-20 h-20 mx-auto text-gray-300 relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2f30ae25><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4" data-v-2f30ae25></path></svg></div><h3 class="text-lg font-semibold text-gray-700 mb-2" data-v-2f30ae25></h3><p class="text-sm text-gray-500 mb-1" data-v-2f30ae25>&quot;&quot;</p><p class="text-xs text-gray-400" data-v-2f30ae25></p>',4)])])):(_(),k("div",F0,[(_(!0),k(K,null,oe(v(o),(x,$)=>(_(),k("div",{key:x.id,class:"stash-item bg-white rounded-xl border border-gray-200 hover:border-emerald-300 hover:shadow-md transition-all overflow-hidden"},[n("div",W0,[n("div",U0,[n("div",G0,[n("h4",K0,T($+1)+'. "'+T(p(x.selectedText,40))+'" ',1),n("div",Y0,[n("span",X0,[m[7]||(m[7]=n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),X(" "+T(v(d)(x.timestamp)),1)]),n("span",null,T(v(f)(x.intent)),1),n("span",null,T(x.insight.length)+" ",1)])]),n("div",J0,[n("button",{onClick:C=>y(x),class:"p-1.5 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded transition-colors",title:""},[...m[8]||(m[8]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Q0),n("button",{onClick:C=>u(x.id),class:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:""},[...m[9]||(m[9]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Z0)])])]),n("div",ef,[n("p",tf,T(p(x.insight,100)),1),x.conversationHistory&&x.conversationHistory.length>0?(_(),k("div",nf,[m[10]||(m[10]=n("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),n("span",null," "+T(x.conversationHistory.length/2)+" ",1)])):P("",!0)])]))),128))]))]),L(w,{show:v(c),items:v(o),onClose:m[1]||(m[1]=x=>c.value=!1),onExported:b},null,8,["show","items"])])}}}),of=Object.assign($e(sf,[["__scopeId","data-v-2f30ae25"]]),{__name:"StashPanel"}),rf={class:"flex h-[calc(100vh-64px)]"},af={class:"flex-1 overflow-auto relative"},lf={class:"w-px bg-gradient-to-b from-transparent via-gray-200 to-transparent shadow-sm"},cf={class:"w-[580px] overflow-auto relative bg-gradient-to-br from-white via-slate-50/30 to-white"},df={class:"relative z-10"},uf=O({__name:"ReaderLayout",setup(e,{expose:t}){const s=M(!1);return t({togglePanel:()=>{s.value=!s.value}}),(r,a)=>(_(),k("div",rf,[n("div",af,[a[0]||(a[0]=n("div",{class:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl pointer-events-none"},null,-1)),D(r.$slots,"left",{},void 0,!0)]),me(n("div",lf,null,512),[[Et,v(s)]]),L(ne,{name:"slide-fade"},{default:A(()=>[me(n("div",cf,[a[1]||(a[1]=n("div",{class:"absolute inset-0 bg-[radial-gradient(#e5e7eb_0.5px,transparent_0.5px)] [background-size:12px_12px] opacity-20 pointer-events-none"},null,-1)),n("div",df,[D(r.$slots,"right",{},void 0,!0)])],512),[[Et,v(s)]])]),_:3})]))}}),ff=Object.assign($e(uf,[["__scopeId","data-v-196a4ca1"]]),{__name:"ReaderLayout"}),pf=O({__name:"SelectionTrigger",props:{show:{type:Boolean},position:{}},emits:["click","close"],setup(e,{emit:t}){const s=e,o=t,r=S(()=>{if(!s.show)return{};const d=48,f=8;let c=s.position.x,i=s.position.y;return{left:`${c+f}px`,top:`${i-d-f}px`}}),a=()=>{o("click")},l=()=>{o("close")};return(d,f)=>(_(),k(K,null,[L(ne,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.show?(_(),k("div",{key:0,class:"fixed inset-0 z-40",onClick:l})):P("",!0)]),_:1}),L(ne,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 scale-90","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-90"},{default:A(()=>[e.show?(_(),k("button",{key:0,style:ce(v(r)),onClick:be(a,["stop"]),class:"fixed z-50 w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 rounded-full shadow-lg hover:shadow-xl flex items-center justify-center transition-all group",title:"AI "},[...f[0]||(f[0]=[n("svg",{class:"w-6 h-6 text-white group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),n("span",{class:"absolute inset-0 rounded-full bg-emerald-400 opacity-75 animate-ping"},null,-1)])],4)):P("",!0)]),_:1})],64))}}),gf=Object.assign($e(pf,[["__scopeId","data-v-583b2f40"]]),{__name:"SelectionTrigger"}),vf={class:"px-4 py-3 bg-gradient-to-r from-slate-50 to-zinc-50 border-b border-gray-200 flex items-start justify-between gap-2"},mf={class:"flex items-start space-x-2 flex-1 min-w-0"},hf={class:"text-sm text-gray-700 line-clamp-2 leading-relaxed"},yf={class:"p-4 space-y-2"},bf=["onClick"],xf={class:"flex-1"},wf={class:"font-medium text-gray-900 group-hover:text-emerald-700 transition-colors"},_f={class:"text-xs text-gray-500 mt-0.5"},kf={class:"px-4 pb-3 border-b border-gray-100"},Cf={class:"flex items-center justify-between cursor-pointer group"},$f={class:"relative"},Sf={class:"px-4 pb-4"},Af={class:"pt-3 border-t border-gray-100"},Tf={class:"relative"},Ef={key:0,class:"absolute left-1/2 transform -translate-x-1/2 -bottom-2"},Mf={key:1,class:"absolute left-1/2 transform -translate-x-1/2 -top-2"},Bf=O({__name:"IntentButtons",props:{show:{type:Boolean},position:{},selectedText:{}},emits:["select","close"],setup(e,{emit:t}){const s=e,o=t,r=M(""),a=M(null),l=M(null),d=M(!1),f=M(!1),c=S(()=>{if(!s.show)return{};const y=window.innerHeight,b=window.innerWidth,h=450,m=384,w=20,x=16;let $=s.position.x,C=s.position.y;const R=y-C,I=C;R<h+w&&I>R?(f.value=!0,C=C-h-x):(f.value=!1,C=C+x);let E=$;const B=m/2;return E-B<w?E=B+w:E+B>b-w&&(E=b-B-w),C<w?C=w:C+h>y-w&&(C=y-h-w),{left:`${E}px`,top:`${C}px`,transform:"translateX(-50%)"}}),i=[{type:"explain",label:"",description:"",color:"bg-emerald-100 text-emerald-600",icon:O({template:`
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      `})},{type:"analyze",label:"",description:"",color:"bg-teal-100 text-teal-600",icon:O({template:`
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
        </svg>
      `})},{type:"counter",label:"",description:"",color:"bg-slate-100 text-slate-600",icon:O({template:`
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
        </svg>
      `})}],p=y=>{o("select",y,void 0,d.value),r.value=""},u=()=>{r.value.trim()&&(o("select","custom",r.value,d.value),r.value="")},g=()=>{o("close"),r.value=""};return G(()=>s.show,y=>{y&&Re(()=>{})}),(y,b)=>{const h=vn,m=Mt,w=Bt;return _(),k(K,null,[L(ne,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.show?(_(),k("div",{key:0,class:"fixed inset-0 z-40",onClick:g})):P("",!0)]),_:1}),L(ne,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 scale-95 translate-y-2","enter-to-class":"opacity-100 scale-100 translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:A(()=>[e.show?(_(),k("div",{key:0,ref_key:"popupRef",ref:l,style:ce(v(c)),class:"fixed z-50"},[L(w,{class:"w-96 shadow-2xl border-0 overflow-hidden backdrop-blur-md bg-white/95"},{default:A(()=>[L(m,{class:"p-0"},{default:A(()=>[n("div",vf,[n("div",mf,[b[2]||(b[2]=n("svg",{class:"w-4 h-4 text-emerald-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)),n("p",hf,' "'+T(e.selectedText)+'" ',1)]),n("button",{onClick:g,class:"flex-shrink-0 w-6 h-6 rounded-full hover:bg-white/60 flex items-center justify-center transition-colors group",title:" (Esc)"},[...b[3]||(b[3]=[n("svg",{class:"w-4 h-4 text-gray-500 group-hover:text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),n("div",yf,[(_(),k(K,null,oe(i,x=>n("button",{key:x.type,onClick:$=>p(x.type),class:"group w-full flex items-center space-x-3 px-4 py-3 text-left rounded-xl hover:bg-gradient-to-r hover:from-slate-50 hover:to-zinc-50 transition-all duration-200 border border-transparent hover:border-gray-200 hover:shadow-sm"},[n("div",{class:j(["w-10 h-10 rounded-lg flex items-center justify-center transition-all",x.color])},[(_(),z(gn(x.icon),{class:"w-5 h-5"}))],2),n("div",xf,[n("div",wf,T(x.label),1),n("div",_f,T(x.description),1)]),b[4]||(b[4]=n("svg",{class:"w-4 h-4 text-gray-400 group-hover:text-emerald-600 opacity-0 group-hover:opacity-100 transition-all transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,bf)),64))]),n("div",kf,[n("label",Cf,[b[6]||(b[6]=n("div",{class:"flex items-center space-x-2"},[n("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),n("div",null,[n("span",{class:"text-sm font-medium text-gray-700"},""),n("p",{class:"text-xs text-gray-500"},"AI")])],-1)),n("div",$f,[me(n("input",{"onUpdate:modelValue":b[0]||(b[0]=x=>ve(d)?d.value=x:null),type:"checkbox",class:"sr-only peer"},null,512),[[an,v(d)]]),b[5]||(b[5]=n("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])])]),n("div",Sf,[n("div",Af,[n("form",{onSubmit:be(u,["prevent"]),class:"space-y-2"},[n("div",Tf,[me(n("input",{ref_key:"customInput",ref:a,"onUpdate:modelValue":b[1]||(b[1]=x=>ve(r)?r.value=x:null),type:"text",placeholder:"...",class:"w-full pl-10 pr-4 py-2.5 text-sm border-2 border-gray-200 rounded-lg focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 transition-all",onKeydown:Rt(g,["esc"])},null,544),[[pt,v(r)]]),b[7]||(b[7]=n("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1))]),L(h,{type:"submit",disabled:!v(r).trim(),class:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white shadow-md hover:shadow-lg transition-all",size:"sm"},{default:A(()=>[...b[8]||(b[8]=[n("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),X("  ",-1)])]),_:1},8,["disabled"])],32)])]),b[9]||(b[9]=n("div",{class:"px-4 pb-3 flex items-center justify-between text-xs text-gray-400"},[n("span",null,[X(": "),n("kbd",{class:"px-1.5 py-0.5 bg-gray-100 rounded"},"Esc"),X(" ")]),n("span",{class:"flex items-center space-x-1"},[n("span",{class:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"}),n("span",null,"AI ")])],-1))]),_:1})]),_:1}),v(f)?(_(),k("div",Ef,[...b[10]||(b[10]=[n("div",{class:"w-4 h-4 bg-white rotate-45 border-r border-b border-gray-200"},null,-1)])])):(_(),k("div",Mf,[...b[11]||(b[11]=[n("div",{class:"w-4 h-4 bg-white rotate-45 border-l border-t border-gray-200"},null,-1)])]))],4)):P("",!0)]),_:1})],64)}}}),Lf=Object.assign($e(Bf,[["__scopeId","data-v-bb2f57ef"]]),{__name:"IntentButtons"}),on="insightreader_history",Qn=100,An=()=>{const e=N("history",()=>[]),t=()=>{try{const c=localStorage.getItem(on);c&&(e.value=JSON.parse(c))}catch(c){console.error(":",c)}},s=()=>{try{localStorage.setItem(on,JSON.stringify(e.value))}catch(c){console.error(":",c)}},o=c=>{const i={...c,id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return e.value.unshift(i),e.value.length>Qn&&(e.value=e.value.slice(0,Qn)),s(),i},r=c=>{e.value=e.value.filter(i=>i.id!==c),s()},a=()=>{e.value=[],localStorage.removeItem(on)},l=c=>{const i=c.toLowerCase();return e.value.filter(p=>p.selectedText.toLowerCase().includes(i)||p.insight.toLowerCase().includes(i)||p.articleTitle?.toLowerCase().includes(i))},d=c=>e.value.filter(i=>i.intent===c),f=(c=10)=>e.value.slice(0,c);return de(()=>{t()}),{history:Z(e),addHistoryItem:o,deleteHistoryItem:r,clearHistory:a,searchHistory:l,filterByIntent:d,getRecentHistory:f}},Pf={key:0,class:"fixed inset-y-0 right-0 w-96 bg-white shadow-2xl z-50 flex flex-col"},Of={class:"p-4 border-b flex items-center justify-between"},If={class:"flex items-center gap-2"},Rf={class:"p-4 border-b"},zf={class:"flex-1 overflow-y-auto p-4 space-y-3"},Hf={key:0,class:"text-center text-gray-400 mt-10"},jf={class:"text-sm"},Df={class:"flex items-center justify-between mb-2 text-xs text-gray-500"},qf={class:"px-2 py-0.5 bg-blue-50 text-blue-600 rounded"},Nf={class:"text-sm font-medium text-gray-900 mb-2 line-clamp-2"},Vf={class:"text-xs text-gray-600 line-clamp-2"},Ff={key:0,class:"text-xs text-gray-400 mt-2"},Wf=O({__name:"HistoryPanel",props:{isOpen:{type:Boolean}},emits:["select","close"],setup(e,{emit:t}){const{history:s,deleteHistoryItem:o,clearHistory:r,searchHistory:a}=An(),l=M(""),d=t,f=S(()=>l.value?a(l.value):s.value),c=g=>{const y=new Date(g),h=new Date().getTime()-y.getTime();return h<6e4?"":h<36e5?`${Math.floor(h/6e4)}`:h<864e5?`${Math.floor(h/36e5)}`:h<6048e5?`${Math.floor(h/864e5)}`:y.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},i=g=>({explain:"",analyze:"",counter:""})[g]||g,p=g=>{d("select",g),d("close")},u=()=>{confirm("")&&r()};return(g,y)=>{const b=vn,h=Mt,m=Bt;return _(),k("div",null,[L(ne,{name:"slide"},{default:A(()=>[e.isOpen?(_(),k("div",Pf,[n("div",Of,[y[5]||(y[5]=n("h2",{class:"text-lg font-semibold"},"",-1)),n("div",If,[v(s).length>0?(_(),z(b,{key:0,variant:"ghost",size:"sm",onClick:u},{default:A(()=>[...y[3]||(y[3]=[X("  ",-1)])]),_:1})):P("",!0),L(b,{variant:"ghost",size:"sm",onClick:y[0]||(y[0]=w=>d("close"))},{default:A(()=>[...y[4]||(y[4]=[n("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),_:1})])]),n("div",Rf,[me(n("input",{"onUpdate:modelValue":y[1]||(y[1]=w=>ve(l)?l.value=w:null),type:"text",placeholder:"...",class:"w-full px-3 py-2 text-sm border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[pt,v(l)]])]),n("div",zf,[v(f).length===0?(_(),k("div",Hf,[y[6]||(y[6]=n("svg",{class:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),n("p",jf,T(v(l)?"":""),1)])):P("",!0),(_(!0),k(K,null,oe(v(f),w=>(_(),z(m,{key:w.id,class:"cursor-pointer hover:shadow-md transition-shadow",onClick:x=>p(w)},{default:A(()=>[L(h,{class:"p-3"},{default:A(()=>[n("div",Df,[n("span",null,T(c(w.timestamp)),1),n("span",qf,T(i(w.intent)),1)]),n("p",Nf,' "'+T(w.selectedText)+'" ',1),n("p",Vf,T(w.insight.substring(0,100))+T(w.insight.length>100?"...":""),1),w.articleTitle?(_(),k("p",Ff," : "+T(w.articleTitle),1)):P("",!0),L(b,{variant:"ghost",size:"sm",class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:be(x=>v(o)(w.id),["stop"])},{default:A(()=>[...y[7]||(y[7]=[n("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])])):P("",!0)]),_:1}),L(ne,{name:"fade"},{default:A(()=>[e.isOpen?(_(),k("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-30 z-40",onClick:y[2]||(y[2]=w=>d("close"))})):P("",!0)]),_:1})])}}}),Uf=Object.assign($e(Wf,[["__scopeId","data-v-2afdc87c"]]),{__name:"HistoryPanel"}),kt=O({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(e,{emit:t}){const r=Dt(e,t);return(a,l)=>(_(),z(v(bl),zt(Ht(v(r))),{default:A(()=>[D(a.$slots,"default")]),_:3},16))}}),Ct=O({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},class:{}},emits:["escapeKeyDown","pointerDownOutside"],setup(e,{emit:t}){const s=e,o=t,r=yt(s,"class"),a=Dt(r,o);return(l,d)=>(_(),z(v(Sl),null,{default:A(()=>[L(v(Cl),J({...v(a),...l.$attrs},{class:v(Me)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s.class)}),{default:A(()=>[D(l.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Gf=O({__name:"TooltipProvider",props:{delayDuration:{},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(e){const t=e;return(s,o)=>(_(),z(v(ml),zt(Ht(t)),{default:A(()=>[D(s.$slots,"default")]),_:3},16))}}),$t=O({__name:"TooltipTrigger",props:{reference:{},asChild:{type:Boolean},as:{}},setup(e){const t=e;return(s,o)=>(_(),z(v(Tl),zt(Ht(t)),{default:A(()=>[D(s.$slots,"default")]),_:3},16))}}),Kf={key:0,class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Yf={key:1,class:"w-5 h-5 text-white animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xf={key:2,class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Jf={class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-medium"},Qf={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center font-medium"},Zf={key:0,class:"px-4 py-2 bg-violet-600 text-white text-sm rounded-lg shadow-lg"},ep={key:0,class:"absolute bottom-6 right-6 w-3 h-3 bg-emerald-500/50 rounded-full animate-pulse pointer-events-none"},tp=O({__name:"FloatingActions",props:{isInsightPanelExpanded:{type:Boolean},insightCount:{},isReplayMode:{type:Boolean},historyCount:{},isMetaViewActive:{type:Boolean},isMetaAnalyzing:{type:Boolean}},emits:["toggle-insight-panel","toggle-replay","open-history","toggle-meta-view"],setup(e){const t=M(!1);return(s,o)=>(_(),z(v(Gf),null,{default:A(()=>[n("div",{onMouseenter:o[4]||(o[4]=r=>t.value=!0),onMouseleave:o[5]||(o[5]=r=>t.value=!1),class:"fixed bottom-0 right-0 w-32 h-32 z-40 pointer-events-auto"},[n("div",{class:j(["absolute bottom-6 right-6 flex flex-col gap-3 transition-all duration-300",v(t)?"opacity-100 translate-x-0":"opacity-0 translate-x-8 pointer-events-none"])},[L(v(kt),null,{default:A(()=>[L(v($t),{"as-child":""},{default:A(()=>[n("button",{onClick:o[0]||(o[0]=r=>s.$emit("toggle-insight-panel")),class:"p-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all duration-200"},[(_(),k("svg",{class:j(["w-5 h-5 transition-transform duration-200",{"rotate-180":!e.isInsightPanelExpanded}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...o[6]||(o[6]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"},null,-1)])],2))])]),_:1}),L(v(Ct),{side:"left",class:"bg-gray-900 text-white border-gray-900"},{default:A(()=>[X(T(e.isInsightPanelExpanded?"AI":"AI"),1)]),_:1})]),_:1}),L(v(kt),null,{default:A(()=>[L(v($t),{"as-child":""},{default:A(()=>[n("button",{onClick:o[1]||(o[1]=r=>s.$emit("toggle-meta-view")),class:j(["p-3 rounded-full shadow-lg transition-all duration-300","bg-gradient-to-br from-violet-500/80 to-purple-600/80 backdrop-blur-md","hover:from-violet-600 hover:to-purple-700 hover:shadow-xl hover:scale-110",e.isMetaViewActive?"opacity-100":"opacity-40 hover:opacity-100"])},[!e.isMetaAnalyzing&&!e.isMetaViewActive?(_(),k("svg",Kf,[...o[7]||(o[7]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])])):e.isMetaAnalyzing?(_(),k("svg",Yf,[...o[8]||(o[8]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(_(),k("svg",Xf,[...o[9]||(o[9]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],2)]),_:1}),L(v(Ct),{side:"left",class:"bg-gray-900 text-white border-gray-900"},{default:A(()=>[X(T(e.isMetaViewActive?"":""),1)]),_:1})]),_:1}),L(ne,{"enter-active-class":"transition-all duration-300","enter-from-class":"opacity-0 scale-90","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition-all duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-90"},{default:A(()=>[e.insightCount>0?(_(),z(v(kt),{key:0},{default:A(()=>[L(v($t),{"as-child":""},{default:A(()=>[n("button",{onClick:o[2]||(o[2]=r=>s.$emit("toggle-replay")),class:j(["relative p-3 rounded-full shadow-lg transition-all duration-300 hover:scale-110",e.isReplayMode?"bg-gradient-to-r from-orange-500 to-amber-600 text-white":"bg-white text-orange-600 hover:bg-orange-50"])},[o[10]||(o[10]=n("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})],-1)),n("span",Jf,T(e.insightCount),1)],2)]),_:1}),L(v(Ct),{side:"left",class:"bg-gray-900 text-white border-gray-900"},{default:A(()=>[X(T(e.isReplayMode?"":""),1)]),_:1})]),_:1})):P("",!0)]),_:1}),L(v(kt),null,{default:A(()=>[L(v($t),{"as-child":""},{default:A(()=>[n("button",{onClick:o[3]||(o[3]=r=>s.$emit("open-history")),class:"relative p-3 bg-white border border-gray-300 hover:border-gray-400 rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all duration-200 text-gray-700"},[o[11]||(o[11]=n("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e.historyCount>0?(_(),k("span",Qf,T(e.historyCount),1)):P("",!0)])]),_:1}),L(v(Ct),{side:"left",class:"bg-gray-900 text-white border-gray-900"},{default:A(()=>[...o[12]||(o[12]=[X("  ",-1)])]),_:1})]),_:1}),L(ne,{"enter-active-class":"transition-all duration-200","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.isMetaAnalyzing?(_(),k("div",Zf,[...o[13]||(o[13]=[n("div",{class:"flex items-center gap-2"},[n("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n("span",null,"...")],-1)])])):P("",!0)]),_:1})],2),!v(t)&&!e.isMetaAnalyzing?(_(),k("div",ep)):P("",!0)],32)]),_:1}))}}),np=Object.assign(tp,{__name:"FloatingActions"}),sp={class:"p-6 border-b border-gray-200 bg-gradient-to-r from-orange-50 to-amber-50"},op={class:"flex items-center justify-between"},rp={class:"flex items-center gap-3"},ap={class:"text-xs text-gray-500"},lp={class:"p-6 overflow-y-auto max-h-[calc(80vh-100px)] space-y-4"},ip={class:"p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg"},cp={class:"text-gray-800 leading-relaxed"},dp={key:0},up={class:"p-4 bg-blue-50 rounded-lg"},fp={class:"text-gray-800"},pp={key:1},gp={class:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-100 rounded-full"},vp={class:"text-sm text-gray-700"},mp={class:"p-4 bg-gradient-to-br from-emerald-50 to-teal-50 rounded-lg"},hp={class:"text-gray-800 leading-relaxed whitespace-pre-wrap"},yp={key:2},bp={class:"p-4 bg-purple-50 rounded-lg"},xp={class:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap"},wp=O({__name:"InsightHistoryModal",props:{selectedItem:{}},emits:["close","continueChat"],setup(e,{emit:t}){const s=e,o=t,r=()=>{o("close")},a=()=>{s.selectedItem&&o("continueChat",s.selectedItem)},l=f=>new Date(f).toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=f=>({explain:"",summarize:"",question:"",expand:"",analyze:""})[f]||f;return(f,c)=>(_(),z(ne,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.selectedItem?(_(),k("div",{key:0,class:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r},[n("div",{class:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",onClick:c[0]||(c[0]=be(()=>{},["stop"]))},[n("div",sp,[n("div",op,[n("div",rp,[c[2]||(c[2]=n("div",{class:"w-10 h-10 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl flex items-center justify-center"},[n("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})])],-1)),n("div",null,[c[1]||(c[1]=n("h3",{class:"text-lg font-bold text-gray-900"},"",-1)),n("p",ap,T(l(e.selectedItem.created_at)),1)])]),n("button",{onClick:r,class:"p-2 rounded-lg hover:bg-white/50 transition-colors"},[...c[3]||(c[3]=[n("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),n("div",lp,[n("div",null,[c[4]||(c[4]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," ",-1)),n("div",ip,[n("p",cp,T(e.selectedItem.selected_text),1)])]),e.selectedItem.question?(_(),k("div",dp,[c[5]||(c[5]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," ",-1)),n("div",up,[n("p",fp,T(e.selectedItem.question),1)])])):(_(),k("div",pp,[c[6]||(c[6]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," ",-1)),n("div",gp,[n("span",vp,T(d(e.selectedItem.intent)),1)])])),n("div",null,[c[7]||(c[7]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," AI ",-1)),n("div",mp,[n("p",hp,T(e.selectedItem.insight),1)])]),e.selectedItem.reasoning?(_(),k("div",yp,[c[8]||(c[8]=n("div",{class:"text-xs font-medium text-gray-500 mb-2"}," ",-1)),n("div",bp,[n("p",xp,T(e.selectedItem.reasoning),1)])])):P("",!0)]),n("div",{class:"p-6 border-t border-gray-200 bg-gray-50 flex items-center justify-between"},[n("button",{onClick:r,class:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors"},"  "),n("button",{onClick:a,class:"px-6 py-2 bg-gradient-to-r from-orange-500 to-amber-600 text-white text-sm rounded-lg hover:from-orange-600 hover:to-amber-700 transition-all shadow-md flex items-center gap-2"},[...c[9]||(c[9]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),X("  ",-1)])])])])])):P("",!0)]),_:1}))}}),_p=Object.assign(wp,{__name:"InsightHistoryModal"}),St=M({auto_basic_analysis:!0,auto_meta_analysis:!1,auto_argument_lens:!1,auto_stance_lens:!1}),it=M(!1),ct=M(null);function kp(){async function e(o){it.value=!0,ct.value=null;try{const r=fe(),a=await $fetch(`${r.public.apiBase}/api/v1/preferences/analysis/${o}`);return St.value=a,a}catch(r){throw ct.value=r instanceof Error?r.message:"",console.error(":",r),r}finally{it.value=!1}}async function t(o,r){it.value=!0,ct.value=null;try{const a=fe(),l=await $fetch(`${a.public.apiBase}/api/v1/preferences/analysis/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:r});return St.value=l,l}catch(a){throw ct.value=a instanceof Error?a.message:"",console.error(":",a),a}finally{it.value=!1}}async function s(o,r){const a=!St.value[r];await t(o,{[r]:a})}return{preferences:St,isLoading:it,error:ct,fetchPreferences:e,updatePreferences:t,togglePreference:s}}const At=O({__name:"Switch",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null]},disabled:{type:Boolean},id:{},value:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=t,r=yt(s,"class"),a=Dt(r,o);return(l,d)=>(_(),z(v(ul),J(v(a),{class:v(Me)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s.class)}),{default:A(()=>[L(v(pl),{class:j(v(Me)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5"))},{default:A(()=>[D(l.$slots,"thumb")]),_:3},8,["class"])]),_:3},16,["class"]))}}),Cp={class:"p-6 space-y-4"},$p={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},Sp={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},Ap={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},Tp={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},Ep=O({__name:"AnalysisSettingsModal",props:{isOpen:{type:Boolean},userId:{}},emits:["close","preferencesUpdated"],setup(e,{emit:t}){const s=e,o=t,r=M({auto_basic_analysis:!0,auto_meta_analysis:!1,auto_argument_lens:!1,auto_stance_lens:!1}),a=M(!1),l=M(!1);G(()=>s.isOpen,async c=>{if(c&&s.userId){a.value=!0,l.value=!1;try{const i=fe(),p=await $fetch(`${i.public.apiBase}/api/v1/preferences/analysis/${s.userId}`);r.value=p,l.value=!0,console.log(" :",p)}catch(i){console.error(":",i)}finally{a.value=!1}}});const d=()=>{o("close")},f=async(c,i)=>{try{a.value=!0;const p=fe(),u=await $fetch(`${p.public.apiBase}/api/v1/preferences/analysis/${s.userId}`,{method:"PUT",body:{[c]:i}});r.value=u,o("preferencesUpdated",u),console.log(" :",c,"=",i)}catch(p){console.error(":",p);try{const u=fe(),g=await $fetch(`${u.public.apiBase}/api/v1/preferences/analysis/${s.userId}`);r.value=g}catch(u){console.error(":",u)}}finally{a.value=!1}};return(c,i)=>(_(),z(ne,{"enter-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.isOpen?(_(),k("div",{key:0,class:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:d},[n("div",{class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",onClick:i[4]||(i[4]=be(()=>{},["stop"]))},[n("div",{class:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50"},[n("div",{class:"flex items-center justify-between"},[i[6]||(i[6]=n("div",{class:"flex items-center gap-3"},[n("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center"},[n("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])]),n("div",null,[n("h3",{class:"text-lg font-bold text-gray-900"},""),n("p",{class:"text-xs text-gray-500"},"")])],-1)),n("button",{onClick:d,class:"p-2 rounded-lg hover:bg-white/50 transition-colors"},[...i[5]||(i[5]=[n("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),n("div",Cp,[i[11]||(i[11]=n("p",{class:"text-sm text-gray-600 mb-4"},"  ",-1)),n("div",$p,[i[7]||(i[7]=n("div",{class:"flex-1"},[n("div",{class:"flex items-center gap-2 mb-1"},[n("svg",{class:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),n("span",{class:"font-medium text-gray-900"},"")]),n("p",{class:"text-xs text-gray-500"},"")],-1)),L(At,{"model-value":v(r).auto_basic_analysis,"onUpdate:modelValue":i[0]||(i[0]=p=>f("auto_basic_analysis",p)),disabled:v(a)},null,8,["model-value","disabled"])]),n("div",Sp,[i[8]||(i[8]=n("div",{class:"flex-1"},[n("div",{class:"flex items-center gap-2 mb-1"},[n("svg",{class:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]),n("span",{class:"font-medium text-gray-900"},"")]),n("p",{class:"text-xs text-gray-500"},"")],-1)),L(At,{"model-value":v(r).auto_meta_analysis,"onUpdate:modelValue":i[1]||(i[1]=p=>f("auto_meta_analysis",p)),disabled:v(a)},null,8,["model-value","disabled"])]),n("div",Ap,[i[9]||(i[9]=n("div",{class:"flex-1"},[n("div",{class:"flex items-center gap-2 mb-1"},[n("svg",{class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})]),n("span",{class:"font-medium text-gray-900"},"")]),n("p",{class:"text-xs text-gray-500"},"")],-1)),L(At,{"model-value":v(r).auto_argument_lens,"onUpdate:modelValue":i[2]||(i[2]=p=>f("auto_argument_lens",p)),disabled:v(a)},null,8,["model-value","disabled"])]),n("div",Tp,[i[10]||(i[10]=n("div",{class:"flex-1"},[n("div",{class:"flex items-center gap-2 mb-1"},[n("svg",{class:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})]),n("span",{class:"font-medium text-gray-900"},"")]),n("p",{class:"text-xs text-gray-500"},"")],-1)),L(At,{"model-value":v(r).auto_stance_lens,"onUpdate:modelValue":i[3]||(i[3]=p=>f("auto_stance_lens",p)),disabled:v(a)},null,8,["model-value","disabled"])]),i[12]||(i[12]=n("div",{class:"mt-6 p-3 bg-blue-50 border-l-4 border-blue-500 rounded"},[n("div",{class:"flex items-start gap-2"},[n("svg",{class:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),n("p",{class:"text-xs text-blue-700"},"  ")])],-1))]),n("div",{class:"p-6 border-t border-gray-200 bg-gray-50 flex items-center justify-end gap-3"},[n("button",{onClick:d,class:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white text-sm rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-md"},"  ")])])])):P("",!0)]),_:1}))}}),Mp=Object.assign(Ep,{__name:"AnalysisSettingsModal"}),Os=()=>{const e=N("is-generating",()=>!1),t=N("current-insight",()=>""),s=N("current-reasoning",()=>""),o=N("insight-error",()=>null),{addHistoryItem:r}=An(),{title:a,content:l}=Ne(),{selectedStart:d,selectedEnd:f}=Xt(),{user:c}=gt(),i=N("current-article-id",()=>null),p=fe();return{isGenerating:e,currentInsight:t,currentReasoning:s,error:o,generate:async y=>{e.value=!0,t.value="",s.value="",o.value=null;try{const{connect:b}=Ls();await b("/api/v1/insights/generate",y,{onStart:()=>{t.value="",s.value="",console.log(" :",y.use_reasoning)},onDelta:h=>{t.value+=h,console.log(" :",h.substring(0,50))},onReasoning:h=>{s.value+=h,console.log(" :",h.substring(0,50))},onComplete:async h=>{if(e.value=!1,console.log(" ",{metadata:h,hasReasoning:!!s.value,reasoningLength:s.value.length}),t.value&&r({selectedText:y.selected_text,context:y.context,intent:y.intent,customQuestion:y.custom_question,insight:t.value,articleTitle:a.value}),t.value&&c.value?.id&&i.value)try{const m=l.value,w=d.value||0,x=f.value||0,$=w>0?m.substring(Math.max(0,w-100),w):"",C=x<m.length?m.substring(x,Math.min(m.length,x+100)):"";await $fetch(`${p.public.apiBase}/api/v1/insights/history`,{method:"POST",body:{article_id:i.value,user_id:c.value.id,selected_text:y.selected_text,selected_start:d.value,selected_end:f.value,context_before:$,context_after:C,intent:y.intent,question:y.custom_question||null,insight:t.value,reasoning:s.value||null}}),console.log(" ")}catch(m){console.error(" :",m)}},onError:h=>{o.value=h.message||"",e.value=!1,console.error(" :",h)}})}catch(b){o.value=b instanceof Error?b.message:"",e.value=!1}},clear:()=>{t.value="",s.value="",o.value=null,e.value=!1}}},Bp=()=>{const e=fe(),t=N("insight-history",()=>[]),s=N("is-replay-mode",()=>!1),o=N("selected-history-item",()=>null),r=N("insight-history-loading",()=>!1),a=async(b,h)=>{r.value=!0;try{const m=await $fetch(`${e.public.apiBase}/api/v1/insights/history`,{params:{article_id:b,user_id:h}});return t.value=m.insights,console.log(" ",m.total,""),m.insights}catch(m){return console.error(" :",m),[]}finally{r.value=!1}},l=()=>{s.value=!s.value,s.value||(o.value=null)},d=(b,h)=>{u(b),console.log(" ",h.length,"");for(const m of h)try{f(b,m)}catch(w){console.error(" :",m.selected_text.substring(0,30),w)}console.log(" ")},f=(b,h)=>{h.selected_text.trim()&&(h.selected_start!==null&&h.selected_end!==null?c(b,h)||(console.warn(" "),i(b,h)):i(b,h))},c=(b,h)=>{if(h.selected_start===null||h.selected_end===null)return!1;const{content:m}=Ne(),w=m.value;if(!w)return!1;const x=w.substring(h.selected_start,h.selected_end),$=document.createTreeWalker(b,NodeFilter.SHOW_TEXT,{acceptNode:ue=>{const we=ue.parentElement;return we?.classList.contains("insight-replay-highlight")||we?.classList.contains("meta-view-highlight")?NodeFilter.FILTER_REJECT:ue.textContent?.trim()?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),C=[];let R;for(;R=$.nextNode();)C.push(R);let I=0;const E=[];for(const ue of C){const we=ue.textContent||"";E.push({node:ue,startOffset:I,endOffset:I+we.length}),I+=we.length}const B=E.filter(ue=>ue.startOffset<h.selected_end&&ue.endOffset>h.selected_start);if(B.length===0)return console.warn(" "),!1;if(B.length>1)return console.warn(" "),!1;const V=B[0],F=V.node,W=Math.max(0,h.selected_start-V.startOffset),se=Math.min(F.textContent.length,h.selected_end-V.startOffset),U=F.textContent||"",ie=U.substring(0,W),ae=U.substring(W,se),Q=U.substring(se);if(ae!==x)return console.warn(" "),console.log(":",x.substring(0,50)),console.log(":",ae.substring(0,50)),!1;const Y=F.parentNode;if(!Y)return!1;const ye=p(ae,h);return ie&&Y.insertBefore(document.createTextNode(ie),F),Y.insertBefore(ye,F),Q&&Y.insertBefore(document.createTextNode(Q),F),Y.removeChild(F),console.log(" :",h.selected_start,"-",h.selected_end),!0},i=(b,h)=>{const m=h.selected_text.trim();if(!m)return;const w=document.createTreeWalker(b,NodeFilter.SHOW_TEXT,{acceptNode:C=>{const R=C.parentElement;return R?.classList.contains("insight-replay-highlight")||R?.classList.contains("meta-view-highlight")?NodeFilter.FILTER_REJECT:C.textContent?.trim()?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),x=[];let $;for(;$=w.nextNode();)x.push($);for(const C of x){const R=C.textContent||"",I=R.indexOf(m);if(I!==-1){const E=R.substring(0,I),B=R.substring(I,I+m.length),V=R.substring(I+m.length),F=C.parentNode;if(!F)continue;const W=p(B,h);E&&F.insertBefore(document.createTextNode(E),C),F.insertBefore(W,C),V&&F.insertBefore(document.createTextNode(V),C),F.removeChild(C);break}}},p=(b,h)=>{const m=document.createElement("span");return m.className="insight-replay-highlight",m.dataset.insightId=h.id.toString(),m.style.borderBottom="3px solid #f97316",m.style.cursor="pointer",m.style.backgroundColor="rgba(249, 115, 22, 0.1)",m.style.padding="0.1em 0.2em",m.style.borderRadius="0.25em",m.style.transition="all 0.2s ease",m.textContent=b,m.addEventListener("click",w=>{w.stopPropagation();const{currentInsight:x,currentReasoning:$}=Os(),{selectedText:C,context:R,selectedStart:I,selectedEnd:E,showIntentButtons:B}=Xt();x.value=h.insight,h.reasoning&&($.value=h.reasoning),C.value=h.selected_text;const V=h.context_before||"",F=h.context_after||"";R.value=V+h.selected_text+F,I.value=h.selected_start,E.value=h.selected_end,B.value=!0,console.log(" ")}),m.addEventListener("mouseenter",()=>{m.style.backgroundColor="rgba(249, 115, 22, 0.2)",m.style.boxShadow="0 0 0 2px rgba(249, 115, 22, 0.2)"}),m.addEventListener("mouseleave",()=>{m.style.backgroundColor="rgba(249, 115, 22, 0.1)",m.style.boxShadow="none"}),m},u=b=>{b.querySelectorAll(".insight-replay-highlight").forEach(m=>{const w=m.parentNode;if(w){const x=document.createTextNode(m.textContent||"");w.replaceChild(x,m)}}),b.normalize()},g=b=>{o.value=b},y=()=>{t.value=[],s.value=!1,o.value=null};return{insightHistory:Z(t),isReplayMode:Z(s),selectedHistoryItem:Z(o),isLoading:Z(r),loadInsightHistory:a,toggleReplayMode:l,renderHistoryHighlights:d,removeHistoryHighlights:u,selectHistoryItem:g,clearReplayState:y}},Lp=()=>{const e=async f=>{const c=document.getElementById("article-content-container");if(!c){console.warn(" ");return}console.log(" ..."),f.concept_sparks&&f.concept_sparks.length>0&&await t(c,f.concept_sparks),f.argument_sparks&&f.argument_sparks.length>0&&await l(c,f.argument_sparks),console.log(" ")},t=async(f,c)=>{console.log(`  ${c.length} `);for(let i=0;i<c.length;i++){const p=c[i];await new Promise(u=>setTimeout(u,i*50));try{const u=document.querySelector(p.dom_path);if(!u){console.warn(` : ${p.dom_path}`);continue}const g=s(p);o(u,p.text,g)}catch(u){console.error(" :",u)}}},s=f=>{const c=document.createElement("span");return c.className="concept-spark",c.dataset.sparkText=f.text,c.dataset.hint=f.explanation_hint,c.style.borderBottom="2px dotted #10b981",c.style.cursor="pointer",c.style.position="relative",c.style.transition="all 0.2s ease",c.style.opacity="0",c.style.animation="fade-in-up 0.6s ease-out forwards",c.addEventListener("click",async i=>{i.stopPropagation(),await r(f)}),c.addEventListener("mouseenter",()=>{c.style.backgroundColor="rgba(16, 185, 129, 0.1)",c.style.borderBottomWidth="3px"}),c.addEventListener("mouseleave",()=>{c.style.backgroundColor="transparent",c.style.borderBottomWidth="2px"}),c},o=(f,c,i)=>{const p=document.createTreeWalker(f,NodeFilter.SHOW_TEXT);let u;for(;u=p.nextNode();){const g=u.textContent||"",y=g.indexOf(c);if(y>=0){const b=u.parentNode;if(!b)continue;const h=g.substring(0,y),m=g.substring(y+c.length);i.textContent=c,h&&b.insertBefore(document.createTextNode(h),u),b.insertBefore(i,u),m&&b.insertBefore(document.createTextNode(m),u),b.removeChild(u);break}}},r=async f=>{console.log(` : ${f.text}`);const c=fe();try{const i=await $fetch(`${c.public.apiBase}/api/v1/sparks/explain`,{method:"POST",body:{hint:f.explanation_hint,concept:f.text}});a({title:f.text,content:i.explanation,type:"concept",score:f.importance_score})}catch(i){console.error(" :",i),a({title:f.text,content:f.explanation_hint,score:f.importance_score})}},a=f=>{const c=document.createElement("div");c.className="fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex items-center justify-center",c.onclick=()=>c.remove();const i=document.createElement("div");i.className="bg-white rounded-2xl shadow-2xl max-w-2xl p-6 m-4",i.onclick=u=>u.stopPropagation(),i.innerHTML=`
      <div class="border-b pb-4 mb-4">
        <h3 class="text-2xl font-bold text-gray-900">${f.title}</h3>
        ${f.score?`<p class="text-sm text-green-600 mt-1">: ${f.score}/10</p>`:""}
      </div>
      <div class="text-gray-700 leading-relaxed">
        ${f.content}
      </div>
      <div class="mt-6 flex justify-end">
        <button class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
          
        </button>
      </div>
    `,i.querySelector("button")?.addEventListener("click",()=>c.remove()),c.appendChild(i),document.body.appendChild(c)},l=async(f,c)=>{console.log(`  ${c.length} `);for(const i of c){const p=document.querySelector(i.dom_path);if(!p)continue;const u=document.createElement("span");u.className="argument-spark",u.style.borderBottom="2px solid #3b82f6",u.style.cursor="pointer",u.onclick=()=>{a({title:`${i.type==="claim"?"":i.type==="evidence"?"":""}`,content:`${i.role_description}

"${i.text}"`})},o(p,i.text,u)}};return{renderSparks:e,renderConceptSparks:t,renderArgumentSparks:l,clearSparks:()=>{document.querySelectorAll(".concept-spark, .argument-spark").forEach(f=>{const c=f.textContent||"";f.replaceWith(document.createTextNode(c))})}}},Pp=()=>{const{user:e}=gt(),t=fe();let s=null;const o=new Map,r=new Map,a=()=>{if(!e.value||s)return;const p=`${t.public.apiBase}/api/v1/sse/analysis-notifications?user_id=${e.value.id}`;console.log("  SSE:",p),s=new EventSource(p),s.addEventListener("connected",u=>{const g=JSON.parse(u.data);console.log(" SSE :",g)}),s.addEventListener("analysis_complete",u=>{const y=JSON.parse(u.data).article_id;console.log(" :",y);const b=o.get(y);b&&b(y),c(y)}),s.addEventListener("analysis_progress",u=>{const g=JSON.parse(u.data),y=g.article_id;console.log(` : ${g.stage} - ${g.progress}%`);const b=r.get(y);b&&b(g)}),s.addEventListener("heartbeat",u=>{console.log(" SSE ")}),s.onerror=u=>{console.error(" SSE :",u)}},l=()=>{s&&(s.close(),s=null,console.log(" SSE "))},d=(p,u)=>{o.set(p,u)},f=(p,u)=>{r.set(p,u)},c=async p=>{try{const u=await $fetch(`${t.public.apiBase}/api/v1/articles/${p}/analysis-report`);console.log(" :",u);const{renderSparks:g}=Lp();await g(u.report_data);const y=(u.report_data.concept_sparks?.length||0)+(u.report_data.argument_sparks?.length||0);i({message:`  ${y} `,type:"success",duration:5e3})}catch(u){console.error(" :",u),i({message:"",type:"error"})}},i=p=>{console.log(`[${p.type.toUpperCase()}] ${p.message}`);const u=document.createElement("div");u.className=`fixed bottom-40 right-8 px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in-up
      ${p.type==="success"?"bg-green-500":"bg-red-500"} text-white`,u.textContent=p.message,document.body.appendChild(u),setTimeout(()=>{u.classList.add("animate-fade-out"),setTimeout(()=>u.remove(),300)},p.duration||3e3)};return de(()=>{a()}),Ge(()=>{l()}),{connect:a,disconnect:l,onAnalysisComplete:d,onAnalysisProgress:f}},Op=()=>{const e=M(new Map),t=async f=>{const c=document.getElementById("article-content-container");if(!c){console.warn(" ");return}if(console.log(" ..."),f.sentences&&f.sentences.length>0){console.log(` Stanza ${f.sentences.length} `),console.log(" ...");const{renderWithBackendSentences:p}=Ms(),u=p(f.sentences);c.innerHTML=u,console.log(" ")}else console.log(" ");const i=s(f);e.value=i,console.log(` ${i.size} `),await o(c,i),console.log(" ")},s=f=>{const c=new Map;return f.concept_sparks&&f.concept_sparks.forEach(i=>{c.has(i.sentence_index)||c.set(i.sentence_index,{sentence_index:i.sentence_index,sentence_text:"",concepts:[],arguments:[],totalCount:0});const p=c.get(i.sentence_index);p.concepts.push(i),p.totalCount++}),f.argument_sparks&&f.argument_sparks.forEach(i=>{c.has(i.sentence_index)||c.set(i.sentence_index,{sentence_index:i.sentence_index,sentence_text:"",concepts:[],arguments:[],totalCount:0});const p=c.get(i.sentence_index);p.arguments.push(i),p.totalCount++}),c},o=async(f,c)=>{for(const[i,p]of c.entries()){await new Promise(u=>setTimeout(u,i*30));try{const u=document.querySelector(`#sentence-${i}`);if(!u){console.warn(` : #sentence-${i}`);continue}p.sentence_text=u.textContent||"",u.classList.add("has-sparks");const g=r(p);u.appendChild(g);const y=a(p);u.setAttribute("data-spark-tooltip",y),u.addEventListener("click",b=>{b.stopPropagation(),document.querySelectorAll(".has-sparks.show-tooltip").forEach(h=>{h!==u&&h.classList.remove("show-tooltip")}),u.classList.toggle("show-tooltip")}),u.addEventListener("mouseenter",()=>{u.classList.add("spark-hover")}),u.addEventListener("mouseleave",()=>{u.classList.remove("spark-hover")})}catch(u){console.error(" :",u)}}l(),d()},r=f=>{const c=document.createElement("span");c.className="spark-badge";const i=f.concepts.length>0,p=f.arguments.length>0;let u="";return p&&!i?u="":p&&i&&(u=""),c.innerHTML=`
      <span class="spark-icon">${u}</span>
    `,c},a=f=>{const c=[];if(f.concepts.length>0){const i=f.concepts.map(p=>` ${p.text} (: ${p.importance_score}/10) - ${p.explanation_hint}`);c.push(...i)}if(f.arguments.length>0){const i=f.arguments.map(p=>`${p.type==="claim"?"":p.type==="evidence"?"":""} ${p.role_description}`);c.push(...i)}return c.join(" | ")},l=()=>{if(document.getElementById("spark-renderer-v2-styles"))return;const f=document.createElement("style");f.id="spark-renderer-v2-styles",f.textContent=`
      /*  */
      .has-sparks {
        position: relative;
        cursor: pointer !important;
        transition: all 0.2s ease;
        padding: 2px 4px;
        margin: -2px -4px;
        border-radius: 4px;
      }

      .has-sparks:hover,
      .spark-hover {
        background-color: rgba(16, 185, 129, 0.08);
      }

      /*  */
      // .spark-badge {
      //   display: inline-flex;
      //   align-items: center;
      //   gap: 2px;
      //   padding: 1px 6px;
      //   margin-left: 4px;
      //   background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      //   border-radius: 10px;
      //   font-size: 11px;
      //   font-weight: 600;
      //   color: white;
      //   box-shadow: 0 1px 3px rgba(16, 185, 129, 0.3);
      //   animation: badge-appear 0.4s ease-out;
      //   vertical-align: middle;
      //   white-space: nowrap;
      // }

      .spark-icon {
        font-size: 15px;
        line-height: 1;
      }

      .spark-count {
        line-height: 1;
      }

      @keyframes badge-appear {
        from {
          opacity: 0;
          transform: scale(0.8) translateY(-2px);
        }
        to {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      /*  */
      .has-sparks::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, #10b981, transparent);
        opacity: 0;
        transition: opacity 0.2s;
      }

      .has-sparks:hover::after {
        opacity: 0.5;
      }
    `,document.head.appendChild(f)},d=()=>{window.__sparkTooltipClickHandler&&document.removeEventListener("click",window.__sparkTooltipClickHandler);const f=c=>{c.target.closest(".has-sparks")||document.querySelectorAll(".has-sparks.show-tooltip").forEach(p=>{p.classList.remove("show-tooltip")})};window.__sparkTooltipClickHandler=f,document.addEventListener("click",f)};return{renderSparks:t,sparkGroups:e}},Ip=()=>{const e=M(new Map),t=r=>{if(r.key==="Escape"){const a=e.value.get("escape");a&&(a(),r.preventDefault())}if((r.ctrlKey||r.metaKey)&&r.key==="k"){const a=e.value.get("search");a&&(a(),r.preventDefault())}if((r.ctrlKey||r.metaKey)&&r.key==="/"){const a=e.value.get("help");a&&(a(),r.preventDefault())}},s=(r,a)=>{e.value.set(r,a)},o=r=>{e.value.delete(r)};return de(()=>{window.addEventListener("keydown",t)}),Ge(()=>{window.removeEventListener("keydown",t)}),{register:s,unregister:o}},Rp={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-zinc-50 relative overflow-hidden"},zp={class:"relative z-10"},Hp={class:"border-b border-gray-200 bg-white"},jp={class:"flex"},Dp={class:"flex items-center justify-center gap-2"},qp={key:0,class:"ml-1 px-1.5 py-0.5 text-xs bg-amber-600 text-white rounded-full"},Np={class:"flex-1 overflow-hidden"},Jp=O({__name:"index",setup(e){const{content:t,title:s,isReading:o,setArticle:r}=Ne(),{selectedText:a,context:l,position:d,showIntentButtons:f,clear:c,selectedStart:i,selectedEnd:p}=Xt(),{currentInsight:u,currentReasoning:g,isGenerating:y,error:b,generate:h}=Os(),{stashItems:m}=Sn(),{insightHistory:w,selectedHistoryItem:x,loadInsightHistory:$,clearReplayState:C,selectHistoryItem:R,isReplayMode:I,toggleReplayMode:E,renderHistoryHighlights:B,removeHistoryHighlights:V}=Bp(),{history:F}=An(),{isMetaViewActive:W,isAnalyzing:se,analyzeArticle:U,toggleMetaView:ie}=Bs(),ae=M(!1),Q=M(!1),Y=M(null),{fetchPreferences:ye}=kp(),ue=M(!1),we=M(null),Qt=N("current-article-id",()=>null),Se=fe(),{user:_e}=gt(),{connect:Is,disconnect:Rs,onAnalysisComplete:zs}=Pp(),{renderSparks:Zt}=Op(),en=M(null),Hs=S(()=>u.value),js=S(()=>g.value),Ds=S(()=>y.value),qs=S(()=>b.value),bt=M(void 0),Ns=N("use-reasoning",()=>!1),De=M("insight"),Tn=S(()=>m.value.length),Pe=M(!1);G(()=>a.value,H=>{H&&H.length>0&&!f.value?Pe.value=!0:Pe.value=!1});const Vs=()=>{Pe.value=!1,f.value=!0},Fs=()=>{Pe.value=!1,c()},{register:Ws}=Ip();Ge(()=>{Rs()});const Us=async H=>{if(r(H),_e.value?.id)try{we.value||(we.value=await ye(_e.value.id));const q=await $fetch(`${Se.public.apiBase}/api/v1/articles/save-with-analysis`,{method:"POST",body:{title:s.value||"",content:H,user_id:_e.value.id}});if(Qt.value=q.article.id,console.log(" , ID:",q.article.id),q.analysis.status==="completed"){console.log(" ...");const re=await $fetch(`${Se.public.apiBase}/api/v1/articles/${q.article.id}/analysis-report`);en.value=re.report_data,await Zt(re.report_data),console.log(" ")}else console.log(" ..."),zs(q.article.id,async re=>{console.log(`  ID: ${re}`);try{const te=await $fetch(`${Se.public.apiBase}/api/v1/articles/${re}/analysis-report`);en.value=te.report_data,await Zt(te.report_data),console.log(" ");const qe=(te.report_data.concept_sparks?.length||0)+(te.report_data.argument_sparks?.length||0);qe>0&&console.log(`  ${qe} `)}catch(te){console.error(" :",te)}});if(we.value){const re=we.value;if(re.auto_meta_analysis){console.log(" ...");try{await $fetch(`${Se.public.apiBase}/api/v1/meta-analysis/analyze`,{method:"POST",body:{title:s.value||"",author:"",full_text:H,user_id:_e.value.id}}),console.log(" ")}catch(te){console.error(" :",te)}}if(re.auto_argument_lens){console.log(" ...");try{const te=await $fetch(`${Se.public.apiBase}/api/v1/meta-analysis/analyze`,{method:"POST",body:{title:s.value||"",author:"",full_text:H,user_id:_e.value.id}});te.meta_analysis?.id&&(await $fetch(`${Se.public.apiBase}/api/v1/thinking-lens/apply`,{method:"POST",body:{meta_analysis_id:te.meta_analysis.id,lens_type:"argument_structure",full_text:H}}),console.log(" "))}catch(te){console.error(" :",te)}}if(re.auto_stance_lens){console.log(" ...");try{const te=await $fetch(`${Se.public.apiBase}/api/v1/meta-analysis/analyze`,{method:"POST",body:{title:s.value||"",author:"",full_text:H,user_id:_e.value.id}});te.meta_analysis?.id&&(await $fetch(`${Se.public.apiBase}/api/v1/thinking-lens/apply`,{method:"POST",body:{meta_analysis_id:te.meta_analysis.id,lens_type:"author_stance",full_text:H}}),console.log(" "))}catch(te){console.error(" :",te)}}}q.article.is_new||(await $(q.article.id,_e.value.id),console.log(" "))}catch(q){console.error(" :",q)}},Gs=async(H,q,re)=>{Q.value||at();const te=N("use-reasoning",()=>!1),qe={selected_text:a.value,context:l.value,intent:H,custom_question:q,use_reasoning:te.value,include_full_text:re||!1};re&&t.value&&(qe.full_text=t.value),bt.value=qe,await h(qe),c(),Pe.value=!1},Ks=H=>{Q.value||at(),u.value=H.insight,bt.value=void 0,De.value="insight",H.articleTitle&&H.articleTitle!==s.value&&console.log(":",H.articleTitle)},Ys=H=>{Q.value||at(),a.value=H.selected_text;const q=H.context_before||"",re=H.context_after||"";l.value=q+H.selected_text+re,i.value=H.selected_start,p.value=H.selected_end,u.value=H.insight,H.reasoning&&(g.value=H.reasoning),R(null),f.value=!0,console.log(" ")},Xs=H=>{Q.value||at(),u.value=H.insight,g.value=H.reasoning||"",bt.value={selected_text:H.selectedText,context:H.context,intent:H.intent,custom_question:H.customQuestion,use_reasoning:!!H.reasoning},De.value="insight",console.log(" :",H.selectedText.substring(0,30),"...")},Js=H=>{we.value=H,console.log(" :",H)},at=()=>{Y.value&&Y.value.togglePanel(),Q.value=!Q.value},Qs=()=>{E();const H=document.getElementById("article-content-container");H&&(I.value?B(H,w.value):V(H))},Zs=async()=>{if(W.value)ie();else try{await U(s.value||"","",new Date().toISOString(),t.value,_e.value?.id,void 0),ie()}catch(H){console.error(":",H),ie()}};Ao({title:"InsightReader - ",meta:[{name:"description",content:" AI "}]}),G(()=>Qt.value,async H=>{H&&_e.value?.id?(await $(H,_e.value.id),w.value.length>0&&console.log(`  ${H}  ${w.value.length} `)):C()});const eo=To();return de(async()=>{Is(),Ws("escape",()=>{(f.value||Pe.value)&&(c(),Pe.value=!1)});const H=eo.query.articleId;if(H)try{const q=await $fetch(`${Se.public.apiBase}/api/v1/articles/${H}`);r(q.content,q.title),Qt.value=Number(H),console.log(" :",q.title),await Re();try{const re=await $fetch(`${Se.public.apiBase}/api/v1/articles/${H}/analysis-report`);en.value=re.report_data,await Zt(re.report_data),console.log(" ")}catch{console.log(" ")}}catch(q){console.error(" :",q)}}),(H,q)=>{const re=po,te=ti,qe=_i,to=pu,no=f0,so=of,oo=ff,ro=gf,ao=Lf,lo=Uf,io=np,co=_p,uo=Mp;return _(),k("div",Rp,[q[10]||(q[10]=n("div",{class:"fixed inset-0 overflow-hidden pointer-events-none z-0"},[n("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-emerald-400/10 rounded-full blur-3xl"}),n("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-slate-400/10 rounded-full blur-3xl"}),n("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-zinc-400/5 rounded-full blur-3xl"})],-1)),n("div",zp,[L(re,{onOpenSettings:q[0]||(q[0]=Ze=>ue.value=!0)}),v(o)?(_(),z(oo,{key:1,ref_key:"readerLayoutRef",ref:Y},{left:A(()=>[L(qe,{content:v(t),title:v(s)},null,8,["content","title"]),v(o)?(_(),z(to,{key:0,"article-content":v(t)},null,8,["article-content"])):P("",!0)]),right:A(()=>[n("div",Hp,[n("div",jp,[n("button",{onClick:q[1]||(q[1]=Ze=>De.value="insight"),class:j(["flex-1 px-4 py-3 text-sm font-medium transition-all",[v(De)==="insight"?"text-emerald-700 border-b-2 border-emerald-600 bg-emerald-50/50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"]])},[...q[7]||(q[7]=[n("span",{class:"flex items-center justify-center gap-2"},[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),n("span",null,"AI ")],-1)])],2),n("button",{onClick:q[2]||(q[2]=Ze=>De.value="stash"),class:j(["flex-1 px-4 py-3 text-sm font-medium transition-all relative",[v(De)==="stash"?"text-amber-700 border-b-2 border-amber-600 bg-amber-50/50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"]])},[n("span",Dp,[q[8]||(q[8]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})],-1)),q[9]||(q[9]=n("span",null,"",-1)),v(Tn)>0?(_(),k("span",qp,T(v(Tn)),1)):P("",!0)])],2)])]),n("div",Np,[me(L(no,{insight:v(Hs),reasoning:v(js),"is-loading":v(Ds),error:v(qs),"current-request":v(bt),"use-reasoning":v(Ns)},null,8,["insight","reasoning","is-loading","error","current-request","use-reasoning"]),[[Et,v(De)==="insight"]]),me(L(so,{onViewItem:Xs},null,512),[[Et,v(De)==="stash"]])])]),_:1},512)):(_(),z(te,{key:0,onSubmit:Us})),L(ro,{show:v(Pe),position:v(d),onClick:Vs,onClose:Fs},null,8,["show","position"]),L(ao,{show:v(f),position:v(d),"selected-text":v(a),onSelect:Gs,onClose:v(c)},null,8,["show","position","selected-text","onClose"]),L(lo,{"is-open":v(ae),onClose:q[3]||(q[3]=Ze=>ae.value=!1),onSelect:Ks},null,8,["is-open"]),v(o)?(_(),z(io,{key:2,"is-insight-panel-expanded":v(Q),"insight-count":v(w).length,"is-replay-mode":v(I),"history-count":v(F).length,"is-meta-view-active":v(W),"is-meta-analyzing":v(se),onToggleInsightPanel:at,onToggleReplay:Qs,onOpenHistory:q[4]||(q[4]=Ze=>ae.value=!0),onToggleMetaView:Zs},null,8,["is-insight-panel-expanded","insight-count","is-replay-mode","history-count","is-meta-view-active","is-meta-analyzing"])):P("",!0),L(co,{"selected-item":v(x),onClose:q[5]||(q[5]=Ze=>v(R)(null)),onContinueChat:Ys},null,8,["selected-item"]),L(uo,{"is-open":v(ue),"user-id":v(_e)?.id||0,onClose:q[6]||(q[6]=Ze=>ue.value=!1),onPreferencesUpdated:Js},null,8,["is-open","user-id"])])])}}});export{Jp as default};
